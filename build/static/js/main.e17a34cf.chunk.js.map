{"version":3,"sources":["i18n.js","stores/FilterChecker.ts","stores/GroupBy.ts","services/City.Service.ts","services/Dexie.Injured.Service.js","stores/FilterStore.ts","stores/UiStore.ts","stores/storeConfig.ts","stores/RootStore.ts","assets/menu_white.png","assets/safety-logo.png","services/Accident.Service.ts","components/molecules/CitySelector.tsx","components/molecules/StreetSelector.tsx","components/molecules/RoadSegmentSelector.tsx","components/atoms/Checkbox.tsx","components/molecules/GroupCheckBox.tsx","components/organisms/FilterRequest.tsx","components/organisms/FilterPanel.tsx","components/atoms/ErrorBoundary.tsx","components/templates/TabsTemplate.tsx","components/templates/HomeTemplate.tsx","components/pages/HomePage.tsx","components/templates/CityTemplate.tsx","components/pages/CityPage.tsx","components/molecules/LanguageSelector.tsx","components/atoms/ButtonMenu.tsx","components/templates/Headr.tsx","components/templates/Footer.tsx","App.js","serviceWorker.js","index.js","stores/MapStore.ts"],"names":["i18n","use","initReactI18next","init","fallbackLng","lng","debug","resources","translationEng","translationHeb","interpolation","escapeValue","FilterChecker","label","valid","filters","this","checked","observable","ColumnFilter","name","dbColName","allTypesOption","arrTypes","reduce","counter","currentValue","computed","GroupBy","text","value","limit","GroupBy2","vals","revTrnas","key","fixStrcutTable","data","map","x","arr","count","y","grp2","join","xId","_id","undefined","replace","sObject","JSON","parse","getBars","Object","entries","color","getColumns","res","unshift","GroupBy2Val","CityService","cityName","collback","settings","$","ajax","done","response","lang","db","Dexie","a","injuerd","bulkPut","getFromDexie","arrFilters","length","toArray","years","shift","where","filterName","between","startYear","endYear","collection","forEach","element","and","values","orFilter","val","version","stores","FilterStore","rootStore","dictGroupBy","dict","appInitialized","updateSpeedLimit","aType","updateFilters","speedLimit","getFilterGroupBy","filterMatch","groupName","groupName2","filter","grpids","submintMainDataFilter","isLoading","getFilter","mapStore","updateIsSetBounds","cities","roadSegment","fetchFilter","then","updateAllInjuries","useLocalDb","insertToDexie","submintGetMarkerFirstStep","updateDataMarkersLean","submitCityNameAndLocation","city","getCityByNameHe","updateMapCenterByCity","cityResult","bounds","useBounds","getMultiplefilter","injurySeverity","getfilterCity","getfilterBounds","dayNight","getFilterStreets","getFilterFromArray","injTypes","genderTypes","ageTypes","populationTypes","accidentType","vehicleType","roadTypes","roadWidth","separator","oneLane","mapBounds","getSouth","getNorth","getWest","getEast","getfilterForCityOnly","streets","trim","colFilter","allChecked","arrfilter","iterator","filterCheck","xSafe","submitMainDataFilterLocalDb","getFilterIDB","console","log","submintGetMarkersBBoxIdb","getFilterBboxIDB","updateDataMarkersInBounds","toString","push","getfilterCityIDB","getFilterStreetsIDB","getMultiplefilterIDB","getFilterFromArrayIDb","bbox","p1","getSouthWest","p2","getNorthEast","filterVals","filter1","col","FC","groupByDict","group2Dict","groupBy","groupBy2","isAllValsFalse","isValidSeverity","isValidWhen","isValidWho","isValidWhere","isValidWhat","isValidWhatVehicle","isValidWhatRoad","action","names","split","year","parseInt","setMarkersLoadStep","dataAllInjuries","setBounds","bboxType","BBoxType","LOCAL_BBOX","getMarkersInLocalBBox","dataMarkersLean","submitfilterdGroup","submitfilterdGroup2","filtermatch","fetchGroupBy","dataByYears","dataFilterdByYears","aGroupBy","dataFilterd","fixData","dataGroupby2","step","isUse2StepsMarkers","markersLoadStep","SERVER_BBOX","submintGetMarkersBBox","submitGroupByYears","submitfilterdGroupByYears","index","UiStore","reactionChangeLang","reaction","language","locale","changeLanguage","initLang","slang","localStorage","getItem","updateLanguage","error","setItem","stringify","store","uiStore","filterStore","MapStore","StoreContext","React","createContext","useStore","useContext","Error","module","exports","type","url","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","ok","json","CitySelector","observer","isMultiple","t","useTranslation","Form","Group","controlId","Label","className","id","onChange","selected","updateCities","options","citisNamesHeb","multiple","StreetSelector","Control","placeholder","e","updateStreets","target","RoadSegmentSelector","updateRoadSegment","Checkbox","group","Check","inline","GroupCheckbox","formName","onGroupChange","feedback","style","marginTop","fontSize","isvalid","fChecker","STYLE_TOGGLE_WARNING","STYLE_TOGGLE_NORMAL","FilterRequest","activeCardKey","updateInjurySeverity","isValidAllFilters","Accordion","defaultActiveKey","CardFilterWhen","CardFilterWhere","CardFilterWho","CardFilterWhat","CardFilterWhatVehicle","CardFilterWhatRoad","Button","variant","disabled","onClick","submitFilter","setStartYear","setEndYear","updateDayNight","styleToggle","Card","Header","Toggle","as","eventKey","Collapse","Body","Row","Col","defaultValue","updateRoadType","isMultipleCities","updateInjuerdType","updateGenderType","updateAgeType","updatePopulationType","updateAccidentType","updateVehicleType","updateRoadWidth","updateSeparator","updateOneLane","FilterPanel","useState","open","setOpen","aria-controls","aria-expanded","in","ErrorBoundary","props","state","hasError","errorInfo","children","Component","GroupByGraphsPanel","lazy","GroupByTablesPanel","MapAccidents","AccidentsTable","TabsTemplate","defaultKey","activeKey","Tabs","mountOnEnter","onSelect","isReadyToRenderMap","Tab","title","fallback","HomeTemplate","HomePage","CityTemplate","query","URLSearchParams","useLocation","search","get","found","includes","find","useCityNamefromQuery","CityPage","LanguageSelector","document","getElementById","href","classList","remove","add","ButtonGroup","toggle","size","ToggleButton","defaultChecked","ButtonMenu","styleLink","alignRight","Dropdown","backgroundColor","src","menuIcon","alt","height","width","Menu","Item","to","getShowNavMenu","divStyle","display","flexFlow","window","innerWidth","showNavMenu","setShowNavMenu","navMenu","useEffect","handleResize","show","addEventListener","removeEventListener","logo","Footer","AboutPage","App","path","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch","message","mapRef","setMapRef","getBounds","lastPoint","L","latLng","latitude","longitude","p","LatLng","lat","DEFAULT_BOUNDS","latLngBounds","getBounds2","south","north","west","east","Math","min","max","getMarkersInBBox","boundsMargin","current","leafletElement","center","mapCenter","lon","updateMapCenter","citisArr","isSetBounds","bunds","getCenter","roadSegArr","useSetBounds","heatLayerHidden","dataMarkersInBounds"],"mappings":"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","file":"static/js/main.e17a34cf.chunk.js","sourcesContent":["import i18n from 'i18next';\r\n//import LanguageDetector from 'i18next-browser-languagedetector';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport translationEng from \"./lng/en/translation.json\";\r\nimport translationHeb from \"./lng/he/translation.json\";\r\n\r\n\r\ni18n\r\n  // detect user language\r\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n  //.use(LanguageDetector)\r\n  // pass the i18n instance to react-i18next.\r\n  .use(initReactI18next)\r\n  .init({\r\n    fallbackLng: 'he',\r\n    lng : 'he',\r\n    debug: true,\r\n    // hardcoding translations for the sake of simplicity,\r\n    // id more complex - get it from backend.\r\n    // i18next has a small plugin that makes it easy.\r\n    // learn more: https://github.com/i18next/i18next-xhr-backend\r\n    resources: {\r\n      'en':{\r\n        'translation':translationEng  \r\n      },\r\n        'he':{\r\n        'translation':translationHeb \r\n      }\r\n    },\r\n    interpolation: {\r\n      escapeValue: false, // not needed for React as it escapes by default\r\n    },\r\n});\r\nexport default i18n;","import { observable,computed } from \"mobx\"\r\n\r\nexport interface IFilterChecker {\r\n    checked: boolean;\r\n    label: string;\r\n    filters: string[];\r\n}\r\nexport default class FilterChecker implements IFilterChecker {\r\n    @observable\r\n    checked: boolean;\r\n    label: string;\r\n    filters: string[];\r\n    constructor(label: string, valid: boolean, filters: string[]) {\r\n        this.label = label;\r\n        this.checked = valid;\r\n        this.filters = filters;\r\n    }\r\n}\r\nexport interface IColumnFilter {\r\n    name: string;\r\n    dbColName: string;\r\n    arrTypes: IFilterChecker[];\r\n    allTypesOption : number;\r\n    isAllValsFalse: boolean;\r\n}\r\nexport class ColumnFilter implements IColumnFilter {\r\n    name: string;\r\n    dbColName: string;\r\n    @observable\r\n    arrTypes: IFilterChecker[];\r\n    allTypesOption : number;\r\n    constructor(name: string, dbColName: string, allTypesOption: number = -1) {\r\n        this.name = name;\r\n        this.dbColName = dbColName;\r\n        this.arrTypes = [];\r\n        this.allTypesOption = allTypesOption;\r\n    }\r\n    @computed get isAllValsFalse () {\r\n        const res = this.arrTypes.reduce(function(counter,currentValue){\r\n            return currentValue.checked? ++counter:counter;\r\n          },0);\r\n        return (res ===0);\r\n    }\r\n    // @computed get countTrueVals () {\r\n    //     const res = this.arrTypes.reduce(function(counter,currentValue){\r\n    //         return currentValue.checked? ++counter:counter;\r\n    //       },0);\r\n    //     return res;\r\n    // }\r\n}\r\n\r\nexport const initInjurySeverity = () => {\r\n    const col : IColumnFilter = new ColumnFilter('Severity','injury_severity_hebrew')\r\n    col.arrTypes.push(new FilterChecker('dead', true, [\"הרוג\"]));\r\n    col.arrTypes.push(new FilterChecker('severly-injured', false, [\"פצוע קשה\"]));\r\n    return col;\r\n}\r\n\r\nexport const initDayNight = () => {\r\n    const col : IColumnFilter = new ColumnFilter('DayNight','day_night_hebrew')\r\n    col.arrTypes.push(new FilterChecker('day', true, [\"יום\"]));\r\n    col.arrTypes.push(new FilterChecker('night', true, [\"לילה\"]));\r\n    return col;\r\n}\r\n\r\nexport const initMonth = (arr: IFilterChecker[]) => {\r\n    arr.push(new FilterChecker('1', true, [\"1\"]));\r\n    arr.push(new FilterChecker('2', true, [\"2\"]));\r\n    arr.push(new FilterChecker('3', true, [\"3\"]));\r\n    arr.push(new FilterChecker('4', true, [\"4\"]));\r\n    arr.push(new FilterChecker('5', true, [\"5\"]));\r\n    arr.push(new FilterChecker('6', true, [\"6\"]));\r\n    arr.push(new FilterChecker('7', true, [\"7\"]));\r\n    arr.push(new FilterChecker('8', true, [\"8\"]));\r\n    arr.push(new FilterChecker('9', true, [\"9\"]));\r\n    arr.push(new FilterChecker('10', true, [\"10\"]));\r\n    arr.push(new FilterChecker('11', true, [\"11\"]));\r\n    arr.push(new FilterChecker('12', true, [\"12\"]));\r\n}\r\n\r\nexport const initInjTypes = () => {\r\n    const col : IColumnFilter = new ColumnFilter('Vehicle','injured_type_hebrew',0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('pedestrian', false, [\"הולך רגל\"]));\r\n    col.arrTypes.push(new FilterChecker('cyclist', false, [\"נהג - אופניים\", \"נוסע - אופניים (לא נהג)\"]));\r\n    col.arrTypes.push(new FilterChecker('motorcycle', false, [\"נהג - אופנוע\", \"נוסע - אופנוע (לא נהג)\"]));\r\n    col.arrTypes.push(new FilterChecker('wheels4+', false, [\"נהג - רכב בעל 4 גלגלים ויותר\", \"נוסע - רכב בעל 4 גלגלים ויותר\"]));\r\n    col.arrTypes.push(new FilterChecker('other', false, [\"נהג - רכב לא ידוע\", \"נוסע - רכב לא ידוע\"]));\r\n    return col;\r\n}\r\n\r\nexport const initVehicleTypes = () => {\r\n    const col : IColumnFilter = new ColumnFilter('VehicleType','vehicle_vehicle_type_hebrew',0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('pedestrian', false, [\"null\"]));\r\n    col.arrTypes.push(new FilterChecker('mobilityscooter', false, [\"קלנועית חשמלית\"]));\r\n    col.arrTypes.push(new FilterChecker('bicycle', false, [\"אופניים\"]));\r\n    col.arrTypes.push(new FilterChecker('e-scooter', false, [\"קורקינט חשמלי\"]));\r\n    col.arrTypes.push(new FilterChecker('e-bike', false, [\"אופניים חשמליים\"]));\r\n    col.arrTypes.push(new FilterChecker('motorcycle', false, ['אופנוע 401+ סמ\"ק','אופנוע 126 עד 400 סמ\"ק','אופנוע 51 עד 125 סמ\"ק',]));\r\n    col.arrTypes.push(new FilterChecker('car', false, [\"רכב נוסעים פרטי\"]));\r\n    col.arrTypes.push(new FilterChecker('taxi', false, [\"מונית\"]));\r\n    col.arrTypes.push(new FilterChecker('bus', false, [\"אוטובוס זעיר\",\"אוטובוס\"]));\r\n    col.arrTypes.push(new FilterChecker('tranzit', false, [\"משא עד 3.5 טון - אחוד (טרנזיט)\"]));\r\n    col.arrTypes.push(new FilterChecker('tender', false, [\"משא עד 3.5  טון - לא אחוד (טנדר)\"]));\r\n    col.arrTypes.push(new FilterChecker('truck', false, ['משא 3.6 עד 9.9 טון','משא 10.0 עד 12.0 טון', 'משא 12.1 עד 15.9 טון', 'משא 16.0 עד 33.9 טון','משא 34.0+ טון',]));\r\n    col.arrTypes.push(new FilterChecker('tractor', false, [\"טרקטור\"]));\r\n    col.arrTypes.push(new FilterChecker('train', false, [\"רכבת\"]));\r\n    col.arrTypes.push(new FilterChecker('other', false, [\"אחר ולא ידוע\"]));\r\n    return col;\r\n}\r\n\r\nexport const initGenderTypes = () => {\r\n    const col : IColumnFilter = new ColumnFilter('Gender','sex_hebrew')\r\n    col.arrTypes.push(new FilterChecker('female', true, [\"נקבה\"]));\r\n    col.arrTypes.push(new FilterChecker('male', true, [\"זכר\"]));\r\n    return col;\r\n}\r\n\r\nexport const initAgeTypes = () => {\r\n    const col : IColumnFilter = new ColumnFilter('Age','age_group_hebrew', 0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('00-04', false, [\"00-04\"]));\r\n    col.arrTypes.push(new FilterChecker('05-09', false, [\"05-09\"]));\r\n    col.arrTypes.push(new FilterChecker('10-14', false, [\"10-14\"]));\r\n    col.arrTypes.push(new FilterChecker('15-19', false, [\"15-19\"]));\r\n    col.arrTypes.push(new FilterChecker('20-29', false, [\"20-24\", \"25-29\"]));\r\n    col.arrTypes.push(new FilterChecker('30-39', false, [\"30-34\", \"35-39\"]));\r\n    col.arrTypes.push(new FilterChecker('40-49', false, [\"40-44\", \"45-49\"]));\r\n    col.arrTypes.push(new FilterChecker('50-59', false, [\"50-54\", \"55-59\"]));\r\n    col.arrTypes.push(new FilterChecker('60-69', false, [\"60-64\", \"65-69\"]));\r\n    col.arrTypes.push(new FilterChecker('70-79', false, [\"70-74\", \"75-79\"]));\r\n    col.arrTypes.push(new FilterChecker('80+', false, [\"80-84\", \"85+\"]));\r\n    col.arrTypes.push(new FilterChecker('unknown', false, [\"לא ידוע\"]));\r\n    return col;\r\n}\r\nexport const initPopulationTypes = () => {\r\n    const col : IColumnFilter = new ColumnFilter('Population','population_type_hebrew')\r\n    col.arrTypes.push(new FilterChecker('jews', true, [\"יהודים\"]));\r\n    col.arrTypes.push(new FilterChecker('arabs', true, [\"ערבים\"]));\r\n    col.arrTypes.push(new FilterChecker('immigrants', true, [\"זרים\"]));\r\n    col.arrTypes.push(new FilterChecker('others', true, [\"אחרים\"]));\r\n    return col;\r\n}\r\n\r\nexport const initRoadTypes = () => {\r\n    const col : IColumnFilter = new ColumnFilter('RoadType','road_type_hebrew')\r\n    col.arrTypes.push(new FilterChecker('urban-junction', true, [\"עירונית בצומת\"]));\r\n    col.arrTypes.push(new FilterChecker('urban-road', true, [\"עירונית לא בצומת\"]));\r\n    col.arrTypes.push(new FilterChecker('non-urban-junction', true, [\"לא-עירונית בצומת\"]));\r\n    col.arrTypes.push(new FilterChecker('non-urban-road', true, [\"לא-עירונית לא בצומת\"]));\r\n    return col;\r\n}\r\nexport const initSpeedLimit = () =>{\r\n    const col : IColumnFilter = new ColumnFilter('SpeedLimit','speed_limit_hebrew',0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('speed50', false, ['עד 50 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed60', false, ['60 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed70', false, ['70 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed80', false, ['80 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed90', false, ['90 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed100', false, ['100 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed110', false, ['110 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed120', false, ['120 קמ\"ש']));\r\n    col.arrTypes.push(new FilterChecker('speed-unknown', false, ['לא ידוע']));\r\n    return col;\r\n}\r\nexport const initRoadWidth = () =>{\r\n    const col : IColumnFilter = new ColumnFilter('RoadWidth','road_width_hebrew', 0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('road-width-5', false, ['עד 5 מטר']));\r\n    col.arrTypes.push(new FilterChecker('road-width-7', false, ['5 עד 7 מטר']));\r\n    col.arrTypes.push(new FilterChecker('road-width-10', false, ['7 עד 10.5 מטר']));\r\n    col.arrTypes.push(new FilterChecker('road-width-14', false, ['10.5 עד 14 מטר']));\r\n    col.arrTypes.push(new FilterChecker('road-width-14+', false, ['יותר מ- 14 מטר']));\r\n    col.arrTypes.push(new FilterChecker('unknown', false, ['לא ידוע']));\r\n    return col;\r\n}\r\nexport const initSeparator = () =>{\r\n    const col : IColumnFilter = new ColumnFilter('Separator','multi_lane_hebrew',0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('separator-fence', false, ['מיפרדה עם גדר בטיחות']));\r\n    col.arrTypes.push(new FilterChecker('separator-built', false, ['מיפרדה בנויה ללא גדר בטיחות']));\r\n    col.arrTypes.push(new FilterChecker('separator-not-built', false, ['מיפרדה לא בנויה']));\r\n    col.arrTypes.push(new FilterChecker('separator-paint', false, ['מיפרדה מסומנת בצבע']));\r\n    col.arrTypes.push(new FilterChecker('separator-ohter', false, ['אחר']));\r\n    col.arrTypes.push(new FilterChecker('separator-not-relevant', false, ['null']));\r\n    return col;\r\n}\r\nexport const initOneLane = () =>{\r\n    const col : IColumnFilter = new ColumnFilter('OneLane','one_lane_hebrew',0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('onelane-twoway-line', false, ['דו סיטרי + קו הפרדה רצוף']));\r\n    col.arrTypes.push(new FilterChecker('onelane-twoway-noline', false, ['דו סיטרי אין קו הפרדה רצוף']));\r\n    col.arrTypes.push(new FilterChecker('onelane-oneway', false, ['חד סיטרי']));\r\n    col.arrTypes.push(new FilterChecker('onelane-unknown', false, ['לא ידוע מס מסלולים']));\r\n    col.arrTypes.push(new FilterChecker('onelane-not-relevant', false, ['null']));\r\n    return col;\r\n}\r\nexport const initAccidentType = () => {\r\n    const col : IColumnFilter = new ColumnFilter('AccidentType','accident_type_hebrew',0)\r\n    col.arrTypes.push(new FilterChecker('all', true, []));\r\n    col.arrTypes.push(new FilterChecker('hit-ped', false, [\"פגיעה בהולך רגל\"]));\r\n    col.arrTypes.push(new FilterChecker('hit-front-side', false, [\"התנגשות חזית בצד\"]));\r\n    col.arrTypes.push(new FilterChecker('hit-front-front', false, [\"התנגשות חזית בחזית\"]));\r\n    col.arrTypes.push(new FilterChecker('hit-front-rear', false, [\"התנגשות חזית באחור\"]));\r\n    col.arrTypes.push(new FilterChecker('hit-side-side', false, [\"התנגשות צד בצד\"]));\r\n    col.arrTypes.push(new FilterChecker('hit-obstacle', false, [\"התנגשות עם עצם דומם\"]));\r\n    col.arrTypes.push(new FilterChecker('hit-turning-over', false, [\"התהפכות\"]));\r\n    col.arrTypes.push(new FilterChecker('hit-slip', false, [\"החלקה\"]));\r\n    return col\r\n}\r\n\r\n\r\n","import { observable } from \"mobx\"\r\n\r\nexport interface IGroupBy {\r\n  text: string;\r\n  value: string;\r\n  limit: number;\r\n}\r\n\r\nexport default class GroupBy implements IGroupBy {\r\n  @observable\r\n  text: string;\r\n  value: string;\r\n  limit: number;\r\n  constructor(text: string, value: string, limit: number = 0) {\r\n    this.text = text;\r\n    this.value = value;\r\n    this.limit = limit;\r\n  }\r\n}\r\n\r\nexport const initGroupByDict = (dictGroupBy: any) => {\r\n  dictGroupBy[\"Severity\"] = new GroupBy('Severity', \"injury_severity_hebrew\")\r\n  dictGroupBy[\"TypeInjured\"] = new GroupBy('TypeInjured', \"injured_type_hebrew\");\r\n  dictGroupBy[\"Vehicle\"] = new GroupBy('Vehicle', \"vehicle_vehicle_type_hebrew\");\r\n  dictGroupBy[\"Gender\"] = new GroupBy('Gender', \"sex_hebrew\");\r\n  dictGroupBy[\"Age\"] = new GroupBy('Age', \"age_group_hebrew\");\r\n  dictGroupBy[\"Year\"] = new GroupBy('Year', \"accident_year\");\r\n  //dictGroupBy[\"Month\"] = new GroupBy('Month', \"accident_month\");\r\n  dictGroupBy[\"DayNight\"] = new GroupBy('DayNight', \"day_night_hebrew\");\r\n  dictGroupBy[\"WeekDay\"] = new GroupBy('WeekDay', \"day_in_week_hebrew\");\r\n  dictGroupBy[\"RoadType\"] = new GroupBy('RoadType', \"road_type_hebrew\");\r\n  dictGroupBy[\"City\"] = new GroupBy('City', \"accident_yishuv_name\", 10);\r\n  dictGroupBy[\"Street\"] = new GroupBy('Street', \"street1_hebrew\", 10);\r\n  dictGroupBy[\"AccidentType\"] = new GroupBy('AccidentType', \"accident_type_hebrew\");\r\n  dictGroupBy[\"SpeedLimit\"] = new GroupBy('SpeedLimit', \"speed_limit_hebrew\");\r\n  dictGroupBy[\"RoadWidth\"] = new GroupBy('RoadWidth', \"road_width_hebrew\");\r\n  dictGroupBy[\"Separator\"] = new GroupBy('Separator', \"multi_lane_hebrew\");\r\n  dictGroupBy[\"OneLane\"] = new GroupBy('OneLane', \"one_lane_hebrew\");\r\n}\r\n\r\nexport interface IGroupBy2 {\r\n  text: string;\r\n  name: string;\r\n  vals: any;\r\n}\r\nexport class GroupBy2  implements IGroupBy2 {\r\n  @observable\r\n  text:string;\r\n  name: string;\r\n  vals: any;\r\n  constructor( text:string, name: string) {\r\n    this.text =  text;\r\n    this.name = name;\r\n    this.vals = {};\r\n  }\r\n  revTrnas = (key: string) => {\r\n    let res = this.vals[key].name;\r\n    return res;\r\n  }\r\n  fixStrcutTable = (data: any[]) => {\r\n    let res = data.map((x) => {\r\n      let arr = x.count.map((y: any) => {\r\n        let engVal = this.revTrnas(y.grp2)\r\n        return ('\"' + engVal + '\":' + y.count)\r\n      }).join(',')\r\n      let xId = x._id;\r\n      if (xId !== null && xId !== undefined)\r\n        xId = xId.replace('\"', '\\\\\"')\r\n      let sObject = `{\"_id\":\"${xId}\",${arr}}`\r\n      sObject = JSON.parse(sObject)\r\n      return (sObject)\r\n    });\r\n    //console.log(res)\r\n    return res;\r\n  }\r\n  getBars = () => {\r\n    //[{key:\"male\",color:\"#8884d8\"},{key:\"female\",color:\"#82ca9d\"}]\r\n    let res = Object.entries(this.vals).map(([key, x]: any[]) => { return ({ key: x.name, color: x.color }) })\r\n    return res;\r\n  }\r\n  getColumns= () => {\r\n    let res = Object.entries(this.vals).map(([key, x]: any[]) => { return (x.name) })\r\n    res.unshift('_id')\r\n    return res;\r\n  }\r\n}\r\n\r\n\r\nexport class GroupBy2Val {\r\n  name: string;\r\n  color: string;\r\n  constructor(name: string, color: string) {\r\n    this.name = name;\r\n    this.color = color;\r\n  }\r\n}\r\n\r\nexport const initGroup2Dict = (dict: any) => {\r\n  dict[\"Severity\"] = new GroupBy2(\"Severity\",\"injury_severity_hebrew\")\r\n  dict[\"Severity\"].vals[\"הרוג\"] = new GroupBy2Val(\"dead\", \"#8884D8\")\r\n  dict[\"Severity\"].vals[\"פצוע קשה\"] = new GroupBy2Val(\"severly-injured\", \"#82CA9D\")\r\n\r\n  dict[\"Gender\"] = new GroupBy2(\"Gender\",\"sex_hebrew\");\r\n  dict[\"Gender\"].vals[\"זכר\"] = new GroupBy2Val(\"male\", \"#8884D8\")\r\n  dict[\"Gender\"].vals[\"נקבה\"] = new GroupBy2Val(\"female\", \"#82CA9D\")\r\n\r\n  dict[\"RoadType\"] = new GroupBy2('RoadType', \"road_type_hebrew\");\r\n  dict[\"RoadType\"].vals[\"עירונית בצומת\"] = new GroupBy2Val(\"urban-junction\", \"#559E54\")\r\n  dict[\"RoadType\"].vals[\"עירונית לא בצומת\"] = new GroupBy2Val(\"urban-road\", \"#305A30\")\r\n  dict[\"RoadType\"].vals[\"לא-עירונית בצומת\"] = new GroupBy2Val(\"non-urban-junction\", \"#1258DC\")\r\n  dict[\"RoadType\"].vals[\"לא-עירונית לא בצומת\"] = new GroupBy2Val(\"non-urban-road\", \"#0A337F\")\r\n\r\n \r\n  dict[\"TypeInjured\"] = new GroupBy2(\"TypeInjured\",\"injured_type_hebrew\");\r\n  dict[\"TypeInjured\"].vals[\"הולך רגל\"] = new GroupBy2Val(\"pedestrian\", \"#82CA9D\")\r\n  dict[\"TypeInjured\"].vals[\"נהג - אופניים\"] = new GroupBy2Val(\"cyclist-d\", \"#559E54\")\r\n  dict[\"TypeInjured\"].vals[\"נוסע - אופניים (לא נהג)\"] = new GroupBy2Val(\"cyclist-p\", \"#559E54\")\r\n  dict[\"TypeInjured\"].vals[\"נהג - רכב לא ידוע\"] = new GroupBy2Val(\"inj-unknown-d\", \"#305A30\")\r\n  dict[\"TypeInjured\"].vals[\"נוסע - רכב לא ידוע\"] = new GroupBy2Val(\"inj-unknown-p\", \"#305A30\")\r\n  dict[\"TypeInjured\"].vals[\"נהג - אופנוע\"] = new GroupBy2Val(\"motorcycle-d\", \"#1258DC\")\r\n  dict[\"TypeInjured\"].vals[\"נוסע - אופנוע (לא נהג)\"] = new GroupBy2Val(\"motorcycle-p\", \"#1258DC\")\r\n  dict[\"TypeInjured\"].vals[\"נהג - רכב בעל 4 גלגלים ויותר\"] = new GroupBy2Val(\"wheels4+-d\", \"#0A337F\")\r\n  dict[\"TypeInjured\"].vals[\"נוסע - רכב בעל 4 גלגלים ויותר\"] = new GroupBy2Val(\"wheels4+-p\", \"#0A337F\")\r\n}\r\n\r\n\r\n","import $ from \"jquery\";\r\n\r\n///////\r\nexport default class CityService {\r\n  //get request using jsonp\r\n  getCityByNameHe(cityName:string,collback :(res:any[]) =>void ){\r\n    //\"http://localhost:5000/api/v1/city?name_he=חיפה\"\r\n    var settings = {\r\n      \"url\": \"/api/v1/city?name_he=\" +cityName,\r\n      \"method\": \"GET\",\r\n      \"headers\": {}\r\n    }\r\n    $.ajax(settings).done(function (response:any[]) {\r\n      //console.log(response)\r\n      collback(response);\r\n    });\r\n  }\r\n  getCitiesNames(lang:string,collback :(res:any[]) =>void ){\r\n    //\"http://localhost:5000/api/v1/city?name_he=חיפה\"\r\n    var settings = {\r\n      \"url\": \"/api/v1/city?lang=\" +lang,\r\n      \"method\": \"GET\",\r\n      \"headers\": {}\r\n    }\r\n    $.ajax(settings).done(function (response:any[]) {\r\n      //console.log(response)\r\n      collback(response);\r\n    });\r\n  }\r\n}\r\n\r\n","import Dexie from 'dexie';\r\n\r\nconst db = new Dexie('saftyData');\r\ndb.version(1).stores({\r\n    injuerd: 'id++,_id, accident_id, accident_year, accident_timestamp, sex_hebrew, accident_yishuv_name ,road_type_hebrew'\r\n});\r\n\r\nexport async function insertToDexie(data) {\r\n    //console.log(\"insertToDexie\")\r\n    //console.log(data)\r\n    await db.injuerd.bulkPut(data);\r\n    //testInsertDexie() \r\n}\r\n\r\nexport async function getFromDexie(arrFilters) {\r\n    let data;\r\n    if (arrFilters.length === 0)\r\n        data = await db.injuerd.toArray();\r\n    else {\r\n        let years = arrFilters.shift()\r\n        let collection = await db.injuerd.where(years.filterName).between(years.startYear, years.endYear, true, true);\r\n        arrFilters.forEach(element => {\r\n            collection = collection.and((function (x) {\r\n                if (element.values.length === 1)\r\n                    return x[element.filterName] === element.values[0];\r\n                else {\r\n                    let orFilter = false;\r\n                    element.values.forEach(val => orFilter = orFilter || x[element.filterName] === val);\r\n                    return orFilter\r\n                }\r\n            }))\r\n        });\r\n        data = await collection.toArray();\r\n    }\r\n    return data\r\n}\r\n\r\n\r\n\r\n// var db1 = new Dexie('hellodb');\r\n// db1.version(1).stores({\r\n//     tasks: '++id,date,description,done'\r\n// });\r\n\r\n\r\n// export async function testInsertDexie() {\r\n//     var id = await db1.tasks.put({date: Date.now(), description: 'Test Dexie', done: 0});\r\n//     console.log(\"Got id \" + id);\r\n//     // Now lets add a bunch of tasks\r\n//     await db1.tasks.bulkPut([\r\n//         {date: Date.now(), description: 'Test Dexie bulkPut()', done: 1},\r\n//         {date: Date.now(), description: 'Finish testing Dexie bulkPut()', done: 1}\r\n//     ]);\r\n// } \r\n\r\n\r\nexport default db;","import { observable, action, computed } from \"mobx\"\r\nimport { IColumnFilter } from './FilterChecker'\r\nimport * as FC from './FilterChecker'\r\nimport * as GroupBy from './GroupBy'\r\nimport RootStore from \"./RootStore\";\r\nimport { fetchFilter, fetchGroupBy } from \"../services/Accident.Service\"\r\nimport CityService from '../services/City.Service'\r\nimport { insertToDexie, getFromDexie } from '../services/Dexie.Injured.Service'\r\nimport { BBoxType } from \"./MapStore\"\r\n//import autorun  from \"mobx\"\r\n\r\nexport default class FilterStore {\r\n  appInitialized = false\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n    this.injurySeverity = FC.initInjurySeverity()\r\n    this.dayNight = FC.initDayNight()\r\n    this.injTypes = FC.initInjTypes();\r\n    this.genderTypes = FC.initGenderTypes()\r\n    this.ageTypes = FC.initAgeTypes()\r\n    this.populationTypes = FC.initPopulationTypes()\r\n    this.accidentType = FC.initAccidentType()\r\n    this.vehicleType = FC.initVehicleTypes()\r\n    this.roadTypes = FC.initRoadTypes();\r\n    this.speedLimit = FC.initSpeedLimit()\r\n    this.roadWidth = FC.initRoadWidth();\r\n    this.separator = FC.initSeparator();\r\n    this.oneLane = FC.initOneLane();\r\n    GroupBy.initGroupByDict(this.groupByDict);\r\n    GroupBy.initGroup2Dict(this.group2Dict)\r\n    this.groupBy = this.groupByDict[\"TypeInjured\"];\r\n    this.groupBy2 = this.group2Dict[\"Gender\"];\r\n    this.appInitialized = false;\r\n  }\r\n  rootStore: RootStore;\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  //Severity\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  injurySeverity: IColumnFilter\r\n  @action\r\n  updateInjurySeverity = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.injurySeverity, aType, val)\r\n  }\r\n  @computed get isValidSeverity() {\r\n    const res = !this.injurySeverity.isAllValsFalse;\r\n    return res;\r\n  }\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  //where\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  isMultipleCities: boolean = false;\r\n  @observable\r\n  cities: string[] = [];\r\n  @action\r\n  updateCities = (names: string[]) => {\r\n    this.cities = names;\r\n    if (this.cities.length === 0) {\r\n      this.streets = [];\r\n    }\r\n  }\r\n  @observable\r\n  cityResult: string = \"\";\r\n\r\n  @observable\r\n  streets: string[] = [];\r\n  @action\r\n  updateStreets = (names: string) => {\r\n    this.streets = names.split(',');\r\n  }\r\n  @observable\r\n  roadSegment: string[] = [];\r\n  @action\r\n  updateRoadSegment = (names: string) => {\r\n    this.roadSegment = names.split(',');\r\n  }\r\n  @observable\r\n  roadTypes: IColumnFilter;\r\n  @action\r\n  updateRoadType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.roadTypes, aType, val)\r\n  }\r\n  @computed get isValidWhere() {\r\n    const res = !this.roadTypes.isAllValsFalse;\r\n    return res;\r\n  }\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  //when\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  startYear: number = 2015;\r\n  @action\r\n  setStartYear = (year:string) =>{\r\n    this.startYear = parseInt(year);\r\n  }\r\n  @observable\r\n  endYear: number = 2019;\r\n  @action\r\n  setEndYear = (year:string) =>{\r\n    this.endYear = parseInt(year);\r\n  }\r\n  @observable\r\n  dayNight: IColumnFilter;\r\n  @action\r\n  updateDayNight = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.dayNight, aType, val)\r\n  }\r\n  @computed get isValidWhen() {\r\n    const res = !this.dayNight.isAllValsFalse;\r\n    return res;\r\n  }\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // who\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  genderTypes: IColumnFilter\r\n  @action\r\n  updateGenderType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.genderTypes, aType, val)\r\n  }\r\n  @observable\r\n  ageTypes: IColumnFilter;\r\n  @action\r\n  updateAgeType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.ageTypes, aType, val)\r\n  }\r\n  @observable\r\n  populationTypes: IColumnFilter;\r\n  @action\r\n  updatePopulationType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.populationTypes, aType, val)\r\n  }\r\n\r\n  //injTypes\r\n  @observable\r\n  injTypes: IColumnFilter;\r\n  @action\r\n  updateInjuerdType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.injTypes, aType, val)\r\n  }\r\n  @computed get isValidWho() {\r\n    const res = !this.injTypes.isAllValsFalse && !this.genderTypes.isAllValsFalse && !this.ageTypes.isAllValsFalse && !this.populationTypes.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  @observable\r\n  accidentType: IColumnFilter;\r\n  @action\r\n  updateAccidentType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.accidentType, aType, val)\r\n  }\r\n  @computed get isValidWhat() {\r\n    const res = !this.accidentType.isAllValsFalse;\r\n    return res;\r\n  }\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What Vehicle\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  vehicleType: IColumnFilter;\r\n  @action\r\n  updateVehicleType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.vehicleType, aType, val)\r\n  }\r\n  @computed get isValidWhatVehicle() {\r\n    const res = !this.vehicleType.isAllValsFalse;\r\n    return res;\r\n  }\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What Road\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  @observable\r\n  speedLimit: IColumnFilter;\r\n  updateSpeedLimit = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.speedLimit, aType, val)\r\n  }\r\n\r\n  @observable\r\n  roadWidth: IColumnFilter;\r\n  @action\r\n  updateRoadWidth = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.roadWidth, aType, val)\r\n  }\r\n\r\n  @observable\r\n  separator: IColumnFilter;\r\n  @action\r\n  updateSeparator = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.separator, aType, val)\r\n  }\r\n\r\n  @observable\r\n  oneLane: IColumnFilter;\r\n  @action\r\n  updateOneLane = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.oneLane, aType, val)\r\n  }\r\n  @computed get isValidWhatRoad() {\r\n    const res = !this.speedLimit.isAllValsFalse && !this.roadWidth.isAllValsFalse && !this.separator.isAllValsFalse && !this.oneLane.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // data\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  dataAllInjuries: any[] = []\r\n  @action\r\n  updateAllInjuries = (data: any[]) => {\r\n    //console.log(\"updateAllInjuries \",data.length)\r\n    this.setMarkersLoadStep(2);\r\n    this.dataAllInjuries = data;\r\n    this.rootStore.mapStore.setBounds(data, this.cities);\r\n    if (this.rootStore.mapStore.bboxType === BBoxType.LOCAL_BBOX)\r\n      this.rootStore.mapStore.getMarkersInLocalBBox(0.1)\r\n  }\r\n\r\n  @observable\r\n  dataMarkersLean: any[] = []\r\n  @action\r\n  updateDataMarkersLean = (data: any[]) => {\r\n    //console.log(\"updateDataMarkersLean \",data.length)\r\n    this.setMarkersLoadStep(1);\r\n    this.dataMarkersLean = data;\r\n  }\r\n\r\n\r\n  @observable\r\n  dataByYears: any[] = []\r\n  @observable\r\n  dataFilterdByYears: any[] = []\r\n  @observable\r\n  dataFilterd: any[] = []\r\n  @observable\r\n  dataGroupby2: any[] = []\r\n\r\n  @observable\r\n  isLoading: boolean = false;\r\n\r\n  @computed get isValidAllFilters() {\r\n    const res = this.isValidSeverity && this.isValidWhen && this.isValidWho && this.isValidWhere && this.isValidWhat && this.isValidWhatVehicle && this.isValidWhatRoad;\r\n    return res;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // group by\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  groupBy: GroupBy.default;\r\n  @action\r\n  updateGroupby = (key: string) => {\r\n    this.groupBy = this.groupByDict[key];\r\n    this.submitfilterdGroup(this.groupBy)\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n  }\r\n  @observable\r\n  groupByDict: any = {}\r\n\r\n  @action\r\n  submitGroupByYears = () => {\r\n    let filtermatch = this.getfilterForCityOnly();\r\n    let filter = this.getFilterGroupBy(filtermatch, \"accident_year\");\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined)\r\n          this.dataByYears = data;\r\n      })\r\n  }\r\n  @action\r\n  submitfilterdGroupByYears = () => {\r\n    let filtermatch = this.getFilter(null);\r\n    let filter = this.getFilterGroupBy(filtermatch, \"accident_year\");\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined)\r\n          this.dataFilterdByYears = data;\r\n      })\r\n  }\r\n  @action\r\n  submitfilterdGroup = (aGroupBy: GroupBy.default) => {\r\n    let filtermatch = this.getFilter(null);\r\n    let filter = this.getFilterGroupBy(filtermatch, aGroupBy.value, \"\", aGroupBy.limit);\r\n    //console.log(filter)\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined)\r\n          this.dataFilterd = data;\r\n      })\r\n  }\r\n  @action\r\n  submitfilterdGroup2 = (aGroupBy: GroupBy.default, groupName2: string) => {\r\n    let filtermatch = this.getFilter(null);\r\n    let filter = this.getFilterGroupBy(filtermatch, aGroupBy.value, groupName2, aGroupBy.limit);\r\n    //console.log(filter)\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined && data.length > 0) {\r\n          let fixData = this.groupBy2.fixStrcutTable(data)\r\n          this.dataGroupby2 = fixData;\r\n        }\r\n      })\r\n  }\r\n  @observable\r\n  groupBy2: GroupBy.GroupBy2;\r\n  @action\r\n  updateGroupBy2 = (key: string) => {\r\n    this.groupBy2 = this.group2Dict[key]\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n  }\r\n  @observable\r\n  group2Dict: any = {}\r\n\r\n\r\n  getFilterGroupBy = (filterMatch: string, groupName: string, groupName2: string = \"\", limit: number = 0) => {\r\n    let filter = \"[\"\r\n      + '{\"$match\": ' + filterMatch + '}';\r\n    if (groupName2 === \"\")\r\n      filter += ',{\"$group\": { \"_id\": \"$' + groupName + '\", \"count\": { \"$sum\": 1 }}}';\r\n    else {\r\n      filter += ', { \"$match\" : { \"' + groupName2 + '\" : { \"$exists\" : true, \"$ne\" : null}}}'\r\n      let grpids = '{ \"grp1\": \"$' + groupName + '\", \"grp2\": \"$' + groupName2 + '\"}'\r\n      filter += ',{\"$group\": { \"_id\":' + grpids + ', \"count\": { \"$sum\": 1 }}}';\r\n      filter += ',{\"$group\": { \"_id\": \"$_id.grp1\" , \"count\": { \"$push\": {\"grp2\" : \"$_id.grp2\",\"count\" : \"$count\" } }}}';\r\n    }\r\n    if (limit === 0)\r\n      filter += ',{\"$sort\": {\"_id\": 1}}'\r\n    else {\r\n      filter += ',{\"$sort\": {\"count\": -1}}'\r\n        + ',{\"$limit\": ' + limit + '}'\r\n    }\r\n    filter += ']'\r\n    return filter;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // filters actions\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  isUse2StepsMarkers: boolean = false;\r\n  @observable\r\n  markersLoadStep: number = 1;\r\n  @action\r\n  setMarkersLoadStep = (step: number) => {\r\n    if (this.isUse2StepsMarkers)\r\n      this.markersLoadStep = step;\r\n  }\r\n\r\n  @action\r\n  submitFilter = () => {\r\n    //this.setMarkersLoadStep(0);\r\n    if (this.useLocalDb === 2) {\r\n      this.submitMainDataFilterLocalDb();\r\n    }\r\n    else {\r\n      if (this.rootStore.mapStore.bboxType === BBoxType.SERVER_BBOX)\r\n        this.rootStore.mapStore.submintGetMarkersBBox();\r\n      if (this.isUse2StepsMarkers)\r\n        this.submintGetMarkerFirstStep();\r\n      this.submintMainDataFilter();\r\n    }\r\n    this.submitCityNameAndLocation();\r\n    this.submitGroupByYears();\r\n    this.submitfilterdGroupByYears();\r\n    this.submitfilterdGroup(this.groupBy);\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n  }\r\n\r\n  submintMainDataFilter = () => {\r\n    this.isLoading = true;\r\n    let filter = this.getFilter(null);\r\n    this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n    //console.log(filter)\r\n    fetchFilter(filter, \"main\")\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateAllInjuries(data);\r\n          //write Data to local db\r\n          if (this.useLocalDb === 1)\r\n            insertToDexie(data);\r\n        }\r\n        this.isLoading = false;\r\n      })\r\n  }\r\n  submintGetMarkerFirstStep = () => {\r\n    let filter = this.getFilter(null)\r\n    fetchFilter(filter, 'latlon')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateDataMarkersLean(data);\r\n        }\r\n      })\r\n  }\r\n\r\n  submitCityNameAndLocation = () => {\r\n    if (this.cities.length >= 1) {\r\n      let city = this.cities[0];\r\n      var srvCity = new CityService();\r\n      srvCity.getCityByNameHe(city, this.rootStore.mapStore.updateMapCenterByCity);\r\n      this.cityResult = this.cities[0];\r\n    }\r\n    else\r\n      this.cityResult = \"\";\r\n  }\r\n\r\n  getFilter = (bounds: any, useBounds: boolean = false) => {\r\n    let filter = `{\"$and\" : [`\r\n    filter += `{\"accident_year\":  { \"$gte\" : \"${this.startYear}\",\"$lte\": \"${this.endYear}\"}}`;\r\n    filter += this.getMultiplefilter(this.injurySeverity)\r\n    filter += this.getfilterCity();\r\n    if (useBounds && bounds != null)\r\n      filter += this.getfilterBounds(bounds);\r\n    filter += this.getMultiplefilter(this.dayNight);\r\n    filter += this.getFilterStreets();\r\n    filter += this.getFilterFromArray(this.roadSegment, \"road_segment_name\");\r\n    filter += this.getMultiplefilter(this.injTypes)\r\n    filter += this.getMultiplefilter(this.genderTypes)\r\n    filter += this.getMultiplefilter(this.ageTypes)\r\n    filter += this.getMultiplefilter(this.populationTypes)\r\n    filter += this.getMultiplefilter(this.accidentType);\r\n    filter += this.getMultiplefilter(this.vehicleType);\r\n    filter += this.getMultiplefilter(this.roadTypes);\r\n    filter += this.getMultiplefilter(this.speedLimit);\r\n    filter += this.getMultiplefilter(this.roadWidth);\r\n    filter += this.getMultiplefilter(this.separator);\r\n    filter += this.getMultiplefilter(this.oneLane);\r\n    filter += `]}`\r\n    return filter;\r\n  }\r\n\r\n  @action\r\n  updateFilters = (colFilter: IColumnFilter, aType: number, val: boolean) => {\r\n    if (colFilter.allTypesOption === -1)\r\n      colFilter.arrTypes[aType].checked = val;\r\n    else {\r\n      if (aType === colFilter.allTypesOption) {\r\n        colFilter.arrTypes.forEach((x, index) => {\r\n          return x.checked = (index === colFilter.allTypesOption) ? val : !val;\r\n        })\r\n      }\r\n      else {\r\n        colFilter.arrTypes[colFilter.allTypesOption].checked = false;\r\n        colFilter.arrTypes[aType].checked = val;\r\n      }\r\n    }\r\n  }\r\n  getfilterBounds = (mapBounds: L.LatLngBounds) => {\r\n    let filter: string = '';\r\n    filter += `,{\"latitude\":  { \"$gte\" : \"${mapBounds.getSouth()}\",\"$lte\": \"${mapBounds.getNorth()}\"}}`;\r\n    filter += `,{\"longitude\":  { \"$gte\" : \"${mapBounds.getWest()}\",\"$lte\": \"${mapBounds.getEast()}\"}}`;\r\n    return filter;\r\n  }\r\n  getfilterForCityOnly = () => {\r\n    let filter = `{\"$and\" : [`\r\n    filter += `{\"accident_year\":{\"$gte\":\"2015\"}}`;\r\n    filter += this.getfilterCity();\r\n    filter += `]}`\r\n    return filter;\r\n  }\r\n  getfilterCity = () => {\r\n    let filter: string = '';\r\n    if (this.cities.length > 0) {\r\n      filter += `,{\"$or\": [`\r\n      filter += this.cities.map((x: string) => `{\"accident_yishuv_name\" : \"${x}\"}`).join(',')\r\n      filter += `]}`\r\n    }\r\n    return filter;\r\n  }\r\n  getFilterStreets = () => {\r\n    let filter: string = '';\r\n    if (this.streets.length > 0 && this.streets[0] !== \"\") {\r\n      filter += `,{\"$or\": [`\r\n      filter += this.streets.map((x: string) => `{\"street1_hebrew\" : \"${x.trim()}\"}`).join(',')\r\n      filter += `,`\r\n      filter += this.streets.map((x: string) => `{\"street2_hebrew\" : \"${x.trim()}\"}`).join(',')\r\n      filter += `]}`\r\n    }\r\n    return filter;\r\n  }\r\n  getFilterFromArray = (arr: string[], filterName: string) => {\r\n    let filter: string = '';\r\n    if (arr.length > 0 && arr[0] !== \"\") {\r\n      filter += `,{\"$or\": [`\r\n      filter += arr.map((x: string) => `{\"${filterName}\" : \"${x.trim()}\"}`).join(',')\r\n      filter += `]}`\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  getMultiplefilter = (colFilter: IColumnFilter) => {\r\n    let filter: string = '';\r\n    let allChecked: boolean = true;\r\n    let arrfilter: string[] = [];\r\n    if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked)\r\n      allChecked = true;\r\n    else {\r\n      //in case there is allTypesOption , it want be copied to arrfilter\r\n      //as it is not checked\r\n      const iterator = colFilter.arrTypes.values();\r\n      for (const filterCheck of iterator) {\r\n        if (filterCheck.checked) {\r\n          arrfilter = [...arrfilter, ...filterCheck.filters]\r\n        }\r\n        else {\r\n          allChecked = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (allChecked)\r\n      filter = '';\r\n    else {\r\n      filter += `,{\"$or\": [`\r\n      filter += arrfilter.map((x: string) => {\r\n        if (x === \"null\")\r\n          return `{\"${colFilter.dbColName}\":` + null + '}'\r\n        else {\r\n          let xSafe = x.replace('\"', '\\\\\"')\r\n          return `{\"${colFilter.dbColName}\" : \"${xSafe}\"}`\r\n        }\r\n\r\n      }\r\n      ).join(',')\r\n      filter += `]}`\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  // local db filters - idb using Dexie.js\r\n  ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  useLocalDb = 0;\r\n\r\n  submitMainDataFilterLocalDb = () => {\r\n    this.isLoading = true;\r\n    let arrFilters = this.getFilterIDB();\r\n    this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n    console.log(arrFilters)\r\n    getFromDexie(arrFilters)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateAllInjuries(data);\r\n        }\r\n        this.isLoading = false;\r\n      })\r\n  }\r\n  submintGetMarkersBBoxIdb = (mapBounds: L.LatLngBounds) => {\r\n    let arrFilters = this.getFilterBboxIDB(mapBounds)\r\n    getFromDexie(arrFilters)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.rootStore.mapStore.updateDataMarkersInBounds(data);\r\n        }\r\n      })\r\n  }\r\n\r\n  getFilterIDB = () => {\r\n    let arrFilters: any[] = []\r\n    let years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() }\r\n    arrFilters.push(years)\r\n    this.getfilterCityIDB(arrFilters);\r\n    this.getFilterStreetsIDB(arrFilters);\r\n    this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n    this.getFilterFromArrayIDb(arrFilters, \"road_segment_name\", this.roadSegment)\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.genderTypes)\r\n    this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n    this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n    this.getMultiplefilterIDB(arrFilters, this.separator);\r\n    this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n    return arrFilters;\r\n  }\r\n  getFilterBboxIDB = (bounds: L.LatLngBounds) => {\r\n    let arrFilters: any[] = []\r\n    let bbox = { filterName: 'bbox', p1: bounds.getSouthWest, p2: bounds.getNorthEast }\r\n    arrFilters.push(bbox)\r\n    let years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() }\r\n    arrFilters.push(years)\r\n    this.getfilterCityIDB(arrFilters);\r\n    this.getFilterStreetsIDB(arrFilters);\r\n    this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n    this.getFilterFromArrayIDb(arrFilters, \"road_segment_name\", this.roadSegment)\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.genderTypes)\r\n    this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n    this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n    this.getMultiplefilterIDB(arrFilters, this.separator);\r\n    this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n    return arrFilters;\r\n  }\r\n\r\n  getMultiplefilterIDB = (arrFilters: any[], colFilter: IColumnFilter) => {\r\n    if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) //all\r\n      return;\r\n    let allChecked: boolean = true;\r\n    let arrfilter: string[] = [];\r\n    const iterator = colFilter.arrTypes.values();\r\n    for (const filterCheck of iterator) {\r\n      if (filterCheck.checked) {\r\n        arrfilter = [...arrfilter, ...filterCheck.filters]\r\n      }\r\n      else {\r\n        allChecked = false;\r\n      }\r\n    }\r\n    if (!allChecked) {\r\n      let filterVals = arrfilter.map((x: string) => {\r\n        if (x === \"null\")\r\n          return null;\r\n        return x;\r\n      })\r\n      let filter = { filterName: colFilter.dbColName, values: filterVals }\r\n      arrFilters.push(filter)\r\n    }\r\n  }\r\n\r\n  getfilterCityIDB = (arrFilters: any[]) => {\r\n    if (this.cities.length > 0) {\r\n      let filter = { filterName: \"accident_yishuv_name\", values: this.cities }\r\n      arrFilters.push(filter)\r\n    }\r\n  }\r\n  getFilterStreetsIDB = (arrFilters: any[]) => {\r\n    if (this.streets.length > 0 && this.streets[0] !== \"\") {\r\n      const filter1 = { filterName: \"street1_hebrew\", values: this.streets.map((x: string) => { return x.trim() }) }\r\n      arrFilters.push(filter1)\r\n      //const filter2 = { filterName: \"street2_hebrew\", values: this.streets.map((x: string) => {x.trim()}) } \r\n      //arrFilters.push(filter2)\r\n    }\r\n  }\r\n  getFilterFromArrayIDb = (arrFilters: any[], filterName: string, arr: string[]) => {\r\n    if (arr.length > 0 && arr[0] !== \"\") {\r\n      let filter = { filterName: filterName, values: arr.map((x: string) => { return x.trim() }) }\r\n      arrFilters.push(filter)\r\n    }\r\n  }\r\n}\r\n\r\n// autorun(() =>{\r\n//     console.log(store.todos[0])\r\n//     console.log(store.filter)\r\n// })\r\n\r\n//export default store","import { observable, action, reaction } from \"mobx\"\r\nimport i18n from \"../i18n\";\r\nimport RootStore from \"./RootStore\";\r\n//import autorun  from \"mobx\"\r\n\r\nexport default class UiStore {\r\n  appInitialized = false\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore\r\n    this.initLang();\r\n    this.appInitialized = false;\r\n  }\r\n  rootStore: RootStore;\r\n  \r\n  //////////////////////////////////////////////\r\n  @observable\r\n  language: string = \"he\"\r\n  @action\r\n  updateLanguage = (lang: string) => {\r\n    this.language = lang;\r\n    localStorage.setItem(\"lang\", JSON.stringify(lang))\r\n  }\r\n  reactionChangeLang = reaction(\r\n    () => this.language,\r\n    locale => {\r\n      i18n.changeLanguage(locale);\r\n    }\r\n  )\r\n  initLang = () =>{\r\n    try {\r\n      const slang = localStorage.getItem(\"lang\")\r\n      if (slang !== null){\r\n        const lang = JSON.parse(slang);\r\n        this.updateLanguage(lang)\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n}","// https://mobx-react.js.org/recipes-context\r\nimport React from 'react'\r\nimport RootStore from './RootStore';\r\n\r\nexport const store = new RootStore();\r\nexport const StoreContext = React.createContext(store);\r\nexport const useStore = (): RootStore => {\r\n  const store = React.useContext(StoreContext);\r\n  if (!store) {\r\n    // this is especially useful in TypeScript so you don't need to be checking for null all the time\r\n    throw new Error('You have forgot to use StoreProvider, shame on you.')\r\n  }\r\n  return store\r\n};\r\n\r\n/* // see: https://facebook.github.io/create-react-app/docs/adding-custom-environment-variables\r\nif(process.env.NODE_ENV !== 'production') {\r\n  // @ts-ignore\r\n  window['store'] = store;\r\n} */","import FilterStore from './FilterStore';\r\nimport UiStore from './UiStore'\r\nimport MapStore from './MapStore'\r\n\r\nexport default class RootStore {\r\n    appInitialized = false;\r\n    constructor() {\r\n        this.uiStore = new UiStore(this)\r\n        this.mapStore = new MapStore(this)\r\n        this.filterStore = new FilterStore(this)\r\n    }\r\n    uiStore: UiStore;\r\n    mapStore: MapStore;\r\n    filterStore: FilterStore;\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAOUlEQVR4Ae3WgQUAMAwEwI6WzTL6txsEiOKOB+CJJweAQZLOnj4ThWBh9vXSSymzH/TnJwPvh0IAXORfNuG7KzwXAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","//import * as $ from 'jquery';\r\n///////\r\nexport default class AccidentService {\r\n  //get request using jsonp\r\n\r\n}\r\n// export const getAll = (collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident\",\r\n//     \"method\": \"GET\",\r\n//     \"headers\": {}\r\n//   }\r\n//   $.ajax(settings).done(function (response: any) {\r\n//     //console.log(response)\r\n//     collback(response);\r\n//   });\r\n// }\r\n\r\n// //send request using jsonp and post body - return arry of points\r\n// export const postGroupby = (filter: string, collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident/agg\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident/agg\",\r\n//     \"method\": \"POST\",\r\n//     \"headers\": {\r\n//       \"content-type\": \"application/json\"\r\n//     },\r\n//     \"processData\": false,\r\n//     \"data\": filter\r\n//   }\r\n//   $.ajax(settings).done(function (response: any[]) {\r\n//     collback(response);\r\n//   });\r\n// }\r\n// //send request using jsonp and post body - return arry of points\r\n// export const postFilter = (filter: string, collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident\",\r\n//     \"method\": \"POST\",\r\n//     \"headers\": {\r\n//       \"content-type\": \"application/json\"\r\n//     },\r\n//     \"processData\": false,\r\n//     \"data\": filter\r\n//   }\r\n\r\n//   $.ajax(settings).done(function (response: any[]) {\r\n//     collback(response);\r\n//   });\r\n// }\r\nexport const fetchFilter = async (filter: string, type: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = \"/api/v1/accident/\" + type;\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return await response.json(); // parses JSON response into native JavaScript objects\r\n}\r\n\r\n\r\nexport const fetchGroupBy = async (filter: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = \"/api/v1/accident/agg\"\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return await response.json(); // parses JSON response into native JavaScript objects\r\n}\r\n\r\n\r\n","\r\nimport React from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport Form from 'react-bootstrap/Form';\r\n// @ts-ignore\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { useStore } from '../../stores/storeConfig'\r\nimport citisNamesHeb from \"../../assets/cities_names_heb.json\";\r\n\r\ninterface IProps {\r\n    isMultiple?: boolean\r\n}\r\nexport const CitySelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n    const { filterStore } = useStore();\r\n    const { t } = useTranslation();\r\n    return (\r\n        <Form.Group controlId=\"exampleForm.ControlCity\">\r\n            <Form.Label className=\"filterLable\">{t('City')}:</Form.Label>\r\n            <Typeahead\r\n                id=\"typeaheadCity\"\r\n                //defaultSelected={[store.city]}\r\n                onChange={(selected: string[]) => {\r\n                    filterStore.updateCities(selected);\r\n                }}\r\n                options={citisNamesHeb}\r\n                multiple={isMultiple}\r\n                selected={filterStore.cities}\r\n            />\r\n        </Form.Group>\r\n    )\r\n})","\r\nimport React, { ChangeEvent } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig'\r\n\r\ninterface IProps {\r\n    isMultiple?: boolean\r\n}\r\nexport const StreetSelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n    const { filterStore } = useStore();\r\n    const { t } = useTranslation();\r\n    if (filterStore.cities.length > 0) {\r\n        return (\r\n            <Form.Group controlId=\"exampleForm.ControlStreet\">\r\n                <Form.Label className=\"filterLable\">{t('Street')}:</Form.Label>\r\n                <Form.Control type=\"input\" placeholder=\"\" value={filterStore.streets.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { filterStore.updateStreets(e.target.value); }} />\r\n            </Form.Group>\r\n\r\n        )\r\n    }\r\n    else return null;\r\n})","\r\nimport React, { ChangeEvent } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig'\r\n\r\ninterface IProps {\r\n    isMultiple?: boolean\r\n}\r\nexport const RoadSegmentSelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n    const { t } = useTranslation();\r\n    const { filterStore } = useStore();\r\n    const { cities, roadSegment, updateRoadSegment } = filterStore;\r\n    if (cities.length === 0) {\r\n        return (\r\n            <Form.Group controlId=\"exampleForm.ControlRoadSegment\">\r\n                <Form.Label className=\"filterLable\">{t('RoadSegment')}:</Form.Label>\r\n                <Form.Control type=\"input\" placeholder=\"\" value={roadSegment.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { updateRoadSegment(e.target.value); }} />\r\n            </Form.Group>\r\n\r\n        )\r\n    }\r\n    else return null;\r\n})","\r\nimport React,{ ChangeEvent} from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\ninterface IProps {\r\n    label: string,\r\n    group: string,\r\n    id:number,\r\n    checked: boolean,\r\n    onChange: (e: ChangeEvent<HTMLInputElement>) => any\r\n  }\r\nexport const Checkbox: React.FC<IProps> = ({group,label,id,checked,onChange}) => {\r\n    const { t } = useTranslation();\r\n    return (\r\n        <Form.Check inline label={t(label)} type={'checkbox'} id={`cbox`+group+id} checked={checked} onChange={onChange} />\r\n    )\r\n}","\r\nimport React, { ChangeEvent } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport Form from 'react-bootstrap/Form';\r\nimport { Checkbox } from '../atoms/Checkbox';\r\nimport { IColumnFilter } from '../../stores/FilterChecker'\r\n\r\ninterface IProps {\r\n  formName: string,\r\n  colFilter : IColumnFilter,\r\n  onChange: (aType: number, val: boolean) => void\r\n}\r\n\r\nexport const GroupCheckbox: React.FC<IProps> = observer(({ formName, colFilter ,onChange}) => {\r\n  const styleFeedback = {\r\n    marginTop: '.25rem',\r\n    fontSize: '80%',\r\n    color: '#dc3545'\r\n  };\r\n  const { t } = useTranslation();\r\n  const {isAllValsFalse, name, arrTypes} = colFilter;\r\n  const onGroupChange = (aType: number, checked: boolean) => {\r\n    //checkValid(checked)\r\n    onChange(aType, checked);\r\n  }\r\n  const feedback = <div style={styleFeedback}> {t('check_one_checkbox')}</div>\r\n  const isvalid = (isAllValsFalse) ? feedback : null;\r\n\r\n  return (\r\n    <Form.Group controlId={formName + \".Control\" + name} >\r\n      <Form.Label className=\"filterLable\">{t(name)}:</Form.Label>\r\n      {arrTypes.map((fChecker, index) => (\r\n        <Checkbox key={index} label={fChecker.label} group={colFilter.name} id={index} checked={fChecker.checked} onChange={(e: ChangeEvent<HTMLInputElement>) => { onGroupChange(index, e.target.checked); }} />\r\n      ))}\r\n      {isvalid}\r\n    </Form.Group>\r\n  )\r\n})\r\n\r\n","import React, { ChangeEvent } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col'\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Card from 'react-bootstrap/Card';\r\n// @ts-ignore\r\nimport { CitySelector } from '../molecules/CitySelector';\r\nimport { StreetSelector } from '../molecules/StreetSelector'\r\nimport { RoadSegmentSelector } from '../molecules/RoadSegmentSelector'\r\nimport { GroupCheckbox } from '../molecules/GroupCheckBox';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n  activeCardKey: number\r\n}\r\nconst STYLE_TOGGLE_WARNING = {\r\n  color: '#dc3545'\r\n};\r\nconst STYLE_TOGGLE_NORMAL = {\r\n  color: '#007bff'\r\n};\r\n\r\nexport const FilterRequest: React.FC<IProps> = observer(({ activeCardKey = 0 }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { injurySeverity, updateInjurySeverity, isLoading, isValidAllFilters } = filterStore;\r\n  return (\r\n    <Form>\r\n      <Accordion defaultActiveKey={activeCardKey.toString()}>\r\n        <CardFilterWhen />\r\n        <CardFilterWhere />\r\n        <CardFilterWho />\r\n        <CardFilterWhat />\r\n        <CardFilterWhatVehicle />\r\n        <CardFilterWhatRoad />\r\n      </Accordion>\r\n      <GroupCheckbox formName=\"exampleForm\" colFilter={injurySeverity} onChange={updateInjurySeverity} />\r\n      <Button variant=\"primary\"\r\n        disabled={isLoading || !isValidAllFilters}\r\n        onClick={() => { filterStore.submitFilter(); }} >{isLoading ? t('Loading…') : t('Submit')} </Button>\r\n    </Form>\r\n  );\r\n})\r\n\r\nconst CardFilterWhen = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  let { isValidWhen, startYear, setStartYear, endYear, setEndYear, dayNight, updateDayNight } = filterStore;\r\n  const styleToggle = isValidWhen ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"0\" style={styleToggle}>\r\n          {t('When')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"0\" className=\"filterControls\">\r\n        <Card.Body>\r\n          <div>\r\n            <Form.Row>\r\n              <Form.Group as={Col} controlId=\"exampleForm.ControlSelectStartYear\">\r\n                <Form.Label className=\"filterLable\"> {t('FromYear')}:</Form.Label>\r\n                <Form.Control as=\"select\" defaultValue={startYear} onChange={(e: ChangeEvent<HTMLInputElement>) => { setStartYear(e.target.value); }}>\r\n                  <option>2015</option>\r\n                  <option>2016</option>\r\n                  <option>2017</option>\r\n                  <option>2018</option>\r\n                  <option>2019</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group as={Col} controlId=\"exampleForm.ControlSelectEndYear\">\r\n                <Form.Label className=\"filterLable\"> {t('ToYear')}:</Form.Label>\r\n                <Form.Control as=\"select\" defaultValue={endYear} onChange={(e: ChangeEvent<HTMLInputElement>) => { setEndYear(e.target.value); }}>\r\n                  <option>2015</option>\r\n                  <option>2016</option>\r\n                  <option>2017</option>\r\n                  <option>2018</option>\r\n                  <option>2019</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n            </Form.Row>\r\n            <GroupCheckbox formName=\"exampleForm\" colFilter={dayNight} onChange={updateDayNight} />\r\n          </div>\r\n        </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n})\r\nconst CardFilterWhere = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhere, roadTypes, updateRoadType, isMultipleCities } = filterStore;\r\n  const styleToggle = isValidWhere ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"1\" style={styleToggle}>\r\n          {t('Where')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"1\" className=\"filterControls\">\r\n        <div>\r\n          <CitySelector isMultiple={isMultipleCities} />\r\n          <StreetSelector />\r\n          <RoadSegmentSelector />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={roadTypes} onChange={updateRoadType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n})\r\nconst CardFilterWho = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWho, injTypes, updateInjuerdType, genderTypes, updateGenderType } = filterStore;\r\n  const { ageTypes, updateAgeType, populationTypes, updatePopulationType } = filterStore;\r\n  const styleToggle = isValidWho ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"2\" style={styleToggle} >\r\n          {t('Who')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"2\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={injTypes} onChange={updateInjuerdType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={genderTypes} onChange={updateGenderType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={ageTypes} onChange={updateAgeType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={populationTypes} onChange={updatePopulationType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n})\r\nconst CardFilterWhat = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhat, accidentType, updateAccidentType } = filterStore;\r\n  const styleToggle = isValidWhat ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"3\" style={styleToggle}>\r\n          {t('What')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"3\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={accidentType} onChange={updateAccidentType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n})\r\n\r\nconst CardFilterWhatVehicle = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhatVehicle, vehicleType, updateVehicleType } = filterStore;\r\n  const styleToggle = isValidWhatVehicle ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"4\" style={styleToggle}>\r\n          {t('WhatVehicle')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"4\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={vehicleType} onChange={updateVehicleType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n})\r\n\r\nconst CardFilterWhatRoad = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhatRoad } = filterStore;\r\n  const { speedLimit, updateSpeedLimit, roadWidth, updateRoadWidth } = filterStore;\r\n  const { separator, updateSeparator, oneLane, updateOneLane } = filterStore;\r\n  const styleToggle = isValidWhatRoad ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"5\" style={styleToggle}>\r\n          {t('WhatRoad')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"5\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={speedLimit} onChange={updateSpeedLimit} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={roadWidth} onChange={updateRoadWidth} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={separator} onChange={updateSeparator} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={oneLane} onChange={updateOneLane} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n})","import React, { useState } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Collapse from 'react-bootstrap/Collapse';\r\nimport { FilterRequest } from './FilterRequest';\r\n\r\ninterface IProps {\r\n    activeCardKey?:number \r\n  }\r\n\r\nexport const FilterPanel:React.FC<IProps>=  ({activeCardKey=0}) => {\r\n    const [open, setOpen] = useState(true);\r\n    const { t } = useTranslation();\r\n    return (\r\n        <>\r\n            <Button onClick={() => { setOpen(!open); }} aria-controls=\"example-collapse-text\" aria-expanded={open}>\r\n             {t('Filter Options')} \r\n            </Button>\r\n            <Collapse in={open}>\r\n                <div id=\"example-collapse-text\">\r\n                    <FilterRequest activeCardKey={activeCardKey}/>\r\n                </div>\r\n            </Collapse>\r\n        </>\r\n    );\r\n}\r\n\r\n","import React from 'react'\r\n\r\ninterface IProps {\r\n}\r\ninterface IState {\r\n  hasError: boolean;\r\n}\r\nexport class ErrorBoundary extends React.Component<IProps, IState>  {\r\n    constructor(props:IProps) {\r\n      super(props);\r\n      this.state = { hasError: false };\r\n    }\r\n  \r\n    static getDerivedStateFromError(error:any) {\r\n      // Update state so the next render will show the fallback UI.\r\n      return { hasError: true };\r\n    }\r\n  \r\n    componentDidCatch(error:any, errorInfo:any) {\r\n      // You can also log the error to an error reporting service\r\n      //logErrorToMyService(error: TypeError, errorInfo);\r\n      console.error(error);\r\n    }\r\n  \r\n    render() {\r\n      if (this.state.hasError) {\r\n        // You can render any custom fallback UI\r\n        return <h1>Something went wrong.</h1>;\r\n      }\r\n      return this.props.children; \r\n    }\r\n  }","import React, { useState, FunctionComponent, lazy, Suspense } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport Tabs from 'react-bootstrap/Tabs'\r\nimport Tab from 'react-bootstrap/Tab'\r\nimport { ErrorBoundary } from '../atoms/ErrorBoundary'\r\n//import MapAccidents from '../organisms/MapAccidents'\r\n//import AccidentsTable from '../organisms/AccidentsTable'\r\n//import GroupByGraphsPanel from '../organisms/GroupByGraphsPanel'\r\n//import { GroupByTablesPanel } from '../organisms/GroupByTablesPanel'\r\nimport { useStore } from '../../stores/storeConfig'\r\n\r\ninterface IProps {\r\n    defaultKey?: string\r\n}\r\n\r\nconst GroupByGraphsPanel = lazy(() => import('../organisms/GroupByGraphsPanel'));\r\nconst GroupByTablesPanel = lazy(() => import('../organisms/GroupByTablesPanel')); \r\nconst MapAccidents = lazy(() => import('../organisms/MapAccidents'));\r\nconst AccidentsTable = lazy(() => import('../organisms/AccidentsTable'));\r\nexport const TabsTemplate: FunctionComponent<IProps> = observer(({ defaultKey = \"charts\" }) => {\r\n    const style = {\r\n        marginTop: \"20px\"\r\n    }\r\n    const { t } = useTranslation();\r\n    const [activeKey] = useState(defaultKey);\r\n    const { mapStore } = useStore();\r\n    return (\r\n        <Tabs mountOnEnter={true} defaultActiveKey={activeKey} id=\"main-tabs\"\r\n            onSelect={(activeKey: any) => {\r\n                if (activeKey === \"map\") {\r\n                    //map is renderd only when tab is shown to prevent leaflet bug\r\n                    mapStore.isReadyToRenderMap = true;\r\n                }\r\n                else\r\n                    mapStore.isReadyToRenderMap = false;\r\n            }}\r\n        >\r\n            <Tab style={style} eventKey=\"charts\" title={t(\"Charts\")}>\r\n                <ErrorBoundary>\r\n                    <Suspense fallback={<div>Loading Charts...</div>}>\r\n                        <GroupByGraphsPanel />\r\n                    </Suspense>\r\n                </ErrorBoundary>\r\n            </Tab>\r\n            <Tab style={style} eventKey=\"grouptables\" title={t(\"Groups\")}>\r\n                <ErrorBoundary>\r\n                    <Suspense fallback={<div>Loading Groups tables...</div>}>\r\n                        <GroupByTablesPanel />\r\n                    </Suspense>\r\n                </ErrorBoundary>\r\n            </Tab>\r\n            <Tab style={style} eventKey=\"map\" title={t(\"Map\")}>\r\n                <ErrorBoundary>\r\n                    <Suspense fallback={<div>Loading Map...</div>}>\r\n                        <MapAccidents />\r\n                    </Suspense>\r\n                </ErrorBoundary>\r\n            </Tab>\r\n            <Tab style={style} eventKey=\"table\" title={t(\"Table\")}>\r\n                <ErrorBoundary>\r\n                    <Suspense fallback={<div>Loading Accidents Table...</div>}>\r\n                        <div className=\"col-auto\"><AccidentsTable /></div>\r\n                    </Suspense>\r\n                </ErrorBoundary>\r\n            </Tab>\r\n        </Tabs>\r\n    )\r\n})\r\nexport default TabsTemplate ","import React from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport { FilterPanel } from '../organisms/FilterPanel'\r\nimport  TabsTemplate  from './TabsTemplate'\r\nimport { useStore } from '../../stores/storeConfig'\r\n\r\ninterface IProps { }\r\nexport const HomeTemplate: React.FC<IProps> = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { mapStore, filterStore } = useStore();\r\n  filterStore.isMultipleCities = true;\r\n  mapStore.isReadyToRenderMap = false;\r\n  filterStore.updateCities([]);\r\n  //mapStore.initBounds();\r\n  filterStore.submitFilter();\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row \">\r\n          <div className=\"p-2 col-md-2\"><FilterPanel /></div>\r\n          <main className=\"col-md-10\">\r\n            <h4>{t(\"Israel\")}</h4>\r\n            <TabsTemplate />\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})","import React from 'react'\r\nimport { HomeTemplate } from '../templates/HomeTemplate'\r\n\r\ninterface IProps { }\r\n\r\nexport const HomePage: React.FC<IProps> = () => {\r\n  return (\r\n    <HomeTemplate />\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\n//import { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport { TabsTemplate } from './TabsTemplate'\r\nimport { FilterPanel } from '../organisms/FilterPanel'\r\nimport { useStore } from '../../stores/storeConfig'\r\nimport citisNamesHeb from \"../../assets/cities_names_heb.json\";\r\n\r\ninterface IProps { }\r\nexport const CityTemplate: React.FC<IProps> = observer(() => {\r\n  //const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  filterStore.isMultipleCities = false;\r\n  const { cityResult } = filterStore;\r\n  if (cityResult === \"\") {\r\n    let cityName = useCityNamefromQuery();\r\n    filterStore.updateCities(cityName);\r\n    filterStore.submitFilter();\r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row \">\r\n          <div className=\"p-2 col-md-2\"><FilterPanel activeCardKey={1} /></div>\r\n          <main className=\"col-md-10\">\r\n            <h4>{cityResult}</h4>\r\n            <TabsTemplate defaultKey=\"map\" />\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\n//get city name by query by url\r\nfunction useCityNamefromQuery() {\r\n  let query = useQuery();\r\n  let res = [\"תל אביב -יפו\"];\r\n  let name = query.get(\"name\")\r\n  let found = false;\r\n  if (name !== null)\r\n    found = citisNamesHeb.includes(name);\r\n  if (found) {\r\n    res = [citisNamesHeb.find(element => element === name!)!];\r\n  }\r\n  return res;\r\n}\r\n// A custom hook that builds on useLocation to parse\r\n// the query string for you.\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}","import React from 'react'\r\nimport { CityTemplate } from '../templates/CityTemplate'\r\n\r\ninterface IProps { }\r\n\r\nexport const CityPage: React.FC<IProps> = () => {\r\n  return (\r\n    <CityTemplate />\r\n  )\r\n}\r\n","import React, { MouseEvent } from 'react'\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport ToggleButton from 'react-bootstrap/ToggleButton';\r\nimport { observer } from \"mobx-react\"\r\nimport { useStore } from '../../stores/storeConfig'\r\n\r\nexport const LanguageSelector = observer(() => {\r\n  const { uiStore } = useStore();\r\n  const style: any = document.getElementById('style-direction')\r\n  if (style !== null) {\r\n    if (uiStore.language === 'he') {\r\n      style.href = './bootstrap.rtl.min.css';\r\n      //changeLanguage('he')\r\n      document.body.classList.remove('dir-ltr');\r\n      document.body.classList.add('dir-rtl');\r\n    }\r\n    else {\r\n      style.href = './bootstrap.min.css';\r\n      //changeLanguage('en')\r\n      document.body.classList.remove('dir-rtl');\r\n      document.body.classList.add('dir-ltr');\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <ButtonGroup toggle size=\"sm\" className=\"languageSelector\">\r\n        <ToggleButton type=\"radio\" name=\"radiolang\" value=\"he\" defaultChecked onClick={(e: MouseEvent) => { uiStore.updateLanguage('he'); }}>\r\n          Heb\r\n    </ToggleButton>\r\n        <ToggleButton type=\"radio\" name=\"radiolang\" value=\"en\" onClick={(e: MouseEvent) => { uiStore.updateLanguage('en'); }}>\r\n          Eng\r\n    </ToggleButton>\r\n      </ButtonGroup>\r\n    </div>\r\n  );\r\n})","import React from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from \"mobx-react\"\r\nimport { Link } from 'react-router-dom';\r\n//import Button from 'react-bootstrap/Button';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport menuIcon from '../../assets/menu_white.png';\r\nimport { useStore } from '../../stores/storeConfig'\r\n\r\ninterface IProps {\r\n}\r\nconst ButtonMenu: React.FC<IProps> = observer((() => {\r\n    const styleButton = {\r\n        backgroundColor: '#007bff'\r\n    }\r\n    const styleLink = {\r\n        color: '#004ba0'\r\n    }\r\n    const { t } = useTranslation();\r\n    const { uiStore } = useStore();\r\n    const alignRight = (uiStore.language === 'he') ? true : false;\r\n    return (\r\n        <div >\r\n            {/* <Button variant=\"primary\" size=\"sm\" onClick={() => { }}>\r\n                <img src={menuIcon} alt=\"menu\" height=\"25\" width=\"25\" />\r\n            </Button> */}\r\n            <Dropdown>\r\n                <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={styleButton}>\r\n                    <img src={menuIcon} alt=\"menu\" height=\"25\" width=\"25\" />\r\n                </Dropdown.Toggle>\r\n                <Dropdown.Menu alignRight={alignRight}>\r\n                    <Dropdown.Item as=\"button\" ><Link style={styleLink} to=\"/\">{t('Home')}</Link></Dropdown.Item>\r\n                    <Dropdown.Item as=\"button\" ><Link style={styleLink} to=\"/city\">{t('Cities')}</Link></Dropdown.Item>\r\n                    <Dropdown.Item as=\"button\" ><Link style={styleLink} to=\"/about\">{t('About')}</Link></Dropdown.Item>\r\n                </Dropdown.Menu>\r\n            </Dropdown>\r\n        </div>\r\n    )\r\n\r\n}))\r\nexport default ButtonMenu;","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { LanguageSelector } from '../molecules/LanguageSelector';\r\nimport { Link } from 'react-router-dom';\r\nimport ButtonMenu from '../atoms/ButtonMenu'\r\nimport logo from '../../assets/safety-logo.png';\r\n\r\n\r\ninterface IProps {\r\n  title: string\r\n}\r\ninterface IProps { }\r\nexport const Header: React.FC<IProps> = ({ title }) => {\r\n  const divStyle = {\r\n    display: 'flex',\r\n    flexFlow: 'row wrap'\r\n  };\r\n  const { t } = useTranslation();\r\n  const [showNavMenu, setShowNavMenu] = useState(getShowNavMenu(window.innerWidth));\r\n  const navMenu = (showNavMenu) ? <div style={divStyle}>\r\n    <nav className=\"App-nav\">\r\n      <Link to=\"/\">{t('Home')}</Link>\r\n      <Link to=\"/city\">{t('Cities')}</Link>\r\n      <Link to=\"/about\">{t('About')}</Link>\r\n    </nav>\r\n  </div> : <ButtonMenu />;\r\n  React.useEffect(() => {\r\n        function handleResize() {\r\n            const show = getShowNavMenu(window.innerWidth)\r\n            setShowNavMenu(show)\r\n        }\r\n        window.addEventListener('resize', handleResize)\r\n        return (() => { window.removeEventListener('resize', handleResize) })\r\n    })\r\n  return (\r\n    <header className=\"App-header\">\r\n      <div style={divStyle}>\r\n      <img src={logo} alt=\"Safety-Data logo\" height=\"45\" width=\"188\" />\r\n      {navMenu}\r\n      </div>\r\n      <div className=\"languageSelector\">\r\n        <LanguageSelector />\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\nconst getShowNavMenu = (width: number) => {\r\n  let res = true;\r\n  if (width <= 530)\r\n    res = false;\r\n  return res;\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\n\r\n//export default class Footer extends React.Component {\r\ninterface IProps { }\r\nexport const Footer: React.FC<IProps> = () =>\r\n{\r\n    const divStyle = {\r\n      display: 'flex',\r\n      flexFlow: 'row wrap'\r\n    };\r\n    const { t } = useTranslation();\r\n    return (\r\n      <footer style={divStyle}>\r\n        <nav  className= \"App-nav\">\r\n          <Link to=\"/\">{t('Home')}</Link>\r\n          <Link to=\"/city\">{t('Cities')}</Link>\r\n          <Link to=\"/about\">{t('About')}</Link>\r\n        </nav>\r\n      </footer>\r\n    );\r\n}\r\nexport default Footer\r\n","import React, { lazy, Suspense } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\nimport './i18n';\r\nimport './App.css';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { HomePage } from './components/pages/HomePage'\r\nimport { CityPage } from './components/pages/CityPage'\r\nimport Header from './components/templates/Headr';\r\nimport Footer from './components/templates/Footer';\r\n//import mapStore from './stores/MapStore';\r\n\r\nconst AboutPage = lazy(() => import('./components/pages/AboutPage'));\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div>\r\n        {/* A <Switch> looks through its children <Route>s and\r\n          renders the first one that matches the current URL. */}\r\n        <Card display='flex' height='100%'>\r\n          <Header title=\"Safety Data\" />\r\n          <div className=\"App\">\r\n            <Suspense fallback={<div>Loading...</div>}>\r\n              <Switch>\r\n                <Route path=\"/about\">\r\n                  <AboutPage />\r\n                </Route>\r\n                <Route path=\"/city\">\r\n                  <CityPage />\r\n                </Route>\r\n                <Route path=\"/\">\r\n                  <HomePage />\r\n                </Route>\r\n              </Switch>\r\n            </Suspense>\r\n          </div>\r\n          <Footer />\r\n        </Card>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { observable, action } from \"mobx\"\r\nimport L from 'leaflet'\r\nimport RootStore from \"./RootStore\";\r\nimport { fetchFilter } from \"../services/Accident.Service\"\r\n//import autorun  from \"mobx\"\r\n\r\nexport enum BBoxType {\r\n  NO_BBOX,\r\n  SERVER_BBOX,\r\n  LOCAL_BBOX\r\n}\r\n\r\nexport default class MapStore {\r\n  appInitialized = false\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n  rootStore: RootStore;\r\n  mapRef: any\r\n  setMapRef = (mapRef: any) => {\r\n    this.mapRef = mapRef;\r\n  }\r\n\r\n  @observable\r\n  isReadyToRenderMap: boolean = false;\r\n  @observable\r\n  bboxType: BBoxType = BBoxType.LOCAL_BBOX;\r\n\r\n  @observable\r\n  mapCenter: L.LatLng = new L.LatLng(32.08, 34.83)\r\n  @action\r\n  updateMapCenter = (center: L.LatLng) => {\r\n    this.mapCenter = center;\r\n  }\r\n  @action\r\n  updateMapCenterByCity = (res: any[]) => {\r\n    if (res !== null && res.length > 0) {\r\n      let city = res[0];\r\n      if (city.lat !== null && city.lon !== null)\r\n        this.updateMapCenter(new L.LatLng(city.lat, city.lon));\r\n    }\r\n  }\r\n  @observable\r\n  useSetBounds: boolean = true;\r\n  // @observable\r\n  // mapBounds: L.LatLngBounds = L.latLngBounds(INIT_BOUNDS);\r\n  // @action\r\n  // updateBounds = (bounds: L.LatLngBounds) => {\r\n  //   //console.log(\"updateBounds\",bounds) \r\n  //   try {\r\n  //     this.mapBounds = (bounds);\r\n  //   } catch (error) {\r\n  //     console.error(error)\r\n  //   }\r\n  // }\r\n  // @action\r\n  // initBounds = () => {\r\n  //   this.updateBounds(L.latLngBounds(INIT_BOUNDS))\r\n  // }\r\n  @action\r\n  setBounds = (data: any[], citisArr: string[]) => {\r\n    if (this.isSetBounds) {\r\n      const bunds = this.getBounds(data);\r\n      if (citisArr.length > 0 && citisArr[0] !== \"\") {\r\n        // //this.mapBounds = bunds;\r\n        // if (bunds.contains(this.mapCenter))\r\n        //   this.mapBounds = bunds;\r\n        // else\r\n        //  console.log(\"worng bounds: \", bunds, this.mapCenter)\r\n      }\r\n      else {\r\n        this.updateMapCenter(bunds.getCenter())\r\n        //this.mapBounds = bunds;\r\n      }\r\n      this.isSetBounds = false;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  isSetBounds: boolean = false;\r\n  @action\r\n  updateIsSetBounds = (citisArr: string[], roadSegArr: any[]) => {\r\n    if (this.useSetBounds) {\r\n      if (citisArr.length > 0 && citisArr[0] !== \"\")\r\n        this.isSetBounds = true;\r\n      else if (roadSegArr.length > 0 && roadSegArr[0] !== \"\")\r\n        this.isSetBounds = true;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  heatLayerHidden: boolean = true;\r\n  @action\r\n  toggleHeatLayer = () => {\r\n    this.heatLayerHidden = !this.heatLayerHidden;\r\n  }\r\n\r\n  getBounds = (data: any[]) => {\r\n    //console.log(\"setBounds!\")\r\n    let arr: L.LatLng[] = [];\r\n    let lastPoint: L.LatLng = L.latLng(0, 0);\r\n    data.forEach(x => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        let p = new L.LatLng(x.latitude, x.longitude);\r\n        if ((lastPoint.lat === 0 && lastPoint.lng === 0) || x.latitude !== lastPoint.lat || x.longitude !== lastPoint.lng) {\r\n          arr.push(p)\r\n          //prevent insertion of duplicate same point\r\n          lastPoint = p;\r\n        }\r\n      }\r\n    });\r\n    //bounds for single point\r\n    if (arr.length === 1) {\r\n      arr.length = 0; //clean tha array\r\n      arr.push(L.latLng(lastPoint.lat + 0.01, lastPoint.lng + 0.01))\r\n      arr.push(L.latLng(lastPoint.lat - 0.01, lastPoint.lng - 0.01))\r\n    }\r\n    //in case no lat/lon info \r\n    if (arr.length < 2)\r\n      arr = DEFAULT_BOUNDS;\r\n    const bounds = L.latLngBounds(arr)\r\n    return bounds;\r\n  }\r\n  getBounds2 = (data: any[]) => {\r\n    if (data.length === 0)\r\n      return L.latLngBounds(DEFAULT_BOUNDS)\r\n    let bounds = { south: 200, north: -200, west: 200, east: -200 }\r\n    data.forEach(x => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        bounds.south = Math.min(x.latitude, bounds.south);\r\n        bounds.north = Math.max(x.latitude, bounds.north);\r\n        bounds.west = Math.min(x.longitude, bounds.west);\r\n        bounds.east = Math.max(x.longitude, bounds.east);\r\n      }\r\n    });\r\n    //bounds for single point\r\n    if (bounds.south === bounds.north) {\r\n      bounds.south = bounds.south - 0.01;\r\n      bounds.north = bounds.north + 0.01;\r\n      bounds.west = bounds.west - 0.01;\r\n      bounds.east = bounds.east + 0.01;\r\n    }\r\n    const b = L.latLngBounds([bounds.south, bounds.west], [bounds.east, bounds.north])\r\n    return b;\r\n  }\r\n\r\n  @observable\r\n  dataMarkersInBounds: any[] = []\r\n  @action\r\n  updateDataMarkersInBounds = (data: any[]) => {\r\n    this.dataMarkersInBounds = data;\r\n  }\r\n  getMarkersInBBox = () => {\r\n    if (this.bboxType === BBoxType.LOCAL_BBOX) {\r\n      this.getMarkersInLocalBBox(0.1);\r\n    }\r\n    else if (this.bboxType === BBoxType.SERVER_BBOX) {\r\n      this.submintGetMarkersBBox();\r\n    }\r\n  }\r\n  getMarkersInLocalBBox = (boundsMargin: number) => {\r\n    if (this.mapRef === undefined)\r\n      return;\r\n    try {\r\n      const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n      const west = mapBounds.getWest() - boundsMargin;\r\n      const east = mapBounds.getEast() + boundsMargin;\r\n      const south = mapBounds.getSouth() - boundsMargin;\r\n      const north = mapBounds.getNorth() + boundsMargin;\r\n      const data = this.rootStore.filterStore.dataAllInjuries.filter(x =>\r\n        x.latitude >= south && x.latitude <= north && x.longitude >= west && x.longitude <= east\r\n      );\r\n      this.updateDataMarkersInBounds(data);\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n\r\n  }\r\n\r\n  submintGetMarkersBBox = () => {\r\n    if (this.mapRef === undefined)\r\n      return;\r\n    const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n    let filter = this.rootStore.filterStore.getFilter(mapBounds, true)\r\n    fetchFilter(filter, 'latlon')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateDataMarkersInBounds(data);\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\n//const INIT_BOUNDS = [L.latLng(32.032, 34.739), L.latLng(32.115, 34.949)];\r\nconst DEFAULT_BOUNDS = [\r\n  L.latLng(29.50, 34.22),     // most possible south-west point\r\n  L.latLng(33.271, 35.946),   // most possible north-east point\r\n];\r\n\r\n"],"sourceRoot":""}