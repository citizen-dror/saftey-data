{"version":3,"sources":["components/atoms/CasualtiesSumLabel.tsx","components/organisms/AccidentsTable.tsx"],"names":["CasualtiesSumLabel","observer","length","name","t","useTranslation","casualtiesNames","useStore","filterStore","nameSpan","getColumnsByWidth","width","columns1","dataField","text","hidden","sort","colCity","colStreet","columns3","columns4","columns","splice","concat","AccidentsTable","divStyle","display","justifyContent","marginBottom","reactMarkers","toJS","dataAllInjuries","ExportCSVButton","CSVExport","useState","window","innerWidth","setColumns","React","useEffect","handleResize","cols","addEventListener","removeEventListener","SmallCard2","cityResult","keyField","data","exportCSV","props","style","className","csvProps","pagination","paginationFactory","baseProps","headerClasses"],"mappings":"4PAgCeA,EAtB8BC,aAAS,YAAuB,IAApBC,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KACvDC,EAAMC,cAAND,EAEAE,EADgBC,cAAhBC,YACAF,gBACFG,EAAWN,EAAI,UAAMA,EAAN,MAAiB,GACtC,OAAID,EAAS,EAET,+BACGO,EACAL,EAAE,SACF,IACAF,EACA,IACAE,EAAEE,GACF,OAKL,6BAAKF,EAAE,uB,SCbLM,EAAoB,SAACC,EAAeP,GACxC,IAAMQ,EAAW,CAAC,CAChBC,UAAW,MACXC,KAAM,KACNC,QAAQ,GACP,CACDF,UAAW,gBACXC,KAAMV,EAAE,QACRY,MAAM,GACL,CACDH,UAAW,yBACXC,KAAMV,EAAE,YACRY,MAAM,GACL,CACDH,UAAW,sBACXC,KAAMV,EAAE,eACRY,MAAM,IAEFC,EAAU,CACdJ,UAAW,uBACXC,KAAMV,EAAE,QACRY,MAAM,GAEFE,EAAY,CAChBL,UAAW,iBACXC,KAAMV,EAAE,UACRY,MAAM,GAEFG,EAAW,CAAC,CAChBN,UAAW,8BACXC,KAAMV,EAAE,WACRY,MAAM,GACL,CACDH,UAAW,uBACXC,KAAMV,EAAE,gBACRY,MAAM,IAEFI,EAAW,CAAC,CAChBP,UAAW,mBACXC,KAAMV,EAAE,OACRY,MAAM,GACL,CACDH,UAAW,aACXC,KAAMV,EAAE,UACRY,MAAM,IAGJK,EAAUT,EAKd,OAJID,EAAQ,KAAKU,EAAQC,OAAO,EAAG,EAAGL,GAClCN,EAAQ,KAAKU,EAAQC,OAAO,EAAG,EAAGJ,GAClCP,EAAQ,MAAKU,EAAUA,EAAQE,OAAOJ,IAC1CE,EAAUA,EAAQE,OAAOH,IAKrBI,EAAmCvB,aAAS,WAAO,IAC/CO,EAAgBD,cAAhBC,YACAJ,EAAMC,cAAND,EACFqB,EAAW,CACfC,QAAS,OACTC,eAAgB,WAChBC,aAAc,QAEVC,EAAeC,YAAKtB,EAAYuB,iBAC9BC,EAAoBC,YAApBD,gBAT8C,EAUxBE,mBAASxB,EAAkByB,OAAOC,WAAYhC,IAVtB,mBAU/CiB,EAV+C,KAUtCgB,EAVsC,KAmBtD,OARAC,IAAMC,WAAU,WACd,SAASC,IACP,IAAMC,EAAO/B,EAAkByB,OAAOC,WAAYhC,GAClDiC,EAAWI,GAGb,OADAN,OAAOO,iBAAiB,SAAUF,GAC1B,WAAQL,OAAOQ,oBAAoB,SAAUH,OAEnDX,EAAa3B,OAAS,EAEtB,8BACE,eAAC0C,EAAA,EAAD,WACE,cAAC,EAAD,CACE1C,OAAQ2B,EAAa3B,OACrBC,KAAMK,EAAYqC,aAEpB,uBACA,cAAC,IAAD,CACEC,SAAS,KACTC,KAAMlB,EACNR,QAASA,EACT2B,WAAS,EAJX,SAKG,SAACC,GAAD,OACC,gCACE,qBAAKC,MAAOzB,EAAZ,SACE,cAACO,EAAD,yBACEmB,UAAU,aAAgBF,EAAMG,UADlC,aAEGhD,EAAE,sBAGP,cAAC,IAAD,yBACEiD,WAAYC,OACRL,EAAMM,WAFZ,IAGEC,cAAc,6BAU5B,cAAC,EAAD,CACEtD,OAAQ2B,EAAa3B,OACrBC,KAAMK,EAAYqC,gBAKTrB","file":"static/js/12.936b5611.chunk.js","sourcesContent":["\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n  length: number,\r\n  name?: string\r\n}\r\nconst CasualtiesSumLabel: React.FC<IProps> = observer(({ length, name }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { casualtiesNames } = filterStore;\r\n  const nameSpan = name ? `${name}- ` : '';\r\n  if (length > 0) {\r\n    return (\r\n      <h5>\r\n        {nameSpan}\r\n        {t('Found')}\r\n        {' '}\r\n        {length}\r\n        {' '}\r\n        {t(casualtiesNames)}\r\n        {' '}\r\n      </h5>\r\n    );\r\n  }\r\n  return (\r\n    <h4>{t('NoResultsFound')}</h4>\r\n  );\r\n});\r\nexport default CasualtiesSumLabel;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { toJS } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\n// @ts-ignore\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\n// @ts-ignore\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\n// @ts-ignore\r\nimport ToolkitProvider, { CSVExport } from 'react-bootstrap-table2-toolkit';\r\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\r\nimport 'react-bootstrap-table2-toolkit/dist/react-bootstrap-table2-toolkit.min.css';\r\nimport CasualtiesSumLabel from '../atoms/CasualtiesSumLabel';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport SmallCard2 from '../atoms/SmallCard2';\r\n\r\nconst getColumnsByWidth = (width: number, t: any) => {\r\n  const columns1 = [{\r\n    dataField: '_id',\r\n    text: 'ID',\r\n    hidden: true,\r\n  }, {\r\n    dataField: 'accident_year',\r\n    text: t('Year'),\r\n    sort: true,\r\n  }, {\r\n    dataField: 'injury_severity_hebrew',\r\n    text: t('Severity'),\r\n    sort: true,\r\n  }, {\r\n    dataField: 'injured_type_hebrew',\r\n    text: t('TypeInjured'),\r\n    sort: true,\r\n  }];\r\n  const colCity = {\r\n    dataField: 'accident_yishuv_name',\r\n    text: t('City'),\r\n    sort: true,\r\n  };\r\n  const colStreet = {\r\n    dataField: 'street1_hebrew',\r\n    text: t('Street'),\r\n    sort: true,\r\n  };\r\n  const columns3 = [{\r\n    dataField: 'vehicle_vehicle_type_hebrew',\r\n    text: t('Vehicle'),\r\n    sort: true,\r\n  }, {\r\n    dataField: 'accident_type_hebrew',\r\n    text: t('AccidentType'),\r\n    sort: true,\r\n  }];\r\n  const columns4 = [{\r\n    dataField: 'age_group_hebrew',\r\n    text: t('Age'),\r\n    sort: true,\r\n  }, {\r\n    dataField: 'sex_hebrew',\r\n    text: t('Gender'),\r\n    sort: true,\r\n  }];\r\n\r\n  let columns = columns1;\r\n  if (width > 500) columns.splice(2, 0, colCity);\r\n  if (width > 700) columns.splice(3, 0, colStreet);\r\n  if (width > 900) columns = columns.concat(columns3);\r\n  columns = columns.concat(columns4);\r\n  return columns;\r\n};\r\n\r\ninterface IProps { }\r\nconst AccidentsTable: React.FC<IProps> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { t } = useTranslation();\r\n  const divStyle = {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    marginBottom: '1rem'\r\n  };\r\n  const reactMarkers = toJS(filterStore.dataAllInjuries);\r\n  const { ExportCSVButton } = CSVExport;\r\n  const [columns, setColumns] = useState(getColumnsByWidth(window.innerWidth, t));\r\n  React.useEffect(() => {\r\n    function handleResize() {\r\n      const cols = getColumnsByWidth(window.innerWidth, t);\r\n      setColumns(cols);\r\n    }\r\n    window.addEventListener('resize', handleResize);\r\n    return (() => { window.removeEventListener('resize', handleResize); });\r\n  });\r\n  if (reactMarkers.length > 0) {\r\n    return (\r\n      <div>\r\n        <SmallCard2>\r\n          <CasualtiesSumLabel\r\n            length={reactMarkers.length}\r\n            name={filterStore.cityResult}\r\n          />\r\n          <hr />\r\n          <ToolkitProvider\r\n            keyField=\"id\"\r\n            data={reactMarkers}\r\n            columns={columns}\r\n            exportCSV>\r\n            {(props: any) => (\r\n              <div>\r\n                <div style={divStyle}>\r\n                  <ExportCSVButton\r\n                    className=\"button-sm\" {...props.csvProps}>\r\n                    {t('export-to-csv')}\r\n                  </ExportCSVButton>\r\n                </div>\r\n                <BootstrapTable\r\n                  pagination={paginationFactory()}\r\n                  {...props.baseProps}\r\n                  headerClasses=\"table-header\"\r\n                />\r\n                {/* <hr /> */}\r\n              </div>)}\r\n          </ToolkitProvider>\r\n        </SmallCard2>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <CasualtiesSumLabel\r\n      length={reactMarkers.length}\r\n      name={filterStore.cityResult}\r\n    />\r\n  );\r\n});\r\n\r\nexport default AccidentsTable;"],"sourceRoot":""}