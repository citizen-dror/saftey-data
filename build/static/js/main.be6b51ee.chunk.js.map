{"version":3,"sources":["i18n.js","stores/FilterChecker.ts","stores/ColumnFilter.ts","stores/GroupBy.ts","stores/GroupBy2Val.tsx","stores/GroupBy2.ts","stores/FiterUtils.ts","services/CityService.ts","services/DexieInjuredService.js","stores/FilterStore.ts","stores/UiStore.ts","services/ImageService.ts","stores/ImageStore.ts","stores/storeConfig.ts","stores/RootStore.ts","components/organisms/ConfigFilterModal.tsx","assets/gear2.png","assets/menu_white.png","assets/safety-logo.png","components/molecules/CitySelector.tsx","components/molecules/StreetSelector.tsx","components/molecules/RoadSegmentSelector.tsx","components/molecules/GroupCheckBox.tsx","components/atoms/SelectCityPop.tsx","components/organisms/FilterRequest.tsx","components/molecules/ConfigFilter.tsx","components/organisms/FilterPanel.tsx","components/atoms/ErrorBoundary.tsx","components/templates/TabsTemplate.tsx","components/templates/HomeTemplate.tsx","components/pages/HomePage.tsx","components/templates/CityTemplate.tsx","components/pages/CityPage.tsx","components/molecules/LanguageSelector.tsx","components/atoms/ButtonMenu.tsx","components/templates/Headr.tsx","components/templates/Footer.tsx","App.js","serviceWorker.js","index.js","services/AccidentService.ts","stores/MapStore.ts","components/atoms/Checkbox.tsx"],"names":["i18n","use","initReactI18next","init","fallbackLng","lng","debug","resources","translationEng","translationHeb","interpolation","escapeValue","FilterChecker","label","valid","filters","this","checked","observable","ColumnFilter","name","dbColName","allTypesOption","arrTypes","reduce","counter","currentValue","computed","action","aType","val","forEach","x","index","initVehicleTypes","col","push","GroupBy","text","value","limit","GroupBy2Val","color","GroupBy2","vals","revTrnas","key","fixStrcutTable","data","map","arr","count","y","engVal","grp2","join","xId","_id","undefined","replace","sObject","JSON","parse","getBars","Object","entries","getColumns","res","unshift","getFilterGroupBy","filterMatch","groupName","popMin","popMax","groupName2","filter","grpids","getAggFilter","getMultiplefilter","colFilter","allChecked","arrfilter","iterator","values","filterCheck","xSafe","CityService","cityName","collback","settings","url","method","headers","$","ajax","done","response","lang","db","Dexie","a","injuerd","bulkPut","getFromDexie","arrFilters","length","toArray","years","shift","where","filterName","between","startYear","endYear","collection","element","and","orFilter","version","stores","FilterStore","rootStore","dict","appInitialized","updateSpeedLimit","updateFilters","speedLimit","submintMainDataFilter","isLoading","range","cityPopSizeRange","getFilter","FiterUtils","min","max","mapStore","updateIsSetBounds","cities","roadSegment","fetchAggregatFilter","then","updateAllInjuries","useLocalDb","insertToDexie","submintGetMarkerFirstStep","updateDataMarkersLean","submitCityNameAndLocation","city","getCityByNameHe","updateMapCenterByCity","cityResult","bounds","useBounds","injurySeverity","getfilterCity","getfilterBounds","dayNight","getFilterStreets","getFilterFromArray","injTypes","genderTypes","ageTypes","populationTypes","accidentType","vehicleType","roadTypes","roadWidth","separator","oneLane","mapBounds","getSouth","getNorth","getWest","getEast","getfilterBySeverityAndCity","streets","trim","submitMainDataFilterLocalDb","getFilterIDB","submintGetMarkersBBoxIdb","getFilterBboxIDB","updateDataMarkersInBounds","toString","getfilterCityIDB","getFilterStreetsIDB","getMultiplefilterIDB","getFilterFromArrayIDb","bbox","p1","getSouthWest","p2","getNorthEast","filterVals","filter1","FC","setCasualtiesNames","groupByDict","dictGroupBy","Severity","TypeInjured","Vehicle","Gender","Age","Year","Month","DayNight","WeekDay","RoadType","City","CityByPop","Street","AccidentType","Vehicles","SpeedLimit","RoadWidth","Separator","OneLane","initGroupByDict","group2Dict","groupBy","groupBy2","dataByYears","dataYearsUnfilterdInit","dataFilterdByYears","dataYearsfilterdInit","dataFilterd","dataGrpBy1Init","dataGroupby2","dataGrp2Init","isAllValsFalse","isValidSeverity","isValidWhen","isValidWho","isValidWhere","isValidWhat","isValidWhatVehicle","isValidWhatRoad","pageType","currentPage","showAllVehicleTypes","deadChecker","sevIngChecker","casualtiesNames","isMulti","isMultipleCities","names","split","year","parseInt","setMarkersLoadStep","dataAllInjuries","setBounds","bboxType","BBoxType","LOCAL_BBOX","getMarkersInLocalBBox","dataMarkersLean","submitfilterdGroupByPop","submitfilterdGroup","submitfilterdGroup2","filtermatch","fetchAggregate","aGroupBy","sort","fixData","error","console","log","step","isUse2StepsMarkers","markersLoadStep","SERVER_BBOX","submintGetMarkersBBox","submitGroupByYears","submitfilterdGroupByYears","uiStore","language","imageStore","getImagesByPlace","updateFilter","UiStore","reactionChangeLang","reaction","locale","changeLanguage","initLang","slang","localStorage","getItem","updateLanguage","setItem","stringify","chartType","showPercentageChart","fetchListImgByTag","tag","fetch","mode","cache","credentials","redirect","referrerPolicy","ok","json","fetchListImgByPlace","place","uploadImg","image","file","formData","FormData","append","titlehe","texthe","tags","body","updateImgProps","ImageStore","setCurrImageVal","valName","currImage","submitImageFile","getImages","type","filterStore","getImagesByTag","currTag","setImageList","imageList","setCurrImage","hideDescription","document","documentElement","style","setProperty","store","MapStore","StoreContext","React","createContext","useStore","useContext","Error","ConfigFilterModal","title","showModal","setShow","children","t","useTranslation","handleClose","show","onHide","Header","closeButton","Title","Body","Footer","variant","onClick","module","exports","CitySelector","observer","isMultiple","Form","Group","controlId","Label","className","id","onChange","selected","updateCities","options","citisNamesHeb","multiple","StreetSelector","Control","placeholder","e","updateStreets","target","RoadSegmentSelector","updateRoadSegment","GroupCheckbox","formName","onGroupChange","feedback","marginTop","fontSize","isvalid","fChecker","Checkbox","group","styleSelect","width","SelectCityPop","as","Col","STYLE_TOGGLE_WARNING","STYLE_TOGGLE_NORMAL","FilterRequest","activeCardKey","updateInjurySeverity","isValidAllFilters","Accordion","defaultActiveKey","CardFilterWhen","CardFilterWhere","CardFilterWho","CardFilterWhat","CardFilterWhatVehicle","CardFilterWhatRoad","Button","disabled","submitFilter","setStartYear","setEndYear","updateDayNight","styleToggle","Card","Toggle","eventKey","Collapse","Row","defaultValue","updateRoadType","setCityPopSizeRange","updateInjuerdType","updateGenderType","updateAgeType","updatePopulationType","updateAccidentType","updateVehicleType","updateRoadWidth","updateSeparator","updateOneLane","ConfigFilter","updateShowAllVehicleTypes","styles","buttonStyle","display","justifyContent","iconStyle","height","paddingTop","paddingBottom","FilterPanel","useState","open","setOpen","showModel","setShowModal","aria-controls","aria-expanded","src","gearlogo","alt","in","ErrorBoundary","props","state","hasError","errorInfo","Component","GroupByGraphsPanel","lazy","GroupByTablesPanel","MapAccidents","AccidentsTable","MyImageGallery","TabsTemplate","defaultKey","activeKey","Tabs","mountOnEnter","onSelect","tabActiveKey","isReadyToRenderMap","Tab","fallback","HomeTemplate","setCurrentPage","setIsMultipleCities","useEffect","HomePage","useCityNamefromQuery","URLSearchParams","useLocation","search","get","found","includes","find","CityLable","CityTemplate","CityPage","LanguageSelector","getElementById","href","classList","remove","add","ButtonGroup","toggle","size","ToggleButton","defaultChecked","ButtonMenu","styleLink","alignRight","Dropdown","backgroundColor","menuIcon","Menu","Item","to","getShowNavMenu","divStyle","flexFlow","window","innerWidth","showNavMenu","setShowNavMenu","navMenu","handleResize","addEventListener","removeEventListener","logo","AboutPage","UpdateImagePage","App","path","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch","message","fetchFilter","DEFAULT_BOUNDS","L","latLng","mapRef","setMapRef","getBounds","lastPoint","latitude","longitude","p","LatLng","lat","latLngBounds","getBounds2","south","north","west","east","Math","getMarkersInBBox","boundsMargin","current","leafletElement","center","mapCenter","lon","updateMapCenter","citisArr","isSetBounds","bunds","getCenter","roadSegArr","useSetBounds","heatLayerHidden","useSmallMarkers","dataMarkersInBounds","Check","inline"],"mappings":"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","file":"static/js/main.be6b51ee.chunk.js","sourcesContent":["import i18n from 'i18next';\r\n//import LanguageDetector from 'i18next-browser-languagedetector';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport translationEng from \"./lng/en/translation.json\";\r\nimport translationHeb from \"./lng/he/translation.json\";\r\n\r\n\r\ni18n\r\n  // detect user language\r\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n  //.use(LanguageDetector)\r\n  // pass the i18n instance to react-i18next.\r\n  .use(initReactI18next)\r\n  .init({\r\n    fallbackLng: 'he',\r\n    lng : 'he',\r\n    debug: true,\r\n    // hardcoding translations for the sake of simplicity,\r\n    // id more complex - get it from backend.\r\n    // i18next has a small plugin that makes it easy.\r\n    // learn more: https://github.com/i18next/i18next-xhr-backend\r\n    resources: {\r\n      'en':{\r\n        'translation':translationEng  \r\n      },\r\n        'he':{\r\n        'translation':translationHeb \r\n      }\r\n    },\r\n    interpolation: {\r\n      escapeValue: false, // not needed for React as it escapes by default\r\n    },\r\n});\r\nexport default i18n;","import { observable} from 'mobx';\r\n\r\nexport interface IFilterChecker {\r\n    checked: boolean;\r\n    label: string;\r\n    filters: string[];\r\n}\r\nexport default class FilterChecker implements IFilterChecker {\r\n    @observable\r\n    checked: boolean;\r\n\r\n    label: string;\r\n\r\n    filters: string[];\r\n\r\n    constructor(label: string, valid: boolean, filters: string[]) {\r\n      this.label = label;\r\n      this.checked = valid;\r\n      this.filters = filters;\r\n    }\r\n}\r\n","import { observable, action, computed } from 'mobx';\r\nimport FilterChecker, { IFilterChecker } from './FilterChecker';\r\nimport dataYearsUnfilterdInit from '../assets/data-by-years.json';\r\nimport dataYearsfilterdInit from '../assets/data-by-years-filtred.json';\r\nimport dataGrpBy1Init from '../assets/data-by-grp1.json';\r\nimport dataGrp2Init from '../assets/data-by-grp2.json'\r\n\r\nexport interface IColumnFilter {\r\n    name: string;\r\n    dbColName: string;\r\n    arrTypes: IFilterChecker[];\r\n    allTypesOption : number;\r\n    isAllValsFalse: boolean;\r\n    updateFilter:(aType: number, val: boolean) => void;\r\n}\r\nexport class ColumnFilter implements IColumnFilter {\r\n    name: string;\r\n\r\n    dbColName: string;\r\n\r\n    @observable\r\n    arrTypes: IFilterChecker[];\r\n\r\n    allTypesOption : number;\r\n\r\n    constructor(name: string, dbColName: string, allTypesOption: number = -1) {\r\n      this.name = name;\r\n      this.dbColName = dbColName;\r\n      this.arrTypes = [];\r\n      this.allTypesOption = allTypesOption;\r\n    }\r\n\r\n    @computed get isAllValsFalse() {\r\n      const res = this.arrTypes.reduce((counter, currentValue) => (currentValue.checked ? ++counter : counter), 0);\r\n      return (res === 0);\r\n    }\r\n\r\n    @action\r\n    updateFilter = (aType: number, val: boolean) => {\r\n      if (this.allTypesOption === -1) this.arrTypes[aType].checked = val;\r\n      else if (aType === this.allTypesOption) {\r\n        this.arrTypes.forEach((x, index) => x.checked = (index === this.allTypesOption) ? val : !val);\r\n      } else {\r\n        this.arrTypes[this.allTypesOption].checked = false;\r\n        this.arrTypes[aType].checked = val;\r\n      }\r\n    }\r\n    // @computed get countTrueVals () {\r\n    //     const res = this.arrTypes.reduce(function(counter,currentValue){\r\n    //         return currentValue.checked? ++counter:counter;\r\n    //       },0);\r\n    //     return res;\r\n    // }\r\n}\r\n\r\nexport const initInjurySeverity = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Severity', 'injury_severity_hebrew');\r\n  col.arrTypes.push(new FilterChecker('dead', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('severly-injured', false, [' ']));\r\n  return col;\r\n};\r\n\r\nexport const initDayNight = () => {\r\n  const col : IColumnFilter = new ColumnFilter('DayNight', 'day_night_hebrew');\r\n  col.arrTypes.push(new FilterChecker('day', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('night', true, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initMonth = (arr: IFilterChecker[]) => {\r\n  arr.push(new FilterChecker('1', true, ['1']));\r\n  arr.push(new FilterChecker('2', true, ['2']));\r\n  arr.push(new FilterChecker('3', true, ['3']));\r\n  arr.push(new FilterChecker('4', true, ['4']));\r\n  arr.push(new FilterChecker('5', true, ['5']));\r\n  arr.push(new FilterChecker('6', true, ['6']));\r\n  arr.push(new FilterChecker('7', true, ['7']));\r\n  arr.push(new FilterChecker('8', true, ['8']));\r\n  arr.push(new FilterChecker('9', true, ['9']));\r\n  arr.push(new FilterChecker('10', true, ['10']));\r\n  arr.push(new FilterChecker('11', true, ['11']));\r\n  arr.push(new FilterChecker('12', true, ['12']));\r\n};\r\n\r\nexport const initInjTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Vehicle', 'injured_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('cyclist', false, [' - ', ' -  ( )']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false, [' - ', ' -  ( )']));\r\n  col.arrTypes.push(new FilterChecker('wheels4+', false, [' -   4  ', ' -   4  ']));\r\n  col.arrTypes.push(new FilterChecker('other', false, [' -   ', ' -   ']));\r\n  return col;\r\n};\r\n\r\nexport const initVehicleTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('VehicleType', 'vehicle_vehicle_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, ['null']));\r\n  col.arrTypes.push(new FilterChecker('mobilityscooter', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('bicycle', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('e-scooter', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('e-bike', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false,\r\n    [' 401+ \"', ' 126  400 \"', ' 51  125 \"']));\r\n  col.arrTypes.push(new FilterChecker('car', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('taxi', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('bus', false, [' ', '']));\r\n  col.arrTypes.push(new FilterChecker('tranzit', false, ['  3.5  -  ()']));\r\n  col.arrTypes.push(new FilterChecker('tender', false, ['  3.5   -   ()']));\r\n  col.arrTypes.push(new FilterChecker('truck', false,\r\n    [' 3.6  9.9 ', ' 10.0  12.0 ', ' 12.1  15.9 ', ' 16.0  33.9 ', ' 34.0+ ']));\r\n  col.arrTypes.push(new FilterChecker('tractor', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('train', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('other', false, ['  ']));\r\n  return col;\r\n};\r\n\r\nexport const initVehicleTypesFull = () => {\r\n  const col : IColumnFilter = new ColumnFilter('VehicleType', 'vehicle_vehicle_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, ['null']));\r\n  col.arrTypes.push(new FilterChecker('mobilityscooter', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('bicycle', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('e-scooter', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('e-bike', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle1', false, [' 51  125 \"']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle2', false, [' 126  400 \"']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle3', false, [' 401+ \"']));\r\n  col.arrTypes.push(new FilterChecker('car', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('taxi', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('tranzit', false, ['  3.5  -  ()']));\r\n  col.arrTypes.push(new FilterChecker('tender', false, ['  3.5   -   ()']));\r\n  col.arrTypes.push(new FilterChecker('minbuss', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('bus', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('truck1', false, [' 3.6  9.9 ']));\r\n  col.arrTypes.push(new FilterChecker('truck2', false, [' 10.0  12.0 ']));\r\n  col.arrTypes.push(new FilterChecker('truck3', false, [' 12.1  15.9 ']));\r\n  col.arrTypes.push(new FilterChecker('truck4', false, [' 16.0  33.9 ']));\r\n  col.arrTypes.push(new FilterChecker('truck5', false, [' 34.0+ ']));\r\n  col.arrTypes.push(new FilterChecker('tractor', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('train', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('other', false, ['  ']));\r\n  return col;\r\n};\r\n\r\n\r\nexport const initGenderTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Gender', 'sex_hebrew');\r\n  col.arrTypes.push(new FilterChecker('female', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('male', true, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initAgeTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Age', 'age_group_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('00-04', false, ['00-04']));\r\n  col.arrTypes.push(new FilterChecker('05-09', false, ['05-09']));\r\n  col.arrTypes.push(new FilterChecker('10-14', false, ['10-14']));\r\n  col.arrTypes.push(new FilterChecker('15-19', false, ['15-19']));\r\n  col.arrTypes.push(new FilterChecker('20-29', false, ['20-24', '25-29']));\r\n  col.arrTypes.push(new FilterChecker('30-39', false, ['30-34', '35-39']));\r\n  col.arrTypes.push(new FilterChecker('40-49', false, ['40-44', '45-49']));\r\n  col.arrTypes.push(new FilterChecker('50-59', false, ['50-54', '55-59']));\r\n  col.arrTypes.push(new FilterChecker('60-69', false, ['60-64', '65-69']));\r\n  col.arrTypes.push(new FilterChecker('70-79', false, ['70-74', '75-79']));\r\n  col.arrTypes.push(new FilterChecker('80+', false, ['80-84', '85+']));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, [' ']));\r\n  return col;\r\n};\r\nexport const initPopulationTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Population', 'population_type_hebrew');\r\n  col.arrTypes.push(new FilterChecker('jews', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('arabs', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('immigrants', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('others', true, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initRoadTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('RoadType', 'road_type_hebrew');\r\n  col.arrTypes.push(new FilterChecker('urban-junction', true, [' ']));\r\n  col.arrTypes.push(new FilterChecker('urban-road', true, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('non-urban-junction', true, ['- ']));\r\n  col.arrTypes.push(new FilterChecker('non-urban-road', true, ['-  ']));\r\n  return col;\r\n};\r\nexport const initSpeedLimit = () => {\r\n  const col : IColumnFilter = new ColumnFilter('SpeedLimit', 'speed_limit_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('speed50', false, [' 50 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed60', false, ['60 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed70', false, ['70 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed80', false, ['80 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed90', false, ['90 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed100', false, ['100 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed110', false, ['110 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed120', false, ['120 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed-unknown', false, [' ']));\r\n  return col;\r\n};\r\nexport const initRoadWidth = () => {\r\n  const col : IColumnFilter = new ColumnFilter('RoadWidth', 'road_width_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('road-width-5', false, [' 5 ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-7', false, ['5  7  ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-10', false, ['7  10.5 ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-14', false, ['10.5  14 ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-14+', false, [' - 14 ']));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, [' ']));\r\n  return col;\r\n};\r\nexport const initSeparator = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Separator', 'multi_lane_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('separator-fence', false, ['   ']));\r\n  col.arrTypes.push(new FilterChecker('separator-built', false, ['    ']));\r\n  col.arrTypes.push(new FilterChecker('separator-not-built', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('separator-paint', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('separator-ohter', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('separator-not-relevant', false, ['null']));\r\n  return col;\r\n};\r\nexport const initOneLane = () => {\r\n  const col : IColumnFilter = new ColumnFilter('OneLane', 'one_lane_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-line', false, ['  +   ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-noline', false, ['     ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-oneway', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-unknown', false, ['   ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-not-relevant', false, ['null']));\r\n  return col;\r\n};\r\nexport const initAccidentType = () => {\r\n  const col : IColumnFilter = new ColumnFilter('AccidentType', 'accident_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('hit-ped', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-side', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-front', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-rear', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-side-side', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-obstacle', false, ['   ']));\r\n  col.arrTypes.push(new FilterChecker('hit-turning-over', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('hit-slip', false, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initDataYreasUnfilterd = () => dataYearsUnfilterdInit;\r\n\r\nexport const initDataYreasfilterd = () => dataYearsfilterdInit;\r\n\r\nexport const initDataGrpBy1 = () => dataGrpBy1Init;\r\n\r\nexport const initDataGrpBy2 = () => dataGrp2Init;","import { observable } from 'mobx';\r\n\r\nexport interface IGroupBy {\r\n  text: string;\r\n  value: string;\r\n  limit: number;\r\n}\r\n\r\nexport default class GroupBy implements IGroupBy {\r\n  @observable\r\n  text: string;\r\n\r\n  value: string;\r\n\r\n  limit: number;\r\n\r\n  // text - headleine for GUI, value - name of value for filter\r\n  constructor(text: string, value: string, limit: number = 0) {\r\n    this.text = text;\r\n    this.value = value;\r\n    this.limit = limit;\r\n  }\r\n}\r\n\r\nexport const initGroupByDict = () => {\r\n  const dictGroupBy:any = {};\r\n  dictGroupBy.Severity = new GroupBy('Severity', 'injury_severity_hebrew');\r\n  dictGroupBy.TypeInjured = new GroupBy('TypeInjured', 'injured_type_hebrew');\r\n  dictGroupBy.Vehicle = new GroupBy('Vehicle', 'vehicle_vehicle_type_hebrew');\r\n  dictGroupBy.Gender = new GroupBy('Gender', 'sex_hebrew');\r\n  dictGroupBy.Age = new GroupBy('Age', 'age_group_hebrew');\r\n  dictGroupBy.Year = new GroupBy('Year', 'accident_year');\r\n  dictGroupBy.Month = new GroupBy('Month', 'accident_month');\r\n  dictGroupBy.DayNight = new GroupBy('DayNight', 'day_night_hebrew');\r\n  dictGroupBy.WeekDay = new GroupBy('WeekDay', 'day_in_week_hebrew');\r\n  dictGroupBy.RoadType = new GroupBy('RoadType', 'road_type_hebrew');\r\n  dictGroupBy.City = new GroupBy('City', 'accident_yishuv_name', 10);\r\n  dictGroupBy.CityByPop = new GroupBy('CityByPop', 'accident_yishuv_name');\r\n  dictGroupBy.Street = new GroupBy('Street', 'street1_hebrew', 10);\r\n  dictGroupBy.AccidentType = new GroupBy('AccidentType', 'accident_type_hebrew');\r\n  dictGroupBy.Vehicles = new GroupBy('Vehicles', 'vehicles');\r\n  dictGroupBy.SpeedLimit = new GroupBy('SpeedLimit', 'speed_limit_hebrew');\r\n  dictGroupBy.RoadWidth = new GroupBy('RoadWidth', 'road_width_hebrew');\r\n  dictGroupBy.Separator = new GroupBy('Separator', 'multi_lane_hebrew');\r\n  dictGroupBy.OneLane = new GroupBy('OneLane', 'one_lane_hebrew');\r\n  return dictGroupBy;\r\n};\r\n","export default class GroupBy2Val {\r\n  name: string;\r\n  \r\n  color: string;\r\n\r\n  constructor(name: string, color: string) {\r\n    this.name = name;\r\n    this.color = color;\r\n  }\r\n}\r\n","import { observable } from 'mobx';\r\nimport GroupBy2Val from './GroupBy2Val';\r\n\r\nexport interface IGroupBy2 {\r\n    text: string;\r\n    name: string;\r\n    vals: any;\r\n  }\r\n\r\nexport default class GroupBy2 implements IGroupBy2 {\r\n    @observable\r\n    text:string;\r\n\r\n    name: string;\r\n\r\n    vals: any;\r\n\r\n    constructor(text:string, name: string) {\r\n      this.text = text;\r\n      this.name = name;\r\n      this.vals = {};\r\n    }\r\n\r\n    revTrnas = (key: string) => {\r\n      if (key === '') return '';\r\n      const res = this.vals[key].name;\r\n      return res;\r\n    }\r\n\r\n    // input like {_id: 2015, count: Array(2)}\r\n    // output like {_id: \"2015\", male: 264, female: 92}\r\n    fixStrcutTable = (data: any[]) => {\r\n      const res = data.map((x) => {\r\n        const arr = x.count.map((y: any) => {\r\n          const engVal = this.revTrnas(y.grp2);\r\n          return (`\"${engVal}\":${y.count}`);\r\n        }).join(',');\r\n        let xId = x._id;\r\n        if (xId !== null && xId !== undefined && typeof (xId) === 'string') xId = xId.replace('\"', '\\\\\"');\r\n        let sObject = `{\"_id\":\"${xId}\",${arr}}`;\r\n        sObject = JSON.parse(sObject);\r\n        return (sObject);\r\n      });\r\n      // console.log(res)\r\n      return res;\r\n    }\r\n  \r\n    getBars = () => {\r\n      // [{key:\"male\",color:\"#8884d8\"},{key:\"female\",color:\"#82ca9d\"}]\r\n      const res = Object.entries(this.vals).map(([key, x]: any[]) => ({ key: x.name, color: x.color }));\r\n      return res;\r\n    }\r\n  \r\n    getColumns= () => {\r\n      const res = Object.entries(this.vals).map(([key, x]: any[]) => (x.name));\r\n      res.unshift('_id');\r\n      return res;\r\n    }\r\n}\r\n\r\nexport const initGroup2Dict = (dict: any) => {\r\n    dict.Severity = new GroupBy2('Severity', 'injury_severity_hebrew');\r\n    dict.Severity.vals[''] = new GroupBy2Val('dead', '#8884D8');\r\n    dict.Severity.vals[' '] = new GroupBy2Val('severly-injured', '#82CA9D');\r\n  \r\n    dict.Gender = new GroupBy2('Gender', 'sex_hebrew');\r\n    dict.Gender.vals[''] = new GroupBy2Val('male', '#8884D8');\r\n    dict.Gender.vals[''] = new GroupBy2Val('female', '#82CA9D');\r\n  \r\n    dict.RoadType = new GroupBy2('RoadType', 'road_type_hebrew');\r\n    dict.RoadType.vals[' '] = new GroupBy2Val('urban-junction', '#559E54');\r\n    dict.RoadType.vals['  '] = new GroupBy2Val('urban-road', '#305A30');\r\n    dict.RoadType.vals['- '] = new GroupBy2Val('non-urban-junction', '#1258DC');\r\n    dict.RoadType.vals['-  '] = new GroupBy2Val('non-urban-road', '#0A337F');\r\n  \r\n    dict.TypeInjured = new GroupBy2('TypeInjured', 'injured_type_hebrew');\r\n    dict.TypeInjured.vals[' '] = new GroupBy2Val('pedestrian', '#82CA9D');\r\n    dict.TypeInjured.vals[' - '] = new GroupBy2Val('cyclist-d', '#559E54');\r\n    dict.TypeInjured.vals[' -  ( )'] = new GroupBy2Val('cyclist-p', '#559E54');\r\n    dict.TypeInjured.vals[' -   '] = new GroupBy2Val('inj-unknown-d', '#305A30');\r\n    dict.TypeInjured.vals[' -   '] = new GroupBy2Val('inj-unknown-p', '#305A30');\r\n    dict.TypeInjured.vals[' - '] = new GroupBy2Val('motorcycle-d', '#1258DC');\r\n    dict.TypeInjured.vals[' -  ( )'] = new GroupBy2Val('motorcycle-p', '#1258DC');\r\n    dict.TypeInjured.vals[' -   4  '] = new GroupBy2Val('wheels4+-d', '#0A337F');\r\n    dict.TypeInjured.vals[' -   4  '] = new GroupBy2Val('wheels4+-p', '#0A337F');\r\n  };","\r\nimport { IColumnFilter } from './ColumnFilter';\r\n\r\nexport const getFilterGroupBy = (filterMatch: string, groupName: string, popMin = -1, popMax = -1, groupName2: string = '', limit: number = 0) => {\r\n  let filter = `${'['\r\n        + '{\"$match\": '}${filterMatch}}`;\r\n  if (popMin >= 0 && popMax > 0) {\r\n    filter += ',{\"$lookup\":{'\r\n        + ' \"from\": \"cities\", \"localField\": \"accident_yishuv_name\",'\r\n        + ' \"foreignField\": \"name_he\",\"as\": \"city\"'\r\n        + '}}';\r\n    filter += `,{ \"$match\": { \"city.population\": { \"$gte\" : ${popMin} , \"$lte\" : ${popMax}}}}`;\r\n  }\r\n  if (groupName2 === '') filter += `,{\"$group\": { \"_id\": \"$${groupName}\", \"count\": { \"$sum\": 1 }}}`;\r\n  else {\r\n    filter += `, { \"$match\" : { \"${groupName2}\" : { \"$exists\" : true, \"$ne\" : null}}}`;\r\n    const grpids = `{ \"grp1\": \"$${groupName}\", \"grp2\": \"$${groupName2}\"}`;\r\n    filter += `,{\"$group\": { \"_id\":${grpids}, \"count\": { \"$sum\": 1 }}}`;\r\n    filter += ',{\"$group\": { \"_id\": \"$_id.grp1\" , \"count\": { \"$push\": {\"grp2\" : \"$_id.grp2\",\"count\" : \"$count\" } }}}';\r\n  }\r\n  if (limit === 0) filter += ',{\"$sort\": {\"_id\": 1}}';\r\n  else {\r\n    filter += `${',{\"$sort\": {\"count\": -1}}'\r\n          + ',{\"$limit\": '}${limit}}`;\r\n  }\r\n  filter += ']';\r\n  return filter;\r\n};\r\n\r\n// filter accidents using aggrgation pipline\r\nexport const getAggFilter = (filterMatch: string, popMin: number, popMax: number) => {\r\n  let filter = `${'['\r\n      + '{\"$match\": '}${filterMatch}}`;\r\n  if (popMin >= 0 && popMax > 0) {\r\n    filter += ',{\"$lookup\":{'\r\n               + ' \"from\": \"cities\", \"localField\": \"accident_yishuv_name\",'\r\n               + ' \"foreignField\": \"name_he\",\"as\": \"city\"'\r\n               + '}}';\r\n    filter += `,{ \"$match\": { \"city.population\": { \"$gte\" : ${popMin} , \"$lte\" : ${popMax}}}}`;\r\n  }\r\n  filter += ']';\r\n  return filter;\r\n};\r\n\r\n// fiter by accidents per 100,000 city population\r\nexport const getFilterGroupByPop = (filterMatch: string, popMin = 200000, popMax = 100000, sort: number, limit: number) => {\r\n  let filter = `${'['\r\n      + '{\"$match\": '}${filterMatch}}`;\r\n  filter += ',{\"$lookup\":{'\r\n               + ' \"from\": \"cities\", \"localField\": \"accident_yishuv_name\",'\r\n               + ' \"foreignField\": \"name_he\",\"as\": \"city\"'\r\n               + '}}';\r\n  if (popMin >= 0 && popMax > 0) {\r\n    filter += `,{ \"$match\": { \"city.population\": { \"$gte\" : ${popMin} , \"$lte\" : ${popMax}}}}`;\r\n  }\r\n  filter += ',{\"$group\": {'\r\n        + '\"_id\": \"$accident_yishuv_name\",\"t_count\" : { \"$sum\" : 1 },\"t_population\" : { \"$first\" : \"$city.population\" }'\r\n        + '}}';\r\n  filter += ',{ \"$unwind\" : \"$t_population\"}';\r\n  filter += ',{ \"$project\" : { \"count\" :'\r\n        + '{ \"$multiply\" : [100000, { \"$divide\" : [\"$t_count\", \"$t_population\"] } ]}'\r\n        + '}}';\r\n  if (limit === 0) filter += `,{\"$sort\": {\"count\": ${sort}}}`;\r\n  else {\r\n    filter += `${`,{\"$sort\": {\"count\": ${sort}}}`\r\n      + ',{\"$limit\": '}${limit}}`;\r\n  }\r\n  filter += ']';\r\n  return filter;\r\n};\r\n\r\nexport const getMultiplefilter = (colFilter: IColumnFilter) => {\r\n  let filter: string = '';\r\n  let allChecked: boolean = true;\r\n  let arrfilter: string[] = [];\r\n  if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) allChecked = true;\r\n  else {\r\n    // in case there is allTypesOption , it want be copied to arrfilter\r\n    // as it is not checked\r\n    const iterator = colFilter.arrTypes.values();\r\n    for (const filterCheck of iterator) {\r\n      if (filterCheck.checked) {\r\n        arrfilter = [...arrfilter, ...filterCheck.filters];\r\n      } else {\r\n        allChecked = false;\r\n      }\r\n    }\r\n  }\r\n  if (allChecked) filter = '';\r\n  else {\r\n    filter += ',{\"$or\": [';\r\n    filter += arrfilter.map((x: string) => {\r\n      if (x === 'null') return `{\"${colFilter.dbColName}\":${null}}`;\r\n\r\n      const xSafe = x.replace('\"', '\\\\\"');\r\n      return `{\"${colFilter.dbColName}\" : \"${xSafe}\"}`;\r\n    }).join(',');\r\n    filter += ']}';\r\n  }\r\n  return filter;\r\n};\r\n","import $ from 'jquery';\r\n\r\n// /////\r\nexport default class CityService {\r\n  // get request using jsonp\r\n  getCityByNameHe(cityName:string, collback :(res:any[]) =>void) {\r\n    // \"http://localhost:5000/api/v1/city?name_he=\"\r\n    const settings = {\r\n      url: `/api/v1/city?name_he=${cityName}`,\r\n      method: 'GET',\r\n      headers: {},\r\n    };\r\n    $.ajax(settings).done((response:any[]) => {\r\n      // console.log(response)\r\n      collback(response);\r\n    });\r\n  }\r\n\r\n  getCitiesNames(lang:string, collback :(res:any[]) =>void) {\r\n    // \"http://localhost:5000/api/v1/city?name_he=\"\r\n    const settings = {\r\n      url: `/api/v1/city?lang=${lang}`,\r\n      method: 'GET',\r\n      headers: {},\r\n    };\r\n    $.ajax(settings).done((response:any[]) => {\r\n      // console.log(response)\r\n      collback(response);\r\n    });\r\n  }\r\n}\r\n","import Dexie from 'dexie';\r\n\r\nconst db = new Dexie('saftyData');\r\ndb.version(1).stores({\r\n  injuerd: 'id++,_id, accident_id, accident_year, accident_timestamp, sex_hebrew, accident_yishuv_name ,road_type_hebrew',\r\n});\r\n\r\nexport async function insertToDexie(data) {\r\n  // console.log(\"insertToDexie\")\r\n  // console.log(data)\r\n  await db.injuerd.bulkPut(data);\r\n  // testInsertDexie()\r\n}\r\n\r\nexport async function getFromDexie(arrFilters) {\r\n  let data;\r\n  if (arrFilters.length === 0) data = await db.injuerd.toArray();\r\n  else {\r\n    const years = arrFilters.shift();\r\n    let collection = await db.injuerd.where(years.filterName).between(years.startYear, years.endYear, true, true);\r\n    arrFilters.forEach((element) => {\r\n      collection = collection.and(((x) => {\r\n        if (element.values.length === 1) return x[element.filterName] === element.values[0];\r\n\r\n        let orFilter = false;\r\n        element.values.forEach((val) => orFilter = orFilter || x[element.filterName] === val);\r\n        return orFilter;\r\n      }));\r\n    });\r\n    data = await collection.toArray();\r\n  }\r\n  return data;\r\n}\r\n\r\n\r\n// var db1 = new Dexie('hellodb');\r\n// db1.version(1).stores({\r\n//     tasks: '++id,date,description,done'\r\n// });\r\n\r\n\r\n// export async function testInsertDexie() {\r\n//     var id = await db1.tasks.put({date: Date.now(), description: 'Test Dexie', done: 0});\r\n//     console.log(\"Got id \" + id);\r\n//     // Now lets add a bunch of tasks\r\n//     await db1.tasks.bulkPut([\r\n//         {date: Date.now(), description: 'Test Dexie bulkPut()', done: 1},\r\n//         {date: Date.now(), description: 'Finish testing Dexie bulkPut()', done: 1}\r\n//     ]);\r\n// }\r\n\r\n\r\nexport default db;\r\n","import {\r\n  observable, action, computed,\r\n} from 'mobx';\r\nimport { IColumnFilter } from './ColumnFilter';\r\nimport * as FC from './ColumnFilter';\r\nimport { IFilterChecker } from './FilterChecker';\r\nimport GroupBy, { initGroupByDict } from './GroupBy';\r\nimport GroupBy2, { initGroup2Dict } from './GroupBy2';\r\nimport * as FiterUtils from './FiterUtils';\r\nimport RootStore from './RootStore';\r\nimport { fetchAggregate, fetchAggregatFilter } from '../services/AccidentService';\r\nimport CityService from '../services/CityService';\r\nimport { insertToDexie, getFromDexie } from '../services/DexieInjuredService';\r\nimport { BBoxType } from './MapStore';\r\nimport Casualty from './Casualty';\r\n// import autorun  from \"mobx\"\r\n\r\nexport default class FilterStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n    this.injurySeverity = FC.initInjurySeverity();\r\n    this.setCasualtiesNames(this.injurySeverity);\r\n    this.dayNight = FC.initDayNight();\r\n    this.injTypes = FC.initInjTypes();\r\n    this.genderTypes = FC.initGenderTypes();\r\n    this.ageTypes = FC.initAgeTypes();\r\n    this.populationTypes = FC.initPopulationTypes();\r\n    this.accidentType = FC.initAccidentType();\r\n    this.vehicleType = FC.initVehicleTypes();\r\n    this.roadTypes = FC.initRoadTypes();\r\n    this.speedLimit = FC.initSpeedLimit();\r\n    this.roadWidth = FC.initRoadWidth();\r\n    this.separator = FC.initSeparator();\r\n    this.oneLane = FC.initOneLane();\r\n    this.groupByDict = initGroupByDict();\r\n    initGroup2Dict(this.group2Dict);\r\n    this.groupBy = this.groupByDict.TypeInjured;\r\n    this.groupBy2 = this.group2Dict.Gender;\r\n    // init data (on home page)\r\n    this.dataByYears = FC.initDataYreasUnfilterd();\r\n    this.dataFilterdByYears = FC.initDataYreasfilterd();\r\n    this.dataFilterd = FC.initDataGrpBy1();\r\n    this.dataGroupby2 = FC.initDataGrpBy2();\r\n    this.appInitialized = false;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  @observable\r\n  currentPage: string ='home';\r\n\r\n  @action\r\n  setCurrentPage = (pageType: string) => {\r\n    this.currentPage = pageType;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Config Filter\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  showAllVehicleTypes: boolean = false;\r\n\r\n  @action\r\n  updateShowAllVehicleTypes= (val: boolean) => {\r\n    this.showAllVehicleTypes = val;\r\n    if (this.showAllVehicleTypes) this.vehicleType = FC.initVehicleTypesFull();\r\n    else this.vehicleType = FC.initVehicleTypes();\r\n  }\r\n\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Severity\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  injurySeverity: IColumnFilter\r\n\r\n  @action\r\n  updateInjurySeverity = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.injurySeverity, aType, val);\r\n  }\r\n\r\n  @computed get isValidSeverity() {\r\n    const res = !this.injurySeverity.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  @observable\r\n  casualtiesNames:string = 'casualties';\r\n\r\n  @action\r\n  setCasualtiesNames = (injurySeverity:IColumnFilter) => {\r\n    let res = 'casualties';\r\n    const deadChecker : IFilterChecker = injurySeverity.arrTypes[0];\r\n    const sevIngChecker : IFilterChecker = injurySeverity.arrTypes[1];\r\n    if (deadChecker.checked && !sevIngChecker.checked) res = 'killed';\r\n    else if (!deadChecker.checked && sevIngChecker.checked) res = 'severely-injured';\r\n    this.casualtiesNames = res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // where\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  isMultipleCities: boolean = false;\r\n\r\n  @action\r\n  setIsMultipleCities = (isMulti :boolean) => {\r\n    this.isMultipleCities = isMulti;\r\n  }\r\n\r\n\r\n  @observable\r\n  cities: string[] = [];\r\n\r\n  @action\r\n  updateCities = (names: string[]) => {\r\n    this.cities = names;\r\n    if (this.cities.length === 0) {\r\n      this.streets = [];\r\n    }\r\n  }\r\n\r\n  @observable\r\n  cityResult: string = '';\r\n\r\n  // @computed get cityResult() {\r\n  //   let res = (this.cities.length >= 1) ? this.cities[0] : '';\r\n  //   if (window.location.pathname === '/city' && this.onInitCityPage && res === '')\r\n  //   {\r\n  //     res = '  -';\r\n  //     this.onInitCityPage = false;\r\n  //   }\r\n  //   return res;\r\n  // };\r\n\r\n  // @observable\r\n  // onInitCityPage = true;\r\n\r\n  // setAddressBar = autorun(() => {\r\n  //   if (window.history.pushState && window.location.pathname === '/city') {\r\n  //     const newurl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?name=${this.cityResult}`;\r\n  //     window.history.pushState({ path: newurl }, '', newurl);\r\n  //   }\r\n  // });\r\n\r\n  // submitCityFilter = autorun(() => {\r\n  //   if (window.location.pathname === '/city' && this.cityResult !== '') {\r\n  //     this.submitFilter();\r\n  //   }\r\n  // });\r\n\r\n  @observable\r\n  streets: string[] = [];\r\n\r\n  @action\r\n  updateStreets = (names: string) => {\r\n    this.streets = names.split(',');\r\n  }\r\n\r\n  @observable\r\n  cityPopSizeRange:string = '{\"min\":-1,\"max\":-1}';\r\n\r\n  @action\r\n  setCityPopSizeRange = (range: string) => {\r\n    this.cityPopSizeRange = range;\r\n  }\r\n\r\n  @observable\r\n  roadSegment: string[] = [];\r\n\r\n  @action\r\n  updateRoadSegment = (names: string) => {\r\n    this.roadSegment = names.split(',');\r\n  }\r\n\r\n  @observable\r\n  roadTypes: IColumnFilter;\r\n\r\n  @action\r\n  updateRoadType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.roadTypes, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhere() {\r\n    const res = !this.roadTypes.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // when\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  startYear: number = 2015;\r\n\r\n  @action\r\n  setStartYear = (year:string) => {\r\n    this.startYear = parseInt(year);\r\n  }\r\n\r\n  @observable\r\n  endYear: number = 2019;\r\n\r\n  @action\r\n  setEndYear = (year:string) => {\r\n    this.endYear = parseInt(year);\r\n  }\r\n\r\n  @observable\r\n  dayNight: IColumnFilter;\r\n\r\n  @action\r\n  updateDayNight = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.dayNight, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhen() {\r\n    const res = !this.dayNight.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // who\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  genderTypes: IColumnFilter\r\n\r\n  @action\r\n  updateGenderType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.genderTypes, aType, val);\r\n  }\r\n\r\n  @observable\r\n  ageTypes: IColumnFilter;\r\n\r\n  @action\r\n  updateAgeType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.ageTypes, aType, val);\r\n  }\r\n\r\n  @observable\r\n  populationTypes: IColumnFilter;\r\n\r\n  @action\r\n  updatePopulationType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.populationTypes, aType, val);\r\n  }\r\n\r\n  // injTypes\r\n  @observable\r\n  injTypes: IColumnFilter;\r\n\r\n  @action\r\n  updateInjuerdType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.injTypes, aType, val);\r\n  }\r\n\r\n  @computed get isValidWho() {\r\n    const res = !this.injTypes.isAllValsFalse && !this.genderTypes.isAllValsFalse\r\n    && !this.ageTypes.isAllValsFalse && !this.populationTypes.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  @observable\r\n  accidentType: IColumnFilter;\r\n\r\n  @action\r\n  updateAccidentType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.accidentType, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhat() {\r\n    const res = !this.accidentType.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What Vehicle\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  vehicleType: IColumnFilter;\r\n\r\n  @action\r\n  updateVehicleType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.vehicleType, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhatVehicle() {\r\n    const res = !this.vehicleType.isAllValsFalse;\r\n    return res;\r\n  }\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What Road\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  @observable\r\n  speedLimit: IColumnFilter;\r\n\r\n  updateSpeedLimit = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.speedLimit, aType, val);\r\n  }\r\n\r\n  @observable\r\n  roadWidth: IColumnFilter;\r\n\r\n  @action\r\n  updateRoadWidth = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.roadWidth, aType, val);\r\n  }\r\n\r\n  @observable\r\n  separator: IColumnFilter;\r\n\r\n  @action\r\n  updateSeparator = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.separator, aType, val);\r\n  }\r\n\r\n  @observable\r\n  oneLane: IColumnFilter;\r\n\r\n  @action\r\n  updateOneLane = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.oneLane, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhatRoad() {\r\n    const res = !this.speedLimit.isAllValsFalse && !this.roadWidth.isAllValsFalse\r\n    && !this.separator.isAllValsFalse && !this.oneLane.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ////////////////////////////////////////////////////////////////////////////////////////////\r\n  // data\r\n  // ////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  dataAllInjuries: Casualty[] = [];\r\n\r\n  @action\r\n  updateAllInjuries = (data: Casualty[]) => {\r\n    // console.log(\"updateAllInjuries \",data.length)\r\n    this.setMarkersLoadStep(2);\r\n    this.dataAllInjuries = data;\r\n    this.rootStore.mapStore.setBounds(data, this.cities);\r\n    if (this.rootStore.mapStore.bboxType === BBoxType.LOCAL_BBOX) {\r\n      this.rootStore.mapStore.getMarkersInLocalBBox(0.1);\r\n    }\r\n  }\r\n\r\n  @observable\r\n  dataMarkersLean: Casualty[] = []\r\n\r\n  @action\r\n  updateDataMarkersLean = (data: Casualty[]) => {\r\n    // console.log(\"updateDataMarkersLean \",data.length)\r\n    this.setMarkersLoadStep(1);\r\n    this.dataMarkersLean = data;\r\n  }\r\n\r\n  // casualties groupd by yeras, filterd only by injurySeverity\r\n  @observable\r\n  dataByYears: any[] = []\r\n\r\n  // casualties groupd by yeras, filterd on main filter\r\n  @observable\r\n  dataFilterdByYears: any[] = []\r\n\r\n  // casualties groupd by some group, filterd on main filter\r\n  @observable\r\n  dataFilterd: any[] = []\r\n\r\n  // casualties groupd by 2 groups, filterd on main filter\r\n  @observable\r\n  dataGroupby2: any[] = []\r\n\r\n  @observable\r\n  isLoading: boolean = false;\r\n\r\n  @computed get isValidAllFilters() {\r\n    const res = this.isValidSeverity && this.isValidWhen && this.isValidWho\r\n    && this.isValidWhere && this.isValidWhat && this.isValidWhatVehicle && this.isValidWhatRoad;\r\n    return res;\r\n  }\r\n\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // group by\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  groupBy: GroupBy;\r\n\r\n  @action\r\n  updateGroupby = (key: string) => {\r\n    this.groupBy = this.groupByDict[key];\r\n    if (this.groupBy.text === 'CityByPop') this.submitfilterdGroupByPop();\r\n    else this.submitfilterdGroup(this.groupBy);\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n  }\r\n\r\n  @observable\r\n  groupByDict: any = {}\r\n\r\n  @action\r\n  submitGroupByYears = () => {\r\n    const filtermatch = this.getfilterBySeverityAndCity();\r\n    const filter = FiterUtils.getFilterGroupBy(filtermatch, 'accident_year');\r\n    fetchAggregate(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined) this.dataByYears = data;\r\n      });\r\n  }\r\n\r\n  @action\r\n  submitfilterdGroupByYears = () => {\r\n    const range = JSON.parse(this.cityPopSizeRange);\r\n    const filtermatch = this.getFilter(null);\r\n    const filter = FiterUtils.getFilterGroupBy(filtermatch, 'accident_year', range.min, range.max);\r\n    fetchAggregate(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined) this.dataFilterdByYears = data;\r\n      });\r\n  }\r\n\r\n  @action\r\n  submitfilterdGroup = (aGroupBy: GroupBy) => {\r\n    const range = JSON.parse(this.cityPopSizeRange);\r\n    const filtermatch = this.getFilter(null);\r\n    const filter = FiterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, '', aGroupBy.limit);\r\n    // console.log(filter);\r\n    fetchAggregate(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined) this.dataFilterd = data;\r\n      });\r\n  }\r\n\r\n  @action\r\n  submitfilterdGroupByPop = () => {\r\n    const range = JSON.parse(this.cityPopSizeRange);\r\n    const filtermatch = this.getFilter(null);\r\n    const filter = FiterUtils.getFilterGroupByPop(filtermatch, range.min, range.max, -1, 15);\r\n    // console.log(filter);\r\n    fetchAggregate(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined) {\r\n          this.dataFilterd = data;\r\n        }\r\n      });\r\n  }\r\n\r\n  @action\r\n  submitfilterdGroup2 = (aGroupBy: GroupBy, groupName2: string) => {\r\n    const range = JSON.parse(this.cityPopSizeRange);\r\n    const filtermatch = this.getFilter(null);\r\n    const filter = FiterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, groupName2, aGroupBy.limit);\r\n    // console.log(filter)\r\n    fetchAggregate(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined && data.length > 0) {\r\n          try {\r\n            const fixData = this.groupBy2.fixStrcutTable(data);\r\n            this.dataGroupby2 = fixData;\r\n          } catch (error) {\r\n            console.log(error);\r\n            this.dataGroupby2 = [];\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  @observable\r\n  groupBy2: GroupBy2;\r\n\r\n  @action\r\n  updateGroupBy2 = (key: string) => {\r\n    this.groupBy2 = this.group2Dict[key];\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n  }\r\n\r\n  @observable\r\n  group2Dict: any = {}\r\n\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // filters actions\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  isUse2StepsMarkers: boolean = false;\r\n\r\n  @observable\r\n  markersLoadStep: number = 1;\r\n\r\n  @action\r\n  setMarkersLoadStep = (step: number) => {\r\n    if (this.isUse2StepsMarkers) this.markersLoadStep = step;\r\n  }\r\n\r\n  @action\r\n  submitFilter = () => {\r\n    // this.setMarkersLoadStep(0);\r\n    if (this.useLocalDb === 2) {\r\n      this.submitMainDataFilterLocalDb();\r\n    } else {\r\n      if (this.rootStore.mapStore.bboxType === BBoxType.SERVER_BBOX) {\r\n        this.rootStore.mapStore.submintGetMarkersBBox();\r\n      }\r\n      if (this.isUse2StepsMarkers) this.submintGetMarkerFirstStep();\r\n      this.submintMainDataFilter();\r\n    }\r\n    this.submitCityNameAndLocation();\r\n    this.submitGroupByYears();\r\n    this.submitfilterdGroupByYears();\r\n    if (this.groupBy.text === 'CityByPop') this.submitfilterdGroupByPop();\r\n    else this.submitfilterdGroup(this.groupBy);\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n    this.setCasualtiesNames(this.injurySeverity);\r\n    const lang = this.rootStore.uiStore.language;\r\n    if (this.currentPage === 'city') this.rootStore.imageStore.getImagesByPlace(this.cityResult, lang);\r\n  }\r\n\r\n  submintMainDataFilter = () => {\r\n    this.isLoading = true;\r\n    const range = JSON.parse(this.cityPopSizeRange);\r\n    const filterMatch = this.getFilter(null);\r\n    const filter = FiterUtils.getAggFilter(filterMatch, range.min, range.max);\r\n    this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n    // console.log(filter)\r\n    fetchAggregatFilter(filter, 'main')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateAllInjuries(data);\r\n          // write Data to local db\r\n          if (this.useLocalDb === 1) insertToDexie(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  submintGetMarkerFirstStep = () => {\r\n    const range = JSON.parse(this.cityPopSizeRange);\r\n    const filterMatch = this.getFilter(null);\r\n    const filter = FiterUtils.getAggFilter(filterMatch, range.min, range.max);\r\n    fetchAggregatFilter(filter, 'latlon')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateDataMarkersLean(data);\r\n        }\r\n      });\r\n  }\r\n\r\n  submitCityNameAndLocation = () => {\r\n    if (this.cities.length >= 1) {\r\n      const city = this.cities[0];\r\n      const srvCity = new CityService();\r\n      srvCity.getCityByNameHe(city, this.rootStore.mapStore.updateMapCenterByCity);\r\n      const index = 0;\r\n      this.cityResult = this.cities[index];\r\n    } else this.cityResult = '';\r\n  }\r\n\r\n  getFilter = (bounds: any, useBounds: boolean = false) => {\r\n    let filter = '{\"$and\" : [';\r\n    filter += `{\"accident_year\":  { \"$gte\" : ${this.startYear},\"$lte\": ${this.endYear}}}`;\r\n    filter += FiterUtils.getMultiplefilter(this.injurySeverity);\r\n    filter += this.getfilterCity();\r\n    if (useBounds && bounds != null) filter += this.getfilterBounds(bounds);\r\n    filter += FiterUtils.getMultiplefilter(this.dayNight);\r\n    filter += this.getFilterStreets();\r\n    filter += this.getFilterFromArray(this.roadSegment, 'road_segment_name');\r\n    filter += FiterUtils.getMultiplefilter(this.injTypes);\r\n    filter += FiterUtils.getMultiplefilter(this.genderTypes);\r\n    filter += FiterUtils.getMultiplefilter(this.ageTypes);\r\n    filter += FiterUtils.getMultiplefilter(this.populationTypes);\r\n    filter += FiterUtils.getMultiplefilter(this.accidentType);\r\n    filter += FiterUtils.getMultiplefilter(this.vehicleType);\r\n    filter += FiterUtils.getMultiplefilter(this.roadTypes);\r\n    filter += FiterUtils.getMultiplefilter(this.speedLimit);\r\n    filter += FiterUtils.getMultiplefilter(this.roadWidth);\r\n    filter += FiterUtils.getMultiplefilter(this.separator);\r\n    filter += FiterUtils.getMultiplefilter(this.oneLane);\r\n    filter += ']}';\r\n    return filter;\r\n  }\r\n\r\n  @action\r\n  updateFilters = (colFilter: IColumnFilter, aType: number, val: boolean) => {\r\n    colFilter.updateFilter(aType, val);\r\n    // if (colFilter.allTypesOption === -1) colFilter.arrTypes[aType].checked = val;\r\n    // else if (aType === colFilter.allTypesOption) {\r\n    //   colFilter.arrTypes\r\n    //     .forEach((x, index) => x.checked = (index === colFilter.allTypesOption) ? val : !val);\r\n    // } else {\r\n    //   colFilter.arrTypes[colFilter.allTypesOption].checked = false;\r\n    //   colFilter.arrTypes[aType].checked = val;\r\n    // }\r\n  }\r\n\r\n  getfilterBounds = (mapBounds: L.LatLngBounds) => {\r\n    let filter: string = '';\r\n    filter += `,{\"latitude\":  { \"$gte\" : \"${mapBounds.getSouth()}\",\"$lte\": \"${mapBounds.getNorth()}\"}}`;\r\n    filter += `,{\"longitude\":  { \"$gte\" : \"${mapBounds.getWest()}\",\"$lte\": \"${mapBounds.getEast()}\"}}`;\r\n    return filter;\r\n  }\r\n\r\n  getfilterBySeverityAndCity = () => {\r\n    let filter = '{\"$and\" : [';\r\n    filter += '{\"accident_year\":{\"$gte\":2015}}';\r\n    filter += FiterUtils.getMultiplefilter(this.injurySeverity);\r\n    filter += this.getfilterCity();\r\n    filter += ']}';\r\n    return filter;\r\n  }\r\n\r\n  getfilterCity = () => {\r\n    let filter: string = '';\r\n    if (this.cities.length > 0) {\r\n      filter += ',{\"$or\": [';\r\n      filter += this.cities.map((x: string) => `{\"accident_yishuv_name\" : \"${x}\"}`).join(',');\r\n      filter += ']}';\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  getFilterStreets = () => {\r\n    let filter: string = '';\r\n    if (this.streets.length > 0 && this.streets[0] !== '') {\r\n      filter += ',{\"$or\": [';\r\n      filter += this.streets.map((x: string) => `{\"street1_hebrew\" : \"${x.trim()}\"}`).join(',');\r\n      filter += ',';\r\n      filter += this.streets.map((x: string) => `{\"street2_hebrew\" : \"${x.trim()}\"}`).join(',');\r\n      filter += ']}';\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  getFilterFromArray = (arr: string[], filterName: string) => {\r\n    let filter: string = '';\r\n    if (arr.length > 0 && arr[0] !== '') {\r\n      filter += ',{\"$or\": [';\r\n      filter += arr.map((x: string) => `{\"${filterName}\" : \"${x.trim()}\"}`).join(',');\r\n      filter += ']}';\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // local db filters - idb using Dexie.js\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  useLocalDb = 0;\r\n\r\n  submitMainDataFilterLocalDb = () => {\r\n    this.isLoading = true;\r\n    const arrFilters = this.getFilterIDB();\r\n    this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n    // console.log(arrFilters);\r\n    getFromDexie(arrFilters)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateAllInjuries(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  submintGetMarkersBBoxIdb = (mapBounds: L.LatLngBounds) => {\r\n    const arrFilters = this.getFilterBboxIDB(mapBounds);\r\n    getFromDexie(arrFilters)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.rootStore.mapStore.updateDataMarkersInBounds(data);\r\n        }\r\n      });\r\n  }\r\n\r\n  getFilterIDB = () => {\r\n    const arrFilters: any[] = [];\r\n    const years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() };\r\n    arrFilters.push(years);\r\n    this.getfilterCityIDB(arrFilters);\r\n    this.getFilterStreetsIDB(arrFilters);\r\n    this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n    this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n    this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n    this.getMultiplefilterIDB(arrFilters, this.separator);\r\n    this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n    return arrFilters;\r\n  }\r\n\r\n  getFilterBboxIDB = (bounds: L.LatLngBounds) => {\r\n    const arrFilters: any[] = [];\r\n    const bbox = { filterName: 'bbox', p1: bounds.getSouthWest, p2: bounds.getNorthEast };\r\n    arrFilters.push(bbox);\r\n    const years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() };\r\n    arrFilters.push(years);\r\n    this.getfilterCityIDB(arrFilters);\r\n    this.getFilterStreetsIDB(arrFilters);\r\n    this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n    this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n    this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n    this.getMultiplefilterIDB(arrFilters, this.separator);\r\n    this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n    return arrFilters;\r\n  }\r\n\r\n  getMultiplefilterIDB = (arrFilters: any[], colFilter: IColumnFilter) => {\r\n    if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) {\r\n      return;\r\n    }\r\n    let allChecked: boolean = true;\r\n    let arrfilter: string[] = [];\r\n    const iterator = colFilter.arrTypes.values();\r\n    for (const filterCheck of iterator) {\r\n      if (filterCheck.checked) {\r\n        arrfilter = [...arrfilter, ...filterCheck.filters];\r\n      } else {\r\n        allChecked = false;\r\n      }\r\n    }\r\n    if (!allChecked) {\r\n      const filterVals = arrfilter.map((x: string) => {\r\n        if (x === 'null') return null;\r\n        return x;\r\n      });\r\n      const filter = { filterName: colFilter.dbColName, values: filterVals };\r\n      arrFilters.push(filter);\r\n    }\r\n  }\r\n\r\n  getfilterCityIDB = (arrFilters: any[]) => {\r\n    if (this.cities.length > 0) {\r\n      const filter = { filterName: 'accident_yishuv_name', values: this.cities };\r\n      arrFilters.push(filter);\r\n    }\r\n  }\r\n\r\n  getFilterStreetsIDB = (arrFilters: any[]) => {\r\n    if (this.streets.length > 0 && this.streets[0] !== '') {\r\n      const filter1 = { filterName: 'street1_hebrew', values: this.streets.map((x: string) => x.trim()) };\r\n      arrFilters.push(filter1);\r\n      // const filter2 = { filterName: \"street2_hebrew\", values: this.streets.map((x: string) => {x.trim()}) }\r\n      // arrFilters.push(filter2)\r\n    }\r\n  }\r\n\r\n  getFilterFromArrayIDb = (arrFilters: any[], filterName: string, arr: string[]) => {\r\n    if (arr.length > 0 && arr[0] !== '') {\r\n      const filter = { filterName, values: arr.map((x: string) => x.trim()) };\r\n      arrFilters.push(filter);\r\n    }\r\n  }\r\n}\r\n\r\n// autorun(() =>{\r\n//     console.log(store.todos[0])\r\n//     console.log(store.filter)\r\n// })\r\n\r\n// export default store\r\n","import { observable, action, reaction } from 'mobx';\r\nimport i18n from '../i18n';\r\nimport RootStore from './RootStore';\r\n// import autorun  from \"mobx\"\r\n\r\nexport default class UiStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n    this.initLang();\r\n    this.appInitialized = false;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  // ////////////////////////////////////////////\r\n  @observable\r\n  language: string = 'he'\r\n\r\n  @action\r\n  updateLanguage = (lang: string) => {\r\n    this.language = lang;\r\n    localStorage.setItem('lang', JSON.stringify(lang));\r\n  }\r\n\r\n  reactionChangeLang = reaction(\r\n    () => this.language,\r\n    (locale) => {\r\n      i18n.changeLanguage(locale);\r\n    },\r\n  )\r\n\r\n  initLang = () => {\r\n    try {\r\n      const slang = localStorage.getItem('lang');\r\n      if (slang !== null) {\r\n        const lang = JSON.parse(slang);\r\n        this.updateLanguage(lang);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  @observable\r\n  chartType: string = 'BarChart';\r\n\r\n  @observable\r\n  chartTypeList: string[] = ['BarChart', 'PieChart', 'TreeMap'];\r\n\r\n  @action\r\n  updateChartType = (val: string) => {\r\n    this.chartType = val;\r\n  }\r\n\r\n  @observable\r\n  showPercentageChart: boolean = false\r\n\r\n  @action\r\n  updateShowPercentageChart = (val: boolean) => {\r\n    this.showPercentageChart = val;\r\n  }\r\n}\r\n","import IimageEntity from '../stores/ImageEntity';\r\n\r\nexport const fetchListImgByTag = async (tag: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = (lang === '') ? `/api/v1/img/tags/${tag}` : `/api/v1/img/tags/${lang}/${tag}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\nexport const fetchListImgByPlace = async (place: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/place/${lang}/${place}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const uploadImg = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  if (image.file === undefined) return [];\r\n  const formData = new FormData();\r\n  formData.append('titlehe', image.titlehe);\r\n  formData.append('texthe', image.texthe);\r\n  formData.append('image', image.file);\r\n  formData.append('tags', image.tags);\r\n  formData.append('place', image.place);\r\n  if (image.index !== undefined) formData.append('index', image.index?.toString());\r\n  const url = '/api/v1/img/';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    body: formData,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const updateImgProps = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/img/props';\r\n  const response = await fetch(url, {\r\n    method: 'PUT',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: JSON.stringify(image),\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchImg = async (fileName: string):\r\n  Promise<any| undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/${fileName}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response; // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport default fetchImg;\r\n","import { observable, action } from 'mobx';\r\nimport RootStore from './RootStore';\r\nimport {\r\n  fetchListImgByTag, fetchListImgByPlace, updateImgProps, uploadImg,\r\n} from '../services/ImageService';\r\nimport IimageEntity from './ImageEntity';\r\n\r\nexport default class ImageStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  @observable\r\n  imageList: IimageEntity[] = [];\r\n\r\n  @action\r\n  setImageList = (data: IimageEntity[]) => {\r\n    this.imageList = data;\r\n    if (this.imageList.length > 0) this.setCurrImage(this.imageList[0]);\r\n  }\r\n\r\n  @observable\r\n  isLoading: boolean = false;\r\n\r\n  @observable\r\n  currTag: string = '';\r\n\r\n  @action\r\n  setCurrTag = (tag: string) => {\r\n    this.currTag = tag;\r\n    const lang = this.rootStore.uiStore.language;\r\n    this.getImagesByTag(tag, lang);\r\n  }\r\n\r\n  @observable\r\n  currImage: IimageEntity| null = null;\r\n\r\n  @action\r\n  setCurrImage = (image: IimageEntity) => {\r\n    this.currImage = image;\r\n  }\r\n\r\n  @observable\r\n  hideDescription = false;\r\n\r\n  @action\r\n  toggleHideDescription = () => {\r\n    this.hideDescription = !this.hideDescription;\r\n    if (this.hideDescription) {\r\n      document.documentElement.style.setProperty('--image-gallery-description-visable', 'none');\r\n    } else document.documentElement.style.setProperty('--image-gallery-description-visable', 'inherit');\r\n  }\r\n\r\n  setCurrImageVal= <T extends keyof IimageEntity, K extends IimageEntity[T]> (valName: T, val: K) => {\r\n    if (this.currImage !== null) this.currImage[valName] = val;\r\n  }\r\n\r\n  submitImageFile = () => {\r\n    if (this.currImage !== null) {\r\n      // console.log(tags);\r\n      if (this.currImage._id === 0 && this.currImage.file !== undefined) {\r\n        uploadImg(this.currImage);\r\n      } else updateImgProps(this.currImage);\r\n    }\r\n  };\r\n\r\n  getImages = (type :string) => {\r\n    const lang = this.rootStore.uiStore.language;\r\n    if (type === 'city') {\r\n      const city = this.rootStore.filterStore.cityResult;\r\n      this.getImagesByPlace(city, lang);\r\n    } else {\r\n      this.getImagesByTag(this.currTag, lang);\r\n    }\r\n  }\r\n\r\n  getImagesByTag = (tag :string, lang: string) => {\r\n    this.isLoading = true;\r\n    fetchListImgByTag(tag, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  getImagesByPlace = (place :string, lang: string) => {\r\n    // this.isLoading = true;\r\n    fetchListImgByPlace(place, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        // this.isLoading = false;\r\n      });\r\n  }\r\n}\r\n","// https://mobx-react.js.org/recipes-context\r\nimport React from 'react'\r\nimport RootStore from './RootStore';\r\n\r\nexport const store = new RootStore();\r\nexport const StoreContext = React.createContext(store);\r\nexport const useStore = (): RootStore => {\r\n  const store = React.useContext(StoreContext);\r\n  if (!store) {\r\n    // this is especially useful in TypeScript so you don't need to be checking for null all the time\r\n    throw new Error('You have forgot to use StoreProvider, shame on you.')\r\n  }\r\n  return store\r\n};\r\n\r\n/* // see: https://facebook.github.io/create-react-app/docs/adding-custom-environment-variables\r\nif(process.env.NODE_ENV !== 'production') {\r\n  // @ts-ignore\r\n  window['store'] = store;\r\n} */","import FilterStore from './FilterStore';\r\nimport UiStore from './UiStore';\r\nimport MapStore from './MapStore';\r\nimport ImageStore from './ImageStore'\r\n\r\nexport default class RootStore {\r\n    appInitialized = false;\r\n\r\n    constructor() {\r\n      this.uiStore = new UiStore(this);\r\n      this.mapStore = new MapStore(this);\r\n      this.filterStore = new FilterStore(this);\r\n      this.imageStore = new ImageStore(this);\r\n    }\r\n\r\n    uiStore: UiStore;\r\n\r\n    mapStore: MapStore;\r\n\r\n    filterStore: FilterStore;\r\n\r\n    imageStore: ImageStore;\r\n}\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\ninterface IProps {\r\n  title: string;\r\n  showModal: boolean;\r\n  setShow: (show: boolean) => void;\r\n}\r\n\r\nconst ConfigFilterModal: React.FC<IProps> = ({ title, showModal, setShow, children }) => {\r\n  const { t } = useTranslation();\r\n  const handleClose = () => setShow(false);\r\n  return (\r\n    <Modal show={showModal} onHide={handleClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>{t(title)}</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {children}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          {t('Close')}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\nexport default ConfigFilterModal;\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAn0lEQVRIS+2VwRKAIAhE2Xv9/4fWncYmHXJA1Gi65LX1uQGroI7FzCxlAOBtcwUJEALOEOmqBdb0yczNcQ3wfrf+Ls0U8FNoPiTD3wdrTQophQPeAayXZiOiRTtUrbEFtmZW68kN7DStOK0dMrPp/By3FthLWHPvJ2Aimi+FrJ3XkBFtb6Tjx20kJP9dUaplRlrGOvSitxoV8jRp8BnwAUhcjAegZDYhAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAOUlEQVR4Ae3WgQUAMAwEwI6WzTL6txsEiOKOB+CJJweAQZLOnj4ThWBh9vXSSymzH/TnJwPvh0IAXORfNuG7KzwXAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\n// @ts-ignore\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport citisNamesHeb from '../../assets/cities_names_heb.json';\r\n\r\ninterface IProps {\r\n    isMultiple?: boolean\r\n}\r\n\r\nconst CitySelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { filterStore } = useStore();\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Group controlId=\"exampleForm.ControlCity\">\r\n      <Form.Label className=\"filterLable\">\r\n        {t('City')}\r\n:\r\n      </Form.Label>\r\n      <Typeahead\r\n        id=\"typeaheadCity\"\r\n                // defaultSelected={[store.city]}\r\n        onChange={(selected: string[]) => {\r\n          filterStore.updateCities(selected);\r\n        }}\r\n        options={citisNamesHeb}\r\n        multiple={isMultiple}\r\n        selected={filterStore.cities}\r\n      />\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default CitySelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {}\r\nconst StreetSelector: React.FC<IProps> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { t } = useTranslation();\r\n  if (filterStore.cities.length > 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlStreet\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('Street')}\r\n:\r\n        </Form.Label>\r\n        <Form.Control type=\"input\" placeholder=\"\" value={filterStore.streets.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { filterStore.updateStreets(e.target.value); }} />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default StreetSelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n    isMultiple?: boolean\r\n}\r\nconst RoadSegmentSelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { cities, roadSegment, updateRoadSegment } = filterStore;\r\n  if (cities.length === 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlRoadSegment\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('RoadSegment')}\r\n          :\r\n        </Form.Label>\r\n        <Form.Control type=\"input\" placeholder=\"\" value={roadSegment.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { updateRoadSegment(e.target.value); }} />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default RoadSegmentSelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Checkbox from '../atoms/Checkbox';\r\nimport { IColumnFilter } from '../../stores/ColumnFilter';\r\n\r\ninterface IProps {\r\n  formName: string,\r\n  colFilter : IColumnFilter,\r\n  onChange: (aType: number, val: boolean) => void\r\n}\r\n\r\nconst GroupCheckbox: React.FC<IProps> = observer(({ formName, colFilter, onChange }) => {\r\n  const styleFeedback = {\r\n    marginTop: '.25rem',\r\n    fontSize: '80%',\r\n    color: '#dc3545',\r\n  };\r\n  const { t } = useTranslation();\r\n  const { isAllValsFalse, name, arrTypes } = colFilter;\r\n  const onGroupChange = (aType: number, checked: boolean) => {\r\n    // checkValid(checked)\r\n    onChange(aType, checked);\r\n  };\r\n  const feedback = (\r\n    <div style={styleFeedback}>\r\n      {' '}\r\n      {t('check_one_checkbox')}\r\n    </div>\r\n  );\r\n  const isvalid = (isAllValsFalse) ? feedback : null;\r\n\r\n  return (\r\n    <Form.Group controlId={`${formName}.Control${name}`}>\r\n      <Form.Label className=\"filterLable\">\r\n        {t(name)}\r\n:\r\n      </Form.Label>\r\n      {arrTypes.map((fChecker, index) => (\r\n        <Checkbox\r\n          key={fChecker.label}\r\n          label={fChecker.label}\r\n          group={colFilter.name}\r\n          id={index}\r\n          checked={fChecker.checked}\r\n          onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n            onGroupChange(index, e.target.checked);\r\n          }}\r\n        />\r\n      ))}\r\n      {isvalid}\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default GroupCheckbox;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\n\r\ninterface Props {\r\n    onChange: (val:string) => void;\r\n    value: string;\r\n}\r\nconst styleSelect = {\r\n  width: '150px',\r\n};\r\n\r\nconst SelectCityPop: React.FC<Props> = observer(({ onChange, value }) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <div>\r\n      <Form.Group as={Col} controlId=\"cityForm.SelectPopSize\">\r\n        <Form.Label className=\"filterLable\">\r\n        { t('city_size')}:\r\n        </Form.Label>\r\n        <Form.Control \r\n          as=\"select\"\r\n          style={styleSelect}\r\n          value={value}\r\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => { onChange(e.target.value); }}\r\n        >\r\n          <option value='{\"min\":-1,\"max\":-1}'>{t('all')}</option>\r\n          <option value='{\"min\":200000,\"max\":1000000}'>{t('200K-1000K')}</option>\r\n          <option value='{\"min\":100000,\"max\":200000}'>{t('100K-200K')}</option>\r\n          <option value='{\"min\":50000,\"max\":100000}'>{t('50K-100K')}</option>\r\n          <option value='{\"min\":20000,\"max\":50000}'>{t('20K-50K')}</option>\r\n          <option value='{\"min\":10000,\"max\":20000}'>{t('10K-20K')}</option>\r\n          <option value='{\"min\":0,\"max\":10000}'>{t('0-10K')}</option>\r\n        </Form.Control>\r\n      </Form.Group>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SelectCityPop;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Card from 'react-bootstrap/Card';\r\n// @ts-ignore\r\nimport CitySelector from '../molecules/CitySelector';\r\nimport StreetSelector from '../molecules/StreetSelector';\r\nimport RoadSegmentSelector from '../molecules/RoadSegmentSelector';\r\nimport GroupCheckbox from '../molecules/GroupCheckBox';\r\nimport SelectCityPop from '../atoms/SelectCityPop';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n  activeCardKey: number\r\n}\r\nconst STYLE_TOGGLE_WARNING = {\r\n  color: '#dc3545',\r\n};\r\nconst STYLE_TOGGLE_NORMAL = {\r\n  color: '#007bff',\r\n};\r\n\r\nconst FilterRequest: React.FC<IProps> = observer(({ activeCardKey = 0 }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    injurySeverity, updateInjurySeverity, isLoading, isValidAllFilters,\r\n  } = filterStore;\r\n  return (\r\n    <Form>\r\n      <Accordion defaultActiveKey={activeCardKey.toString()}>\r\n        <CardFilterWhen />\r\n        <CardFilterWhere />\r\n        <CardFilterWho />\r\n        <CardFilterWhat />\r\n        <CardFilterWhatVehicle />\r\n        <CardFilterWhatRoad />\r\n      </Accordion>\r\n      <GroupCheckbox formName=\"exampleForm\" colFilter={injurySeverity} onChange={updateInjurySeverity} />\r\n      <Button\r\n        variant=\"primary\"\r\n        disabled={isLoading || !isValidAllFilters}\r\n        onClick={() => { filterStore.submitFilter(); }}\r\n      >\r\n        {isLoading ? t('Loading') : t('Submit')}\r\n        {' '}\r\n\r\n      </Button>\r\n    </Form>\r\n  );\r\n});\r\n\r\nconst CardFilterWhen = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    isValidWhen, startYear, setStartYear, endYear, setEndYear, dayNight, updateDayNight,\r\n  } = filterStore;\r\n  const styleToggle = isValidWhen ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"0\" style={styleToggle}>\r\n          {t('When')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"0\" className=\"filterControls\">\r\n        <Card.Body>\r\n          <div>\r\n            <Form.Row>\r\n              <Form.Group as={Col} controlId=\"exampleForm.ControlSelectStartYear\">\r\n                <Form.Label className=\"filterLable\">\r\n                  {' '}\r\n                  {t('FromYear')}\r\n:\r\n                </Form.Label>\r\n                <Form.Control as=\"select\" defaultValue={startYear} onChange={(e: ChangeEvent<HTMLInputElement>) => { setStartYear(e.target.value); }}>\r\n                  <option>2015</option>\r\n                  <option>2016</option>\r\n                  <option>2017</option>\r\n                  <option>2018</option>\r\n                  <option>2019</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group as={Col} controlId=\"exampleForm.ControlSelectEndYear\">\r\n                <Form.Label className=\"filterLable\">\r\n                  {' '}\r\n                  {t('ToYear')}\r\n:\r\n                </Form.Label>\r\n                <Form.Control as=\"select\" defaultValue={endYear} onChange={(e: ChangeEvent<HTMLInputElement>) => { setEndYear(e.target.value); }}>\r\n                  <option>2015</option>\r\n                  <option>2016</option>\r\n                  <option>2017</option>\r\n                  <option>2018</option>\r\n                  <option>2019</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n            </Form.Row>\r\n            <GroupCheckbox formName=\"exampleForm\" colFilter={dayNight} onChange={updateDayNight} />\r\n          </div>\r\n        </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nconst CardFilterWhere = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    isValidWhere, roadTypes, updateRoadType, isMultipleCities, cityPopSizeRange, setCityPopSizeRange,\r\n  } = filterStore;\r\n  const styleToggle = isValidWhere ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"1\" style={styleToggle}>\r\n          {t('Where')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"1\" className=\"filterControls\">\r\n        <div>\r\n          <CitySelector isMultiple={isMultipleCities} />\r\n          <StreetSelector />\r\n          <RoadSegmentSelector />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={roadTypes} onChange={updateRoadType} />\r\n          <SelectCityPop value={cityPopSizeRange} onChange={(val:string) => setCityPopSizeRange(val)} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nconst CardFilterWho = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    isValidWho, injTypes, updateInjuerdType, genderTypes, updateGenderType,\r\n  } = filterStore;\r\n  const {\r\n    ageTypes, updateAgeType, populationTypes, updatePopulationType,\r\n  } = filterStore;\r\n  const styleToggle = isValidWho ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"2\" style={styleToggle}>\r\n          {t('Who')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"2\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={injTypes} onChange={updateInjuerdType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={genderTypes} onChange={updateGenderType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={ageTypes} onChange={updateAgeType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={populationTypes} onChange={updatePopulationType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nconst CardFilterWhat = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhat, accidentType, updateAccidentType } = filterStore;\r\n  const styleToggle = isValidWhat ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"3\" style={styleToggle}>\r\n          {t('What')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"3\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={accidentType} onChange={updateAccidentType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\n\r\nconst CardFilterWhatVehicle = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhatVehicle, vehicleType, updateVehicleType } = filterStore;\r\n  const styleToggle = isValidWhatVehicle ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"4\" style={styleToggle}>\r\n          {t('WhatVehicle')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"4\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={vehicleType} onChange={updateVehicleType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\n\r\nconst CardFilterWhatRoad = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhatRoad } = filterStore;\r\n  const {\r\n    speedLimit, updateSpeedLimit, roadWidth, updateRoadWidth,\r\n  } = filterStore;\r\n  const {\r\n    separator, updateSeparator, oneLane, updateOneLane,\r\n  } = filterStore;\r\n  const styleToggle = isValidWhatRoad ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"5\" style={styleToggle}>\r\n          {t('WhatRoad')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"5\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={speedLimit} onChange={updateSpeedLimit} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={roadWidth} onChange={updateRoadWidth} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={separator} onChange={updateSeparator} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={oneLane} onChange={updateOneLane} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nexport default FilterRequest;\r\n","import React, { ChangeEvent } from 'react';\r\n// import { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Checkbox from '../atoms/Checkbox';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps { }\r\nconst ConfigFilter: React.FC<IProps> = observer(() => {\r\n  // const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { showAllVehicleTypes, updateShowAllVehicleTypes } = filterStore;\r\n  return (\r\n    <Form.Group controlId=\"ConfigFile.ControlVehicles\">\r\n      <Checkbox\r\n        key={1}\r\n        label=\"ShowAllVehicleTypes\"\r\n        group=\"filterConfig\"\r\n        id={1}\r\n        checked={showAllVehicleTypes}\r\n        onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n          updateShowAllVehicleTypes(e.target.checked);\r\n        }}\r\n      />\r\n    </Form.Group>\r\n\r\n  );\r\n});\r\nexport default ConfigFilter;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Collapse from 'react-bootstrap/Collapse';\r\nimport FilterRequest from './FilterRequest';\r\nimport ConfigFilterModal from './ConfigFilterModal';\r\nimport ConfigFilter from '../molecules/ConfigFilter';\r\nimport gearlogo from '../../assets/gear2.png';\r\n\r\ninterface IProps {\r\n  activeCardKey?: number\r\n}\r\nconst styles = {\r\n  buttonStyle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  iconStyle: {\r\n    height: '21px',\r\n    width: '21px',\r\n    paddingTop: '0px',\r\n    paddingBottom: '1px',\r\n  },\r\n};\r\n\r\nconst FilterPanel: React.FC<IProps> = ({ activeCardKey = 0 }) => {\r\n  const [open, setOpen] = useState(true);\r\n  const [showModel, setShowModal] = useState(false);\r\n  const { t } = useTranslation();\r\n  return (\r\n    <>\r\n      <div style={styles.buttonStyle}>\r\n        <Button onClick={() => { setOpen(!open); }} aria-controls=\"example-collapse-text\" aria-expanded={open}>\r\n          {t('Hide')}\r\n        </Button>\r\n        <Button onClick={() => { setShowModal(!showModel); }}>\r\n          <img src={gearlogo} alt=\"settings\" style={styles.iconStyle} />\r\n        </Button>\r\n      </div>\r\n      <ConfigFilterModal title=\"Filter Options\" showModal={showModel} setShow={setShowModal}>\r\n        <ConfigFilter />\r\n      </ConfigFilterModal>\r\n      <Collapse in={open}>\r\n        <div id=\"example-collapse-text\">\r\n          <FilterRequest activeCardKey={activeCardKey} />\r\n        </div>\r\n      </Collapse>\r\n    </>\r\n  );\r\n};\r\nexport default FilterPanel;\r\n","import React from 'react';\r\n\r\ninterface IProps {\r\n}\r\ninterface IState {\r\n  hasError: boolean;\r\n}\r\nclass ErrorBoundary extends React.Component<IProps, IState> {\r\n  constructor(props:IProps) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error:any) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error:any, errorInfo:any) {\r\n    // You can also log the error to an error reporting service\r\n    // logErrorToMyService(error: TypeError, errorInfo);\r\n    console.error(error);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\nexport default ErrorBoundary;\r\n","import React, {\r\n  useState, FunctionComponent, lazy, Suspense,\r\n} from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport ErrorBoundary from '../atoms/ErrorBoundary';\r\n// import MapAccidents from '../organisms/MapAccidents'\r\n// import AccidentsTable from '../organisms/AccidentsTable'\r\n// import GroupByGraphsPanel from '../organisms/GroupByGraphsPanel'\r\n// import { GroupByTablesPanel } from '../organisms/GroupByTablesPanel'\r\n// import ImageGallery from '../organisms/ImageGallery';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n    type: string;\r\n    defaultKey?: string;\r\n}\r\n\r\nconst GroupByGraphsPanel = lazy(() => import('../organisms/GroupByGraphsPanel'));\r\nconst GroupByTablesPanel = lazy(() => import('../organisms/GroupByTablesPanel'));\r\nconst MapAccidents = lazy(() => import('../organisms/MapAccidents'));\r\nconst AccidentsTable = lazy(() => import('../organisms/AccidentsTable'));\r\nconst MyImageGallery = lazy(() => import('../organisms/MyImageGallery'));\r\nexport const TabsTemplate: FunctionComponent<IProps> = observer(({ type, defaultKey = 'charts' }) => {\r\n  const style = {\r\n    marginTop: '20px',\r\n  };\r\n  const { t } = useTranslation();\r\n  const [activeKey] = useState(defaultKey);\r\n  const { mapStore } = useStore();\r\n  return (\r\n    <Tabs\r\n      mountOnEnter\r\n      defaultActiveKey={activeKey}\r\n      id=\"main-tabs\"\r\n      onSelect={(tabActiveKey: string) => {\r\n        if (tabActiveKey === 'map') {\r\n          // map is renderd only when tab is shown to prevent leaflet bug\r\n          mapStore.isReadyToRenderMap = true;\r\n        } else mapStore.isReadyToRenderMap = false;\r\n      }}\r\n    >\r\n      <Tab style={style} eventKey=\"charts\" title={t('Charts')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Charts...</div>}>\r\n            <GroupByGraphsPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"grouptables\" title={t('Groups')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Groups tables...</div>}>\r\n            <GroupByTablesPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"map\" title={t('Map')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Map...</div>}>\r\n            <MapAccidents />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"table\" title={t('Table')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Accidents Table...</div>}>\r\n            <div className=\"col-auto\"><AccidentsTable /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"image\" title={t('Images')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Images...</div>}>\r\n            <div className=\"col-auto\"><MyImageGallery type={type} /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n    </Tabs>\r\n  );\r\n});\r\nexport default TabsTemplate;\r\n","import React, { useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport FilterPanel from '../organisms/FilterPanel';\r\nimport TabsTemplate from './TabsTemplate';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps { }\r\nconst HomeTemplate: React.FC<IProps> = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { mapStore, filterStore } = useStore();\r\n  const {\r\n    setCurrentPage, setIsMultipleCities, updateCities, submitFilter,\r\n  } = filterStore;\r\n  setCurrentPage('home');\r\n  setIsMultipleCities(true);\r\n  mapStore.isReadyToRenderMap = false;\r\n  useEffect(() => {\r\n    // mapStore.initBounds();\r\n    updateCities([]);\r\n    submitFilter();\r\n  }, [submitFilter, updateCities]);\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row \">\r\n          <div className=\"p-2 col-md-2\"><FilterPanel /></div>\r\n          <main className=\"col-md-10\">\r\n            <h4>{t('Israel')}</h4>\r\n            <TabsTemplate type=\"home\" />\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nexport default HomeTemplate;\r\n","import React from 'react';\r\nimport HomeTemplate from '../templates/HomeTemplate';\r\n\r\ninterface IProps { }\r\n\r\nconst HomePage: React.FC<IProps> = () => (\r\n  <HomeTemplate />\r\n);\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n// import { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { TabsTemplate } from './TabsTemplate';\r\nimport FilterPanel from '../organisms/FilterPanel';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport citisNamesHeb from '../../assets/cities_names_heb.json';\r\n\r\n// A custom hook that builds on useLocation to parse\r\n// the query string for you.\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n// get city name by query by url\r\nfunction useCityNamefromQuery() {\r\n  const query = useQuery();\r\n  let res = ['  -'];\r\n  const name = query.get('name');\r\n  let found = false;\r\n  if (name !== null) found = citisNamesHeb.includes(name);\r\n  if (found) {\r\n    res = [citisNamesHeb.find((element) => element === name!)!];\r\n  }\r\n  return res;\r\n}\r\n\r\nexport const CityLable: React.FC<{}> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { cityResult } = filterStore;\r\n  return (\r\n    <h4>{cityResult}</h4>\r\n  );\r\n});\r\n\r\ninterface IProps { }\r\nconst CityTemplate: React.FC<IProps> = observer(() => {\r\n  // const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  filterStore.setCurrentPage('city');\r\n  filterStore.isMultipleCities = false;\r\n  let { cityResult } = filterStore;\r\n  if (cityResult === '') {\r\n    const cityName = useCityNamefromQuery();\r\n    filterStore.updateCities(cityName);\r\n    cityResult = cityName[0];\r\n    filterStore.submitFilter();\r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row \">\r\n          <div className=\"p-2 col-md-2\"><FilterPanel activeCardKey={1} /></div>\r\n          <main className=\"col-md-10\">\r\n            <CityLable />\r\n            <TabsTemplate type=\"city\" defaultKey=\"map\" />\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nexport default CityTemplate;\r\n","import React from 'react'\r\nimport CityTemplate from '../templates/CityTemplate'\r\n\r\ninterface IProps { }\r\n\r\nexport const CityPage: React.FC<IProps> = () => {\r\n  return (\r\n    <CityTemplate />\r\n  )\r\n}\r\n","import React, { MouseEvent } from 'react';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport ToggleButton from 'react-bootstrap/ToggleButton';\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\nconst LanguageSelector = observer(() => {\r\n  const { uiStore } = useStore();\r\n  const style: any = document.getElementById('style-direction');\r\n  if (style !== null) {\r\n    if (uiStore.language === 'he') {\r\n      style.href = './bootstrap.rtl.min.css';\r\n      // changeLanguage('he')\r\n      document.body.classList.remove('dir-ltr');\r\n      document.body.classList.add('dir-rtl');\r\n    } else {\r\n      style.href = './bootstrap.min.css';\r\n      // changeLanguage('en')\r\n      document.body.classList.remove('dir-rtl');\r\n      document.body.classList.add('dir-ltr');\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <ButtonGroup toggle size=\"sm\" className=\"languageSelector\">\r\n        <ToggleButton type=\"radio\" name=\"radiolang\" value=\"he\" defaultChecked onClick={(e: MouseEvent) => { uiStore.updateLanguage('he'); }}>\r\n          Heb\r\n        </ToggleButton>\r\n        <ToggleButton type=\"radio\" name=\"radiolang\" value=\"en\" onClick={(e: MouseEvent) => { uiStore.updateLanguage('en'); }}>\r\n          Eng\r\n        </ToggleButton>\r\n      </ButtonGroup>\r\n    </div>\r\n  );\r\n});\r\nexport default LanguageSelector;","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { Link } from 'react-router-dom';\r\n// import Button from 'react-bootstrap/Button';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport menuIcon from '../../assets/menu_white.png';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n}\r\nconst ButtonMenu: React.FC<IProps> = observer((() => {\r\n  const styleButton = {\r\n    backgroundColor: '#007bff',\r\n  };\r\n  const styleLink = {\r\n    color: '#004ba0',\r\n  };\r\n  const { t } = useTranslation();\r\n  const { uiStore } = useStore();\r\n  const alignRight = (uiStore.language === 'he');\r\n  return (\r\n    <div>\r\n      {/* <Button variant=\"primary\" size=\"sm\" onClick={() => { }}>\r\n                <img src={menuIcon} alt=\"menu\" height=\"25\" width=\"25\" />\r\n            </Button> */}\r\n      <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={styleButton}>\r\n          <img src={menuIcon} alt=\"menu\" height=\"25\" width=\"25\" />\r\n        </Dropdown.Toggle>\r\n        <Dropdown.Menu alignRight={alignRight}>\r\n          <Dropdown.Item as=\"button\"><Link style={styleLink} to=\"/\">{t('Home')}</Link></Dropdown.Item>\r\n          <Dropdown.Item as=\"button\"><Link style={styleLink} to=\"/city\">{t('Cities')}</Link></Dropdown.Item>\r\n          <Dropdown.Item as=\"button\"><Link style={styleLink} to=\"/about\">{t('About')}</Link></Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  );\r\n}));\r\nexport default ButtonMenu;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\nimport LanguageSelector from '../molecules/LanguageSelector';\r\nimport ButtonMenu from '../atoms/ButtonMenu';\r\nimport logo from '../../assets/safety-logo.png';\r\n\r\n\r\ninterface IProps {\r\n  title: string\r\n}\r\ninterface IProps { }\r\nexport const Header: React.FC<IProps> = ({ title }) => {\r\n  const divStyle = {\r\n    display: 'flex',\r\n    flexFlow: 'row wrap',\r\n  };\r\n  const { t } = useTranslation();\r\n  const [showNavMenu, setShowNavMenu] = useState(getShowNavMenu(window.innerWidth));\r\n  const navMenu = (showNavMenu) ? (\r\n    <div style={divStyle}>\r\n      <nav className=\"App-nav\">\r\n        <Link to=\"/\">{t('Home')}</Link>\r\n        <Link to=\"/city\">{t('Cities')}</Link>\r\n        <Link to=\"/about\">{t('About')}</Link>\r\n      </nav>\r\n    </div>\r\n  ) : <ButtonMenu />;\r\n  React.useEffect(() => {\r\n    function handleResize() {\r\n      const show = getShowNavMenu(window.innerWidth);\r\n      setShowNavMenu(show);\r\n    }\r\n    window.addEventListener('resize', handleResize);\r\n    return (() => { window.removeEventListener('resize', handleResize); });\r\n  });\r\n  return (\r\n    <header className=\"App-header\">\r\n      <div style={divStyle}>\r\n        <img src={logo} alt=\"Safety-Data logo\" height=\"45\" width=\"188\" />\r\n        {navMenu}\r\n      </div>\r\n      <div className=\"languageSelector\">\r\n        <LanguageSelector />\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\nconst getShowNavMenu = (width: number) => {\r\n  let res = true;\r\n  if (width <= 530) res = false;\r\n  return res;\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// export default class Footer extends React.Component {\r\ninterface IProps { }\r\nexport const Footer: React.FC<IProps> = () => {\r\n  const divStyle = {\r\n    display: 'flex',\r\n    flexFlow: 'row wrap',\r\n  };\r\n  const { t } = useTranslation();\r\n  return (\r\n    <footer style={divStyle}>\r\n      <nav className=\"App-nav\">\r\n        <Link to=\"/\">{t('Home')}</Link>\r\n        <Link to=\"/city\">{t('Cities')}</Link>\r\n        <Link to=\"/about\">{t('About')}</Link>\r\n      </nav>\r\n    </footer>\r\n  );\r\n};\r\nexport default Footer;\r\n","import React, { lazy, Suspense } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport './i18n';\r\nimport './App.css';\r\nimport Card from 'react-bootstrap/Card';\r\nimport HomePage from './components/pages/HomePage';\r\nimport { CityPage } from './components/pages/CityPage';\r\n// import UpdateImagePage from './components/pages/UpdateImagePage';\r\nimport Header from './components/templates/Headr';\r\nimport Footer from './components/templates/Footer';\r\n// import mapStore from './stores/MapStore';\r\n\r\nconst AboutPage = lazy(() => import('./components/pages/AboutPage'));\r\nconst UpdateImagePage = lazy(() => import('./components/pages/UpdateImagePage'));\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div>\r\n        {/* A <Switch> looks through its children <Route>s and\r\n          renders the first one that matches the current URL. */}\r\n        <Card display=\"flex\" height=\"100%\">\r\n          <Header title=\"Safety Data\" />\r\n          <div className=\"App\">\r\n            <Suspense fallback={<div>Loading...</div>}>\r\n              <Switch>\r\n                <Route path=\"/about\">\r\n                  <AboutPage />\r\n                </Route>\r\n                <Route path=\"/city\">\r\n                  <CityPage />\r\n                </Route>\r\n                <Route path=\"/update-img\">\r\n                  <UpdateImagePage />\r\n                </Route>\r\n                <Route path=\"/\">\r\n                  <HomePage />\r\n                </Route>\r\n              </Switch>\r\n            </Suspense>\r\n          </div>\r\n          <Footer />\r\n        </Card>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// import * as $ from 'jquery';\r\n// /////\r\nexport default class AccidentService {\r\n  // get request using jsonp\r\n\r\n}\r\n// export const getAll = (collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident\",\r\n//     \"method\": \"GET\",\r\n//     \"headers\": {}\r\n//   }\r\n//   $.ajax(settings).done(function (response: any) {\r\n//     //console.log(response)\r\n//     collback(response);\r\n//   });\r\n// }\r\n\r\n// //send request using jsonp and post body - return arry of points\r\n// export const postGroupby = (filter: string, collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident/agg\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident/agg\",\r\n//     \"method\": \"POST\",\r\n//     \"headers\": {\r\n//       \"content-type\": \"application/json\"\r\n//     },\r\n//     \"processData\": false,\r\n//     \"data\": filter\r\n//   }\r\n//   $.ajax(settings).done(function (response: any[]) {\r\n//     collback(response);\r\n//   });\r\n// }\r\n// //send request using jsonp and post body - return arry of points\r\n// export const postFilter = (filter: string, collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident\",\r\n//     \"method\": \"POST\",\r\n//     \"headers\": {\r\n//       \"content-type\": \"application/json\"\r\n//     },\r\n//     \"processData\": false,\r\n//     \"data\": filter\r\n//   }\r\n\r\n//   $.ajax(settings).done(function (response: any[]) {\r\n//     collback(response);\r\n//   });\r\n// }\r\nexport const fetchFilter = async (filter: string, type: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/accident/${type}`;\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchAggregatFilter = async (filter: string, type: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = (type === 'main') ? '/api/v1/accident/aggmain' : '/api/v1/accident/agglatlon';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchAggregate = async (filter: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/accident/agg';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n","import { observable, action } from 'mobx';\r\nimport { Map } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport { fetchFilter } from '../services/AccidentService';\r\nimport RootStore from './RootStore';\r\n// import autorun  from \"mobx\"\r\n\r\nexport enum BBoxType {\r\n  NO_BBOX,\r\n  SERVER_BBOX,\r\n  LOCAL_BBOX\r\n}\r\n// const INIT_BOUNDS = [L.latLng(32.032, 34.739), L.latLng(32.115, 34.949)];\r\nconst DEFAULT_BOUNDS = [\r\n  L.latLng(29.50, 34.22), // most possible south-west point\r\n  L.latLng(33.271, 35.946), // most possible north-east point\r\n];\r\n\r\nexport default class MapStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  mapRef: React.RefObject<Map<any>>|null = null;\r\n\r\n  setMapRef = (mapRef: React.RefObject<Map<any>>) => {\r\n    this.mapRef = mapRef;\r\n  }\r\n\r\n  @observable\r\n  isReadyToRenderMap = false;\r\n\r\n  @observable\r\n  bboxType: BBoxType = BBoxType.LOCAL_BBOX;\r\n\r\n  @observable\r\n  mapCenter: L.LatLng = new L.LatLng(32.08, 34.83)\r\n\r\n  @action\r\n  updateMapCenter = (center: L.LatLng) => {\r\n    this.mapCenter = center;\r\n  }\r\n\r\n  @action\r\n  updateMapCenterByCity = (res: any[]) => {\r\n    if (res !== null && res.length > 0) {\r\n      const city = res[0];\r\n      if (city.lat && city.lon) {\r\n        this.updateMapCenter(new L.LatLng(city.lat, city.lon));\r\n      }\r\n    }\r\n  }\r\n\r\n  @observable\r\n  useSetBounds = true;\r\n\r\n  // @observable\r\n  // mapBounds: L.LatLngBounds = L.latLngBounds(INIT_BOUNDS);\r\n  // @action\r\n  // updateBounds = (bounds: L.LatLngBounds) => {\r\n  //   //console.log(\"updateBounds\",bounds)\r\n  //   try {\r\n  //     this.mapBounds = (bounds);\r\n  //   } catch (error) {\r\n  //     console.error(error)\r\n  //   }\r\n  // }\r\n  // @action\r\n  // initBounds = () => {\r\n  //   this.updateBounds(L.latLngBounds(INIT_BOUNDS))\r\n  // }\r\n  @action\r\n  setBounds = (data: any[], citisArr: string[]) => {\r\n    if (this.isSetBounds) {\r\n      const bunds = this.getBounds(data);\r\n      if (citisArr.length > 0 && citisArr[0] !== '') {\r\n        // //this.mapBounds = bunds;\r\n        // if (bunds.contains(this.mapCenter))\r\n        //   this.mapBounds = bunds;\r\n        // else\r\n        //  console.log(\"worng bounds: \", bunds, this.mapCenter)\r\n      } else {\r\n        this.updateMapCenter(bunds.getCenter());\r\n        // this.mapBounds = bunds;\r\n      }\r\n      this.isSetBounds = false;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  isSetBounds = false;\r\n\r\n  @action\r\n  updateIsSetBounds = (citisArr: string[], roadSegArr: any[]) => {\r\n    if (this.useSetBounds) {\r\n      if (citisArr.length > 0 && citisArr[0] !== '') this.isSetBounds = true;\r\n      else if (roadSegArr.length > 0 && roadSegArr[0] !== '') this.isSetBounds = true;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  heatLayerHidden = true;\r\n\r\n  @action\r\n  toggleHeatLayer = () => {\r\n    this.heatLayerHidden = !this.heatLayerHidden;\r\n  }\r\n\r\n  @observable\r\n  useSmallMarkers = false;\r\n\r\n  @action\r\n  toggleUseSmallMarkers = () => {\r\n    this.useSmallMarkers = !this.useSmallMarkers;\r\n  }\r\n\r\n  getBounds = (data: any[]) => {\r\n    // console.log(\"setBounds!\")\r\n    let arr: L.LatLng[] = [];\r\n    let lastPoint: L.LatLng = L.latLng(0, 0);\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        const p = new L.LatLng(x.latitude, x.longitude);\r\n        if ((lastPoint.lat === 0 && lastPoint.lng === 0)\r\n        || x.latitude !== lastPoint.lat\r\n        || x.longitude !== lastPoint.lng) {\r\n          arr.push(p);\r\n          // prevent insertion of duplicate same point\r\n          lastPoint = p;\r\n        }\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (arr.length === 1) {\r\n      arr.length = 0; // clean tha array\r\n      arr.push(L.latLng(lastPoint.lat + 0.01, lastPoint.lng + 0.01));\r\n      arr.push(L.latLng(lastPoint.lat - 0.01, lastPoint.lng - 0.01));\r\n    }\r\n    // in case no lat/lon info\r\n    if (arr.length < 2) arr = DEFAULT_BOUNDS;\r\n    const bounds = L.latLngBounds(arr);\r\n    return bounds;\r\n  }\r\n\r\n  getBounds2 = (data: any[]) => {\r\n    if (data.length === 0) return L.latLngBounds(DEFAULT_BOUNDS);\r\n    const bounds = {\r\n      south: 200, north: -200, west: 200, east: -200,\r\n    };\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        bounds.south = Math.min(x.latitude, bounds.south);\r\n        bounds.north = Math.max(x.latitude, bounds.north);\r\n        bounds.west = Math.min(x.longitude, bounds.west);\r\n        bounds.east = Math.max(x.longitude, bounds.east);\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (bounds.south === bounds.north) {\r\n      bounds.south -= 0.01;\r\n      bounds.north += 0.01;\r\n      bounds.west -= 0.01;\r\n      bounds.east += 0.01;\r\n    }\r\n    const b = L.latLngBounds([bounds.south, bounds.west], [bounds.east, bounds.north]);\r\n    return b;\r\n  }\r\n\r\n  @observable\r\n  dataMarkersInBounds: any[] = []\r\n\r\n  @action\r\n  updateDataMarkersInBounds = (data: any[]) => {\r\n    this.dataMarkersInBounds = data;\r\n  }\r\n\r\n  getMarkersInBBox = () => {\r\n    if (this.bboxType === BBoxType.LOCAL_BBOX) {\r\n      this.getMarkersInLocalBBox(0.1);\r\n    } else if (this.bboxType === BBoxType.SERVER_BBOX) {\r\n      this.submintGetMarkersBBox();\r\n    }\r\n  }\r\n\r\n  getMarkersInLocalBBox = (boundsMargin: number) => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    try {\r\n      const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n      const west = mapBounds.getWest() - boundsMargin;\r\n      const east = mapBounds.getEast() + boundsMargin;\r\n      const south = mapBounds.getSouth() - boundsMargin;\r\n      const north = mapBounds.getNorth() + boundsMargin;\r\n      const data = this.rootStore.filterStore.dataAllInjuries\r\n        .filter((x) => x.latitude >= south\r\n          && x.latitude <= north && x.longitude >= west && x.longitude <= east);\r\n      this.updateDataMarkersInBounds(data);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  submintGetMarkersBBox = () => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n    const filter = this.rootStore.filterStore.getFilter(mapBounds, true);\r\n    fetchFilter(filter, 'latlon')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateDataMarkersInBounds(data);\r\n        }\r\n      });\r\n  }\r\n}\r\n","\r\nimport React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\ninterface IProps {\r\n    label: string,\r\n    group: string,\r\n    id:number,\r\n    checked: boolean,\r\n    onChange: (e: ChangeEvent<HTMLInputElement>) => any\r\n  }\r\nconst Checkbox: React.FC<IProps> = ({\r\n  group, label, id, checked, onChange,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Check inline label={t(label)} type=\"checkbox\" id={`cbox${group}${id}`} checked={checked} onChange={onChange} />\r\n  );\r\n};\r\nexport default Checkbox;\r\n"],"sourceRoot":""}