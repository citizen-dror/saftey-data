{"version":3,"sources":["stores/FilterChecker.ts","stores/ColumnFilterCheckBoxList.ts","utils/FilterUtils.ts","stores/ColumnFilterArray.ts","stores/ColumnFilterCombo.ts","utils/groupByUtils.ts","stores/GroupBy.ts","stores/GroupBy2.ts","stores/GroupBy2Val.tsx","stores/GroupMap.ts","services/AccidentService.ts","services/CityService.ts","services/DexieInjuredService.js","services/Localstorage.Service.ts","stores/FilterStore.ts","stores/UiStore.ts","services/ImageService.ts","stores/ImageStore.ts","stores/storeConfig.ts","stores/RootStore.ts","components/atoms/SmallCard2.tsx","components/atoms/Checkbox.tsx","components/organisms/ConfigModal.tsx","services/logger.js","components/atoms/ErrorBoundary.tsx","components/atoms/Loader.tsx","components/templates/TabsTemplate.tsx","components/molecules/CitySelector.tsx","components/molecules/StreetSelector.tsx","components/molecules/RoadNameSelector.tsx","components/molecules/RoadSegmentSelector.tsx","components/molecules/GroupCheckBox.tsx","components/organisms/FilterForm.tsx","components/organisms/ConfigFilterModal.tsx","assets/SvgIconFilter.tsx","components/atoms/ButtonShowFilterModal.tsx","components/organisms/Drawer.tsx","components/templates/WithSidebarTemplate.tsx","components/molecules/InfoPanel.tsx","components/templates/HomeTemplate.tsx","components/pages/HomePage.tsx","components/templates/CityTemplate.tsx","components/pages/CityPage.tsx","components/molecules/LanguageSelector.tsx","components/molecules/NavigationList.tsx","components/templates/Headr.tsx","assets/safety-logo.png","App.js","serviceWorker.js","index.js","utils/queryStringUtils.ts","hooks/myUseMemo.ts","i18n.js","components/atoms/MySelect.tsx","stores/MapStore.ts"],"names":["FilterChecker","label","valid","filters","this","checked","observable","ColumnFilter","name","dbColName","allTypesOption","isEmptyValsOnAllCheck","queryColName","arrValues","isArrValuesEmptyOnAllCheck","getFilter","vals","join","length","setBrowserQueryString","params","delIfEmpthy","delete","set","arrTypes","text","reduce","counter","currentValue","get","valsArr","split","map","Number","forEach","checker","found","some","r","includes","setQueryVals","computed","action","aType","x","index","allChecked","arrfilter","iterator","values","filterCheck","ignoreIfAll","filter","i18n","t","initVehicleTypesFull","col","push","getFilterGroupBy","filterMatch","groupName","groupName2","limit","sort","getFilterByCityPop","popMin","popMax","getfilterBounds","mapBounds","getSouth","getNorth","getWest","getEast","ColumnFilterArray","isStringValues","trim","ColumnFilterCombo","data","defaultVal","isEmpty","queryValue","toString","setValuesByQuery","setFilter","parseInt","value","ColumnFilterComboValText","val","res","foundObject","find","obj","years","cityPopSizeArr","reGroupResultIsSelfAcc","console","log","Array","_id","count","element","isSelfAccident","GroupBy","reGroupResultFunc","initGroupMapForGet","Map","initGroupByDictForPost","dictGroupBy","Severity","TypeInjured","Vehicle","Gender","Age","Year","Month","DayNight","WeekDay","RoadType","City","CityByPop","Street","Road","AccidentType","Vehicles","SpeedLimit","RoadWidth","Separator","OneLane","GroupBy2","revTrnas","key","fixStrcutTable","arr","y","engVal","grp2","xId","undefined","replace","sObject","JSON","parse","getBars","Object","entries","color","getColumns","unshift","GroupBy2Val","GroupMap","colName","defautVal","dict","URLSearchParams","location","search","groupBy","window","history","replaceState","pathname","setArrGroups","arrGroups","from","initGroup2DictForGet","sev","gen","roadt","year","dayNight","injt","acc","initGroup2DictForPost","fetchGetList","type","a","url","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","response","ok","json","fetchGetGroupBy","fetchGetCount","fetchFilter","body","fetchAggregatFilter","fetchAggregate","CityService","getCityByNameHe","cityName","collback","then","catch","error","lang","db","Dexie","insertToDexie","injuerd","bulkPut","getFromDexie","arrFilters","toArray","shift","where","filterName","between","startYear","endYear","collection","and","orFilter","version","stores","LocalStorageService","localStorage","getItem","setItem","stringify","FilterStore","rootStore","appInitialized","useGetFetch","localStorageService","updateSpeedLimit","updateFilters","speedLimit","padDataYearsWith0","yearsList","i","objDAta","getCountFromGroupByRes","b","submintMainDataFilter","isLoading","getFilterQueryString","setFiltersText","mapStore","updateIsSetBounds","cities","roadSegment","AccidentService","updateAllInjuries","useLocalDb","cityPopSizeRange","getFilterForPost","submintGetMarkerFirstStep","updateDataMarkersLean","submitCityNameAndLocation","city","srvCity","CenterByCityCallBack","isCenterMapByCity","updateMapCenterByCity","cityResult","bounds","useBounds","injurySeverity","FilterUtils","streets","roads","injTypes","genderTypes","ageTypes","populationTypes","accidentType","vehicleType","involvedVehicle","locationAccuracy","roadTypes","roadWidth","separator","oneLane","range","min","max","setText","getfilterBySeverityAndCity","getFilterFromArray","getFilterFromNumArray","submitMainDataFilterLocalDb","getFilterIDB","submintGetMarkersBBoxIdb","getFilterBboxIDB","updateDataMarkersInBounds","getfilterCityIDB","getFilterStreetsIDB","getMultiplefilterIDB","getFilterFromArrayIDb","bbox","p1","getSouthWest","p2","getNorthEast","colFilter","filterVals","filter1","FC","setCasualtiesNames","initEndYear","groupByDict","mapGroupBy2","initGroup2Map","group2Dict","dataByYears","dataYearsUnfilterdInit","dataFilterdByYears","dataYearsfilterdInit","dataFilterd","dataGrpBy1Init","dataGroupby2","dataGrp2Init","isAllValsFalse","query","defVal","isMultipleCities","citisNamesHeb","isValidSeverity","isValidWhen","isValidWho","isValidWhere","isValidWhat","isValidWhatVehicle","isValidWhatRoad","filtersArrayLocalStorage","getLoaclStorage","setLocalStorage","showAllVehicleTypes","isUpdateFromUrl","formCardKey","deadChecker","sevIngChecker","casualtiesNames","isMulti","names","updateCityResult","injuriesCount","isLoadingInjuriesCount","setMarkersLoadStep","dataAllInjuries","setBounds","bboxType","BBoxType","LOCAL_BBOX","getMarkersInLocalBBox","dataMarkersLean","submitfilterdGroup","submitfilterdGroupByPop","gb2","submitfilterdGroup2","filtermatch","dataPadded","setDataFilterdByYears","setInjuriesCount","aGroupBy","fixData","logger","gb2name","step","isUse2StepsMarkers","markersLoadStep","SERVER_BBOX","submintGetMarkersBBox","submitGroupByYears","submitfilterdGroupByYears","uiStore","language","currentPage","imageStore","getImagesByPlace","currentTab","defCity","citis","getCityNameFromQuery","updateCities","UiStore","reactionChangeLang","reaction","locale","changeLanguage","initLang","slang","updateLanguage","getValFromQuery","dir","setDirection","direction","showFilterModal","initPage","defTab","tab","setCurrentTab","filterStore","setStoreByQuery","pageType","tabName","setQueryStrTab","chartType","showPercentageChart","fetchListImgByTag","tag","fetchListImgByPlace","place","uploadImg","image","file","formData","FormData","append","titlehe","texthe","tags","updateImgProps","ImageStore","tagsArr","setCurrImageVal","valName","currImage","submitImageFile","getImages","getImagesByTag","currTag","setImageList","imageList","setCurrImage","hideDescription","document","documentElement","style","setProperty","store","MapStore","StoreContext","React","createContext","useStore","useContext","Error","SmallCard2","children","header","cardHeader","className","Checkbox","group","id","onChange","useTranslation","Check","inline","memo","ConfigModal","observer","title","showModal","setShow","size","handleClose","submitChanges","variant","onClick","disabled","isValidAllFilters","show","onHide","Header","closeButton","Title","Body","maxHeight","overflowY","Footer","message","freeze","ErrorBoundary","props","state","hasError","errorInfo","Component","Loader","Spinner","animation","GroupByGraphsPanel","lazy","GroupByTablesPanel","MapAccidents","AccidentsTable","MyImageGallery","styles","marginTop","tabMap","mapCard","width","height","TabsTemplate","Tabs","mountOnEnter","activeKey","onSelect","tabActiveKey","isReadyToRenderMap","Tab","eventKey","fallback","CitySelector","isMultiple","Form","Group","controlId","Label","selected","options","multiple","StreetSelector","Control","placeholder","e","updateStreets","target","RoadNameSelector","setRoads","inputProps","roadNames","RoadSegmentSelector","updateRoadSegment","GroupCheckbox","formName","onGroupChange","feedback","fontSize","isvalid","list","fChecker","useMemos","STYLE_TOGGLE_WARNING","STYLE_TOGGLE_NORMAL","cursor","FilterForm","updateInjurySeverity","Fragment","Accordion","defaultActiveKey","CardFilterWhen","CardFilterWhatVehicle","CardFilterWhere","CardFilterWho","CardFilterWhat","CardFilterWhatRoad","CustomToggle","useState","hover","setHover","toggleHover","linkStyle","textDecoration","onButtonClick","useAccordionToggle","onMouseEnter","onMouseLeave","setStartYear","setEndYear","updateDayNight","setFormCardKey","styleToggle","Card","Collapse","MySelect","String","updateRoadType","updateLocationAccuracy","setCityPopSizeRange","display","alignItems","valProp","contentProp","event","useLocation","updateGenderType","updateAgeType","updatePopulationType","updateAccidentType","updateInjuerdType","updateVehicleType","setInvolvedVehicle","updateRoadWidth","updateSeparator","updateOneLane","ConfigFilterModal","setShowFilterModal","submitFilter","setTimeout","SvgIconFilter","xmlns","viewBox","d","fill","ButtonShowFilterModal","memoFilterIcon","Drawer","Button","margin","alert","WithSidebarTemplate","WhenTitle","WhereTitle","WhoTitle","WhatTitle","WhatVehicleTitle","InfoPanel","div","marginLeft","marginRight","marginBottom","isLoadingCountInjuries","HomeTemplate","setIsMultipleCities","setCurrentPage","setInitPage","useEffect","memoConfigModal","HomePage","CityTemplate","setIsUpdateFromUrl","CityPage","LanguageSelector","getElementById","href","classList","remove","add","NavigationList","to","position","top","zIndex","Navbar","expand","src","alt","Toggle","aria-controls","AboutPage","UpdateImagePage","MyFilters","app","App","exact","path","component","Boolean","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","delBrowserQueryString","dep","item","useMemo","use","initReactI18next","init","fallbackLng","lng","debug","resources","en","translation","translationEng","he","translationHeb","interpolation","escapeValue","cssClass","cssname","DEFAULT_BOUNDS","L","latLng","QUERY_STR_NAME_LAT","QUERY_STR_NAME_LNG","QUERY_STR_NAME_MRKRCOLOR","mapRef","setMapRef","delQueryStrMapCenter","setQueryStrMapCenter","center","lat","toFixed","setQueryStrMapZoom","zoom","getCenterByQuery","sLat","sLon","parseFloat","isNaN","LatLng","doCenterByCity","markerIconTypesArr","setBrowserQueryStringByMarkerColor","markerColorType","markerColorTypesArr","getBoundsByPointsArr","lastPoint","latitude","longitude","p","latLngBounds","getBounds2","south","north","west","east","Math","setQueryStrMapCenterByBounds","current","leafletElement","getBounds","getCenter","getZoom","getMarkersInBBox","boundsMargin","setMapZoomByQuery","setMapCenterByQuery","setMarkerColorTypeByQuery","updateQuery","mapCenter","mapZoom","updateMapCenter","sZoom","setMapZoom","lon","citisArr","isSetBounds","bunds","roadSegArr","useSetBounds","heatLayerHidden","useSmallMarkers","markerIconsType","setMarkerColorType","dataMarkersInBounds","NO_BBOX"],"mappings":"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","file":"static/js/main.f435f62b.chunk.js","sourcesContent":["import { observable} from 'mobx';\r\n\r\nexport interface IFilterChecker {\r\n    checked: boolean;\r\n    label: string;\r\n    filters: number[];\r\n}\r\n/**\r\n * filter that represnt a check - box in gui\r\n */\r\nexport default class FilterChecker implements IFilterChecker {\r\n    @observable\r\n    checked: boolean;\r\n\r\n    label: string;\r\n\r\n    filters: any[];\r\n\r\n    constructor(label: string, valid: boolean, filters: number[]) {\r\n      this.label = label;\r\n      this.checked = valid;\r\n      this.filters = filters;\r\n    }\r\n}\r\n","import { observable, action, computed } from 'mobx';\r\nimport FilterChecker, { IFilterChecker } from './FilterChecker';\r\nimport dataYearsUnfilterdInit from '../assets/data-by-years.json';\r\nimport dataYearsfilterdInit from '../assets/data-by-years-filtred.json';\r\nimport dataGrpBy1Init from '../assets/data-by-grp1.json';\r\nimport dataGrp2Init from '../assets/data-by-grp2.json';\r\nimport i18n from '../i18n';\r\n\r\nexport interface IColumnFilter {\r\n  name: string;\r\n  queryColName: string;\r\n  arrTypes: IFilterChecker[];\r\n  //array of values to be sent as query to server\r\n  arrValues: number[];\r\n  isArrValuesEmptyOnAllCheck: boolean;\r\n  setQueryVals: () => void;\r\n  setFilter: (aType: number, checked: boolean) => void;\r\n  getFilter: () => string;\r\n  setBrowserQueryString: (param: URLSearchParams, delIfEmpthy?: boolean) => void;\r\n  setValuesByQuery: (param: URLSearchParams) => void;\r\n  // spaciel value, if checkd it will mark all options as true\r\n  allTypesOption: number;\r\n  isAllValsFalse: boolean;\r\n  //text is updated after filter submit\r\n  text: string;\r\n  setText: (ignoreIfAll: boolean) => void;\r\n}\r\n/**  filter group of boolaen filters that are check-box in the gui\r\n*  each group represnt one column in the database that can get\r\n* several fixd values\r\n*/\r\nexport class ColumnFilter implements IColumnFilter {\r\n  name: string;\r\n\r\n  queryColName: string;\r\n\r\n  arrValues: number[];\r\n  isArrValuesEmptyOnAllCheck: boolean;\r\n\r\n  @observable\r\n  arrTypes: IFilterChecker[];\r\n\r\n  allTypesOption: number;\r\n\r\n  @observable\r\n  text: string;\r\n\r\n  constructor(name: string, dbColName: string, allTypesOption: number = -1, isEmptyValsOnAllCheck: boolean = true) {\r\n    this.name = name;\r\n    this.queryColName = dbColName;\r\n    this.arrTypes = [];\r\n    this.arrValues = [];\r\n    this.isArrValuesEmptyOnAllCheck = isEmptyValsOnAllCheck;\r\n    // if this value > -1 , there is an option to set all values as true\r\n    this.allTypesOption = allTypesOption;\r\n    this.text = '';\r\n  }\r\n\r\n  /**\r\n   * check if all the a values in the group are false\r\n   */\r\n  @computed get isAllValsFalse() {\r\n    const res = this.arrTypes.reduce((counter, currentValue) => (currentValue.checked ? ++counter : counter), 0);\r\n    return (res === 0);\r\n  }\r\n\r\n  @action\r\n  setFilter = (aType: number, checked: boolean) => {\r\n    // in case this filter group has no \"select all\" option - update the value\r\n    if (this.allTypesOption === -1) this.arrTypes[aType].checked = checked;\r\n    // in case this filter has opthion for \"select all\"\r\n    else if (aType === this.allTypesOption) {\r\n      this.arrTypes.forEach((x, index) => x.checked = (index === this.allTypesOption) ? checked : !checked);\r\n    } else {\r\n      this.arrTypes[this.allTypesOption].checked = false;\r\n      this.arrTypes[aType].checked = checked;\r\n    }\r\n    this.setQueryVals();\r\n  }\r\n\r\n  /**\r\n   * return sentence for query-string from Multiplefilter of booleans,\r\n   * for example : &injt=4,5 \r\n   * @param colFilter column filter with name and chekcd list of values\r\n   */\r\n  @action\r\n  setQueryVals = () => {\r\n    let allChecked: boolean = true;\r\n    let arrfilter: number[] = [];\r\n    if (this.allTypesOption > -1 && this.arrTypes[this.allTypesOption].checked) allChecked = true;\r\n    else {\r\n      // in case there is allTypesOption , it want be copied to arrfilter\r\n      // as it is not checked\r\n      const iterator = this.arrTypes.values();\r\n      for (const filterCheck of iterator) {\r\n        if (filterCheck.checked) {\r\n          arrfilter = [...arrfilter, ...filterCheck.filters];\r\n        } else {\r\n          allChecked = false;\r\n        }\r\n      }\r\n    }\r\n    if (allChecked && this.isArrValuesEmptyOnAllCheck) arrfilter = [];\r\n    this.arrValues = arrfilter;\r\n  };\r\n\r\n  /**\r\n   * \r\n   * @returns query string for the server\r\n   */\r\n  getFilter = () => {\r\n    const vals = this.arrValues.join(',');\r\n    let res = (this.arrValues.length == 0) ? '' : `&${this.queryColName}=${vals}`;\r\n    return res;\r\n  }\r\n\r\n  /**\r\n  * set parmas of the browser QueryString\r\n  * @param params \r\n  */\r\n  setBrowserQueryString = (params: URLSearchParams, delIfEmpthy: boolean = true) => {\r\n    if (this.arrValues.length === 0 && delIfEmpthy) {\r\n      params.delete(this.queryColName);\r\n    } else {\r\n      const vals = this.arrValues.join(',');\r\n      params.set(this.queryColName, vals);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set arrValues by url query parmas\r\n   * @param params queryString from the browser\r\n   */\r\n  @action\r\n  setValuesByQuery(params: URLSearchParams) {\r\n    const vals = params.get(this.queryColName);\r\n    if (vals !== null) {\r\n      const valsArr = vals.split(',').map(Number);\r\n      this.arrTypes.forEach(checker => {\r\n        const found = checker.filters.some(r => valsArr.includes(r));\r\n        checker.checked = found;\r\n      });\r\n    }\r\n    this.setQueryVals();\r\n  }\r\n\r\n  @action\r\n  setText = (ignoreIfAll: boolean) => {\r\n    if (ignoreIfAll) {\r\n      this.text = this.arrTypes.filter((x, index) => x.checked && index !== this.allTypesOption)\r\n        .map(x => i18n.t(x.label)).join(', ');\r\n      //in case all is cheked and no \"allTypesOption\" - text is ''\r\n      if (this.allTypesOption === -1 && this.arrValues.length === 0) {\r\n        this.text = '';\r\n      }\r\n    } else {\r\n      this.text = this.arrTypes.filter(x => x.checked).map(x => i18n.t(x.label)).join(', ');\r\n    }\r\n  }\r\n}\r\n\r\nexport const initInjurySeverity = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Severity', 'sev', -1, false);\r\n  col.arrTypes.push(new FilterChecker('dead', true, [1]));\r\n  col.arrTypes.push(new FilterChecker('severly-injured', false, [2]));\r\n  col.setQueryVals();\r\n  return col;\r\n};\r\n\r\nexport const initDayNight = () => {\r\n  const col: IColumnFilter = new ColumnFilter('DayNight', 'dn');\r\n  col.arrTypes.push(new FilterChecker('day', true, [1]));\r\n  col.arrTypes.push(new FilterChecker('night', true, [5]));\r\n  return col;\r\n};\r\n\r\nexport const initMonth = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Month', 'mn');\r\n  col.arrTypes.push(new FilterChecker('1', true, [1]));\r\n  col.arrTypes.push(new FilterChecker('2', true, [2]));\r\n  col.arrTypes.push(new FilterChecker('3', true, [3]));\r\n  col.arrTypes.push(new FilterChecker('4', true, [4]));\r\n  col.arrTypes.push(new FilterChecker('5', true, [5]));\r\n  col.arrTypes.push(new FilterChecker('6', true, [6]));\r\n  col.arrTypes.push(new FilterChecker('7', true, [7]));\r\n  col.arrTypes.push(new FilterChecker('8', true, [8]));\r\n  col.arrTypes.push(new FilterChecker('9', true, [9]));\r\n  col.arrTypes.push(new FilterChecker('10', true, [10]));\r\n  col.arrTypes.push(new FilterChecker('11', true, [11]));\r\n  col.arrTypes.push(new FilterChecker('12', true, [12]));\r\n  return col;\r\n};\r\n\r\nexport const initInjTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('TypeInjured', 'injt', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('cyclist', false, [6, 7]));\r\n  col.arrTypes.push(new FilterChecker('other', false, [8, 9]));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false, [4, 5]));\r\n  col.arrTypes.push(new FilterChecker('wheels4+', false, [2, 3]));\r\n  return col;\r\n};\r\n\r\nexport const initVehicleTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('VehicleType', 'vcl', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, [0]));\r\n  col.arrTypes.push(new FilterChecker('mobilityscooter', false, [22]));\r\n  col.arrTypes.push(new FilterChecker('bicycle', false, [15]));\r\n  col.arrTypes.push(new FilterChecker('e-scooter', false, [21]));\r\n  col.arrTypes.push(new FilterChecker('e-bike', false, [23]));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false,\r\n    [8, 9, 10, 19]));\r\n  col.arrTypes.push(new FilterChecker('car', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('taxi', false, [12]));\r\n  col.arrTypes.push(new FilterChecker('tranzit', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('tender', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('bus', false, [11, 18]));\r\n  col.arrTypes.push(new FilterChecker('truck', false,\r\n    [24, 25, 5, 6, 7]));\r\n  col.arrTypes.push(new FilterChecker('tractor', false, [14]));\r\n  col.arrTypes.push(new FilterChecker('train', false, [16]));\r\n  col.arrTypes.push(new FilterChecker('other', false, [17]));\r\n  return col;\r\n};\r\n\r\nexport const initVehicleTypesFull = () => {\r\n  const col: IColumnFilter = new ColumnFilter('VehicleType', 'vcl', 0);\r\n  col.arrTypes.push(new FilterChecker('vclType.all', true, []));\r\n  col.arrTypes.push(new FilterChecker('vclType.pedestrian', false, [0]));\r\n  col.arrTypes.push(new FilterChecker('vclType.mobilityscooter', false, [22]));\r\n  col.arrTypes.push(new FilterChecker('vclType.bicycle', false, [15]));\r\n  col.arrTypes.push(new FilterChecker('vclType.e-scooter', false, [21]));\r\n  col.arrTypes.push(new FilterChecker('vclType.e-bike', false, [23]));\r\n  col.arrTypes.push(new FilterChecker('vclType.motorcycle1', false, [8]));\r\n  col.arrTypes.push(new FilterChecker('vclType.motorcycle2', false, [9]));\r\n  col.arrTypes.push(new FilterChecker('vclType.motorcycle3', false, [10]));\r\n  col.arrTypes.push(new FilterChecker('vclType.motorcycle4', false, [19]));\r\n  col.arrTypes.push(new FilterChecker('vclType.car', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('vclType.taxi', false, [12]));\r\n  col.arrTypes.push(new FilterChecker('vclType.tranzit', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('vclType.tender', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('vclType.minbuss', false, [18]));\r\n  col.arrTypes.push(new FilterChecker('vclType.bus', false, [11]));\r\n  col.arrTypes.push(new FilterChecker('vclType.truck1', false, [24]));\r\n  col.arrTypes.push(new FilterChecker('vclType.truck2', false, [25]));\r\n  col.arrTypes.push(new FilterChecker('vclType.truck3', false, [5]));\r\n  col.arrTypes.push(new FilterChecker('vclType.truck4', false, [6]));\r\n  col.arrTypes.push(new FilterChecker('vclType.truck5', false, [7]));\r\n  col.arrTypes.push(new FilterChecker('vclType.tractor', false, [14]));\r\n  col.arrTypes.push(new FilterChecker('vclType.train', false, [16]));\r\n  col.arrTypes.push(new FilterChecker('vclType.other', false, [17]));\r\n  return col;\r\n};\r\n\r\nexport const initInvolvedVehicle = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Vehicles', 'vcli', 0);\r\n  col.arrTypes.push(new FilterChecker('vclType.all', true, []));\r\n  col.arrTypes.push(new FilterChecker('vclType.mobilityscooter', false, [22]));\r\n  col.arrTypes.push(new FilterChecker('vclType.bicycle', false, [15]));\r\n  col.arrTypes.push(new FilterChecker('vclType.e-scooter', false, [21]));\r\n  col.arrTypes.push(new FilterChecker('vclType.e-bike', false, [23]));\r\n  col.arrTypes.push(new FilterChecker('vclType.motorcycle', false, [8]));\r\n  col.arrTypes.push(new FilterChecker('vclType.car', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('vclType.taxi', false, [12]));\r\n  col.arrTypes.push(new FilterChecker('vclType.tranzit', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('vclType.tender', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('vclType.bus', false, [11]));\r\n  col.arrTypes.push(new FilterChecker('vclType.truck', false, [5]));\r\n  col.arrTypes.push(new FilterChecker('vclType.tractor', false, [14]));\r\n  col.arrTypes.push(new FilterChecker('vclType.train', false, [16]));\r\n  col.arrTypes.push(new FilterChecker('vclType.other', false, [17]));\r\n  return col;\r\n};\r\n\r\n\r\nexport const initGenderTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Gender', 'sex');\r\n  col.arrTypes.push(new FilterChecker('female', true, [2]));\r\n  col.arrTypes.push(new FilterChecker('male', true, [1]));\r\n  return col;\r\n};\r\n\r\nexport const initAgeTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Age', 'age', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('00-04', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('05-09', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('10-14', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('15-19', false, [4]));\r\n  col.arrTypes.push(new FilterChecker('20-29', false, [5, 6]));\r\n  col.arrTypes.push(new FilterChecker('30-39', false, [7, 8]));\r\n  col.arrTypes.push(new FilterChecker('40-49', false, [9, 10]));\r\n  col.arrTypes.push(new FilterChecker('50-59', false, [11, 12]));\r\n  col.arrTypes.push(new FilterChecker('60-69', false, [13, 14]));\r\n  col.arrTypes.push(new FilterChecker('70-79', false, [15, 16]));\r\n  col.arrTypes.push(new FilterChecker('80+', false, [17, 18]));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, [99]));\r\n  return col;\r\n};\r\nexport const initPopulationTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Population', 'pt');\r\n  col.arrTypes.push(new FilterChecker('jews', true, [1]));\r\n  col.arrTypes.push(new FilterChecker('arabs', true, [2]));\r\n  col.arrTypes.push(new FilterChecker('immigrants', true, [4]));\r\n  col.arrTypes.push(new FilterChecker('others', true, [3]));\r\n  return col;\r\n};\r\n\r\nexport const initLocationAccuracy = () => {\r\n  const col: IColumnFilter = new ColumnFilter('LocationAccuracy', 'lca');\r\n  col.arrTypes.push(new FilterChecker('accurate_location', true, [1]));\r\n  col.arrTypes.push(new FilterChecker('city_center', true, [2]));\r\n  col.arrTypes.push(new FilterChecker('road_center', true, [3]));\r\n  col.arrTypes.push(new FilterChecker('km_cneter', true, [4]));\r\n  col.arrTypes.push(new FilterChecker('no_location', true, [9]));\r\n  return col;\r\n};\r\n\r\nexport const initRoadTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('RoadType', 'rt');\r\n  col.arrTypes.push(new FilterChecker('urban-junction', true, [1]));\r\n  col.arrTypes.push(new FilterChecker('urban-road', true, [2]));\r\n  col.arrTypes.push(new FilterChecker('non-urban-junction', true, [3]));\r\n  col.arrTypes.push(new FilterChecker('non-urban-road', true, [4]));\r\n  return col;\r\n};\r\nexport const initSpeedLimit = () => {\r\n  const col: IColumnFilter = new ColumnFilter('SpeedLimit', 'sp', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('speed50', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('speed60', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('speed70', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('speed80', false, [4]));\r\n  col.arrTypes.push(new FilterChecker('speed90', false, [5]));\r\n  col.arrTypes.push(new FilterChecker('speed100', false, [6]));\r\n  col.arrTypes.push(new FilterChecker('speed110', false, [7]));\r\n  col.arrTypes.push(new FilterChecker('speed120', false, [8]));\r\n  col.arrTypes.push(new FilterChecker('speed-unknown', false, [0]));\r\n  return col;\r\n};\r\nexport const initRoadWidth = () => {\r\n  const col: IColumnFilter = new ColumnFilter('RoadWidth', 'rw', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('road-width-5', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('road-width-7', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('road-width-10', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('road-width-14', false, [4]));\r\n  col.arrTypes.push(new FilterChecker('road-width-14+', false, [5]));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, [0]));\r\n  return col;\r\n};\r\nexport const initSeparator = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Separator', 'ml', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('separator-fence', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('separator-built', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('separator-not-built', false, [4]));\r\n  col.arrTypes.push(new FilterChecker('separator-paint', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('separator-ohter', false, [5]));\r\n  // col.arrTypes.push(new FilterChecker('separator-not-relevant', false, [-1]));\r\n  return col;\r\n};\r\nexport const initOneLane = () => {\r\n  const col: IColumnFilter = new ColumnFilter('OneLane', 'ol', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('onelane-oneway', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-line', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-noline', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('onelane-unknown', false, [9]));\r\n  // col.arrTypes.push(new FilterChecker('onelane-not-relevant', false, [-1]));\r\n  return col;\r\n};\r\nexport const initAccidentType = () => {\r\n  const col: IColumnFilter = new ColumnFilter('AccidentType', 'acc', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('accType.ped', false, [1]));\r\n  col.arrTypes.push(new FilterChecker('accType.front-side', false, [2]));\r\n  col.arrTypes.push(new FilterChecker('accType.front-front', false, [5]));\r\n  col.arrTypes.push(new FilterChecker('accType.front-rear', false, [3]));\r\n  col.arrTypes.push(new FilterChecker('accType.side-side', false, [4]));\r\n  col.arrTypes.push(new FilterChecker('accType.obstacle1', false, [6]));\r\n  col.arrTypes.push(new FilterChecker('accType.obstacle2', false, [7]));\r\n  col.arrTypes.push(new FilterChecker('accType.obstacle3', false, [8]));\r\n  col.arrTypes.push(new FilterChecker('accType.offroad', false, [9]));\r\n  col.arrTypes.push(new FilterChecker('accType.turning-over', false, [10]));\r\n  col.arrTypes.push(new FilterChecker('accType.slip', false, [11]));\r\n  col.arrTypes.push(new FilterChecker('accType.passenger', false, [12]));\r\n  col.arrTypes.push(new FilterChecker('accType.falloff', false, [13]));\r\n  col.arrTypes.push(new FilterChecker('accType.rear-front', false, [17]));\r\n  col.arrTypes.push(new FilterChecker('accType.rear-side', false, [18]));\r\n  col.arrTypes.push(new FilterChecker('accType.animal', false, [19]));\r\n  col.arrTypes.push(new FilterChecker('accType.cargo', false, [20]));\r\n  col.arrTypes.push(new FilterChecker('accType.other', false, [15]));\r\n  return col;\r\n\r\n};\r\n\r\nexport const initDataYreasUnfilterd = () => dataYearsUnfilterdInit;\r\n\r\nexport const initDataYreasfilterd = () => dataYearsfilterdInit;\r\n\r\nexport const initDataGrpBy1 = () => dataGrpBy1Init;\r\n\r\nexport const initDataGrpBy2 = () => dataGrp2Init;","\r\nexport const getFilterGroupBy =\r\n  (filterMatch: string,\r\n    groupName: string,\r\n    popMin = -1,\r\n    popMax = -1,\r\n    groupName2: string = '',\r\n    limit: number= 0,\r\n    sort: number =0 ) => {\r\n    let filter = filterMatch;\r\n    filter += `&gb=${groupName}`;\r\n    if (groupName2 !== '') {\r\n      filter +=`&gb2=${groupName2}`\r\n    }\r\n    if (sort !== 0)\r\n    filter +=`&sort=${sort}`\r\n    if (limit !== 0)\r\n      filter +=`&lim=${limit}`\r\n    return filter;\r\n  };\r\n\r\n// get filter by city population \r\nexport const getFilterByCityPop = (popMin: number, popMax: number) => {\r\n  let filter = '';\r\n  if (popMin >= 0 && popMax > popMin) {\r\n    //&p1=200000&p2=500000\r\n    filter += `&p1=${popMin}&p2=${popMax}`;\r\n  }\r\n  return filter;\r\n};\r\n\r\n/**\r\n * fiter by accidents per 100,000 city population\r\n * @param filterMatch \r\n * @param popMin \r\n * @param popMax \r\n * @param sort \r\n * @param limit \r\n */\r\nexport const getFilterGroupByPop = (filterMatch: string, popMin = 200000, popMax = 100000, sort: number, limit: number) => {\r\n  let filter = `${'['\r\n    + '{\"$match\": '}${filterMatch}}`;\r\n  filter += ',{\"$lookup\":{'\r\n    + ' \"from\": \"cities\", \"localField\": \"accident_yishuv_name\",'\r\n    + ' \"foreignField\": \"name_he\",\"as\": \"city\"'\r\n    + '}}';\r\n  if (popMin >= 0 && popMax > 0) {\r\n    filter += `,{ \"$match\": { \"city.population\": { \"$gte\" : ${popMin} , \"$lte\" : ${popMax}}}}`;\r\n  }\r\n  filter += ',{\"$group\": {'\r\n    + '\"_id\": \"$accident_yishuv_name\",\"t_count\" : { \"$sum\" : 1 },\"t_population\" : { \"$first\" : \"$city.population\" }'\r\n    + '}}';\r\n  filter += ',{ \"$unwind\" : \"$t_population\"}';\r\n  filter += ',{ \"$project\" : { \"count\" :'\r\n    + '{ \"$multiply\" : [100000, { \"$divide\" : [\"$t_count\", \"$t_population\"] } ]}'\r\n    + '}}';\r\n  if (limit === 0) filter += `,{\"$sort\": {\"count\": ${sort}}}`;\r\n  else {\r\n    filter += `${`,{\"$sort\": {\"count\": ${sort}}}`\r\n      + ',{\"$limit\": '}${limit}}`;\r\n  }\r\n  filter += ']';\r\n  return filter;\r\n};\r\n\r\nexport const getfilterBounds = (mapBounds: L.LatLngBounds) => {\r\n  let filter = `&lat=${mapBounds.getSouth()},${mapBounds.getNorth()}`;\r\n  filter += `&lon=${mapBounds.getWest()},${mapBounds.getEast()}`;\r\n  return filter;\r\n}\r\n// don't use this - for post filter\r\nexport const getFilterStreets = (streets : string[]) => {\r\n  let filter: string = '';\r\n  return filter;\r\n}\r\n// don't use this - for post filter\r\nexport const getfilterCity = (cities : string[]) => {\r\n  let filter: string = '';\r\n  return filter;\r\n}","import { observable, action } from 'mobx';\r\n// import i18n from '../i18n';\r\n\r\nexport interface IColumnFilterArray {\r\n  name: string;\r\n  queryColName: string;\r\n  //array of values to be sent as query to server\r\n  arrValues: string[];\r\n  isStringValues: boolean;\r\n  setBrowserQueryString: (param: URLSearchParams) => void;\r\n  setFilter: (values: string[]) => void;\r\n  getFilter: () => string;\r\n  //text is updated ofter filter submit\r\n  text: string;\r\n  setText: () => void;\r\n}\r\n/**  filter group of boolaen filters\r\n*  each group represnt one column in the database that can get\r\n* several fixd values\r\n*/\r\nexport class ColumnFilterArray implements IColumnFilterArray {\r\n  name: string;\r\n\r\n  queryColName: string;\r\n\r\n  @observable\r\n  arrValues: string[];\r\n\r\n  @observable\r\n  text: string;\r\n\r\n  isStringValues: boolean;\r\n\r\n  constructor(name: string, queryColName: string, isStringValues: boolean) {\r\n    this.name = name;\r\n    this.queryColName = queryColName;\r\n    this.arrValues = [];\r\n    this.isStringValues = isStringValues;\r\n    this.text = '';\r\n  }\r\n\r\n  @action\r\n  setFilter = (values: string[]) => {\r\n    this.arrValues = values;\r\n  }\r\n\r\n  setBrowserQueryString = (params: URLSearchParams) => {\r\n    if (this.arrValues.length > 0 && this.arrValues[0] !== '') {\r\n      let vals = '';\r\n      if (this.isStringValues) {\r\n        vals += this.arrValues.map((x: string) => `${x.trim()}`).join(',');\r\n      } else {\r\n        vals += this.arrValues.map((x: string) => x).join(',');\r\n      }\r\n      params.set(this.queryColName, vals);\r\n    } else {\r\n      params.delete(this.queryColName);\r\n    }\r\n  }\r\n\r\n  getFilter = () => {\r\n    let filter: string = '';\r\n    if (this.arrValues.length > 0 && this.arrValues[0] !== '') {\r\n      filter += `&${this.queryColName}=`;\r\n      if (this.isStringValues) {\r\n        filter += this.arrValues.map((x: string) => `\"${x.trim()}\"`).join(',');\r\n      } else {\r\n        filter += this.arrValues.map((x: string) => x).join(',');\r\n      }\r\n\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  @action\r\n  setText = () => {\r\n    this.text = this.arrValues.join(', ');\r\n  }\r\n}","import { observable, action } from 'mobx';\r\nimport i18n from '../i18n';\r\n\r\nexport interface IColumnFilterCombo {\r\n  name: string;\r\n  queryColName: string;\r\n  //data for combo\r\n  arrTypes: any[];\r\n  //value to be sent as query to server\r\n  queryValue: string | number;\r\n  // spaciel value, if selected no filter is needed \r\n  allTypesOption: number;\r\n  isEmpty: () => boolean;\r\n  setBrowserQueryString: (param: URLSearchParams, delIfEmpthy?: boolean) => void;\r\n  setValuesByQuery: (param: URLSearchParams) => void;\r\n  setFilter: (value: string | number) => void;\r\n  getFilter: () => string;\r\n  //text is updated ofter filter submit\r\n  text: string;\r\n  setText: () => void;\r\n}\r\n/**  filter group of boolaen filters\r\n*  each group represnt one column in the database that can get\r\n* several fixd values\r\n*/\r\nexport class ColumnFilterCombo implements IColumnFilterCombo {\r\n  name: string;\r\n\r\n  queryColName: string;\r\n\r\n  arrTypes: any[];\r\n  @observable\r\n  queryValue: string | number;\r\n\r\n  @observable\r\n  text: string;\r\n\r\n  allTypesOption: number;\r\n\r\n  constructor(name: string,\r\n    queryColName: string,\r\n    allTypesOption: number = -1,\r\n    data: any[],\r\n    defaultVal: string | number) {\r\n    this.name = name;\r\n    this.queryColName = queryColName;\r\n    this.arrTypes = data;\r\n    this.queryValue = defaultVal;\r\n    this.allTypesOption = allTypesOption;\r\n    this.text = '';\r\n  }\r\n\r\n  @action\r\n  setFilter = (value: string | number) => {\r\n    this.queryValue = value;\r\n  }\r\n\r\n  isEmpty = () => {\r\n    return (this.allTypesOption >= 0 && this.queryValue === this.arrTypes[this.allTypesOption]);\r\n  }\r\n\r\n  setBrowserQueryString = (params: URLSearchParams, delIfEmpthy: boolean = true) => {\r\n    if (!this.isEmpty()) {\r\n      let vals = '';\r\n      if (typeof (this.queryValue) === 'string') {\r\n        vals += this.queryValue;\r\n      } else {\r\n        vals += this.queryValue.toString();\r\n      }\r\n      params.set(this.queryColName, vals);\r\n    } else if (delIfEmpthy) {\r\n      params.delete(this.queryColName);\r\n    }\r\n  }\r\n  setValuesByQuery = (params: URLSearchParams) => {\r\n    const vals = params.get(this.queryColName);\r\n    if (vals !== null) {\r\n      if (typeof (this.queryValue) === 'string') {\r\n        this.setFilter(vals);\r\n      } else {\r\n        this.setFilter(parseInt(vals));\r\n      }\r\n    }\r\n  }\r\n\r\n  getFilter = () => {\r\n    let filter: string = '';\r\n    if (!this.isEmpty()) {\r\n      filter += `&${this.queryColName}=`;\r\n      if (typeof (this.queryValue) === 'string') {\r\n        filter += this.queryValue;\r\n      } else {\r\n        filter += this.queryValue.toString();\r\n      }\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  @action\r\n  setText = () => {\r\n    if (typeof (this.queryValue) === 'string') {\r\n      this.text = this.queryValue;\r\n    } else {\r\n      this.text = this.queryValue.toString();\r\n    }\r\n  }\r\n}\r\n\r\nexport class ColumnFilterComboValText extends ColumnFilterCombo {\r\n  isEmpty = () => {\r\n    return (this.allTypesOption >= 0 && this.queryValue === this.arrTypes[this.allTypesOption].val);\r\n  }\r\n  @action\r\n  setText = () => {\r\n    let res = '';\r\n    if (!this.isEmpty()) {\r\n      const foundObject = this.arrTypes.find((obj: any) => { return obj.val === this.queryValue });\r\n      if (foundObject) {\r\n        res = `${i18n.t(foundObject.text)}`;\r\n      }\r\n      this.text = res;\r\n    }\r\n  }\r\n}\r\n\r\nconst years: string[] = ['2015', '2016', '2017', '2018', '2019','2020','2021','2022','2023',];\r\nconst CITY_POP_SIZE_ALL = '{\"min\":-1,\"max\":-1}';\r\nconst cityPopSizeArr = [\r\n  { val: '{\"min\":-1,\"max\":-1}', text: 'all' },\r\n  { val: '{\"min\":200000,\"max\":1000000}', text: '200K-1000K' },\r\n  { val: '{\"min\":100000,\"max\":200000}', text: '100K-200K' },\r\n  { val: '{\"min\":50000,\"max\":100000}', text: '50K-100K' },\r\n  { val: '{\"min\":20000,\"max\":50000}', text: '20K-50K' },\r\n  { val: '{\"min\":10000,\"max\":20000}', text: '10K-20K' },\r\n  { val: '{\"min\":0,\"max\":10000}', text: '0-10K' },\r\n];\r\n\r\nexport const initStartYear = (year :number) => {\r\n  const col: ColumnFilterCombo = new ColumnFilterCombo('FromYear', 'sy', -1, years, year);\r\n  return col;\r\n};\r\n\r\nexport const initEndYear = (year :number) => {\r\n  const col: ColumnFilterCombo = new ColumnFilterCombo('ToYear', 'ey', -1, years, year);\r\n  return col;\r\n};\r\n\r\nexport const initCityPopSize = () => {\r\n  const col: ColumnFilterComboValText = new ColumnFilterComboValText('city_size', 'p1', 0, cityPopSizeArr, CITY_POP_SIZE_ALL);\r\n  return col;\r\n};\r\n","import Footer from \"../components/templates/Footer\";\r\n\r\nexport const reGroupResultIsSelfAcc = (data: any[]) => {\r\n    console.log('reGroupResultIsSelfAcc',data)\r\n    let res = new Array();\r\n    res.push({ _id: ' ', count: 0 });\r\n    res.push({ _id: '  ', count: 0 });\r\n    data.forEach(element => {\r\n        if (isSelfAccident(element._id)) {\r\n            res[0].count += element.count;\r\n        }else{\r\n            res[1].count += element.count;\r\n        }\r\n    });\r\n    return res;\r\n}\r\nexport const isSelfAccident= ( val :string) => {\r\n    let res = false;\r\n    switch (val) {\r\n        case '':\r\n        case '':\r\n        case '':\r\n        case '   ':\r\n        case '   ':\r\n        case '    ':\r\n        case '    ':\r\n        case '  ':\r\n            res = true;\r\n            break;\r\n        default:\r\n            res = false;\r\n    }\r\n    return res;\r\n}","import { observable } from 'mobx';\r\nimport {reGroupResultIsSelfAcc} from '../utils/groupByUtils';\r\n\r\nexport interface IGroupBy {\r\n  text: string;\r\n  value: string;\r\n  limit: number;\r\n  sort: number;\r\n  reGroupResultFunc? : any;\r\n}\r\n\r\nexport default class GroupBy implements IGroupBy {\r\n  @observable\r\n  text: string;\r\n\r\n  value: string;\r\n\r\n  limit: number;\r\n\r\n  sort: number;\r\n\r\n  reGroupResultFunc : any|null;\r\n\r\n  // text - headleine for GUI, value - name of value for filter\r\n  constructor(text: string, value: string, limit: number = 0, sort:number = 0, reGroupResultFunc?:any) {\r\n    this.text = text;\r\n    this.value = value;\r\n    this.limit = limit;\r\n    this.sort = sort;\r\n    if(reGroupResultFunc) this.reGroupResultFunc = reGroupResultFunc;\r\n  }\r\n\r\n}\r\n//init a group-by dictionary \r\nexport const initGroupMap = (useGetFetch: boolean) => {\r\n  if (useGetFetch) return initGroupMapForGet();\r\n  else return initGroupByDictForPost();\r\n}\r\n\r\nconst initGroupMapForGet = () => {\r\n  const map = new Map();\r\n  map.set('sev', new GroupBy('Severity', 'sev'));\r\n  map.set('injt', new GroupBy('TypeInjured', 'injt'));\r\n  map.set('vcl', new GroupBy('Vehicle', 'vcl'));\r\n  map.set('sex', new GroupBy('Gender', 'sex'));\r\n  map.set('age', new GroupBy('Age', 'age'));\r\n  map.set('pt', new GroupBy('Population', 'pt'));\r\n  map.set('year', new GroupBy('Year', 'year'));\r\n  map.set('mn', new GroupBy('Month', 'mn'));\r\n  map.set('dn', new GroupBy('DayNight', 'dn'));\r\n  map.set('wd', new GroupBy('WeekDay', 'wd'));\r\n  map.set('rt', new GroupBy('RoadType', 'rt'));\r\n  map.set('lca', new  GroupBy('LocationAccuracy', 'lca'))\r\n  map.set('city', new GroupBy('City', 'city', 15, -1));\r\n  map.set('cpop', new GroupBy('CityByPop', 'cpop'));\r\n  map.set('st', new GroupBy('Street', 'st', 15, -1));\r\n  map.set('rd', new GroupBy('Road', 'rd', 10, -1));\r\n  map.set('acc', new GroupBy('AccidentType', 'acc'));\r\n  map.set('selfacc', new GroupBy('SelfOrNotAcc', 'selfacc', 0, 0, reGroupResultIsSelfAcc));\r\n  map.set('vcli', new GroupBy('Vehicles', 'vcli'));\r\n  map.set('sp', new GroupBy('SpeedLimit', 'sp'));\r\n  map.set('rw', new GroupBy('RoadWidth', 'rw'));\r\n  map.set('ml', new GroupBy('Separator', 'ml'));\r\n  map.set('ol', new GroupBy('OneLane', 'ol'));\r\n  return map;\r\n};\r\n\r\nconst initGroupByDictForPost = () => {\r\n  const dictGroupBy: any = {};\r\n  dictGroupBy.Severity = new GroupBy('Severity', 'injury_severity_hebrew');\r\n  dictGroupBy.TypeInjured = new GroupBy('TypeInjured', 'injured_type_hebrew');\r\n  dictGroupBy.Vehicle = new GroupBy('Vehicle', 'vehicle_vehicle_type_hebrew');\r\n  dictGroupBy.Gender = new GroupBy('Gender', 'sex_hebrew');\r\n  dictGroupBy.Age = new GroupBy('Age', 'age_group_hebrew');\r\n  dictGroupBy.Year = new GroupBy('Year', 'accident_year');\r\n  dictGroupBy.Month = new GroupBy('Month', 'accident_month');\r\n  dictGroupBy.DayNight = new GroupBy('DayNight', 'day_night_hebrew');\r\n  dictGroupBy.WeekDay = new GroupBy('WeekDay', 'day_in_week_hebrew');\r\n  dictGroupBy.RoadType = new GroupBy('RoadType', 'road_type_hebrew');\r\n  dictGroupBy.City = new GroupBy('City', 'accident_yishuv_name', 10);\r\n  dictGroupBy.CityByPop = new GroupBy('CityByPop', 'accident_yishuv_name');\r\n  dictGroupBy.Street = new GroupBy('Street', 'street1_hebrew', 10);\r\n  dictGroupBy.Road = new GroupBy('Road', 'road1', 10);\r\n  dictGroupBy.AccidentType = new GroupBy('AccidentType', 'accident_type_hebrew');\r\n  dictGroupBy.Vehicles = new GroupBy('Vehicles', 'vehicles');\r\n  dictGroupBy.SpeedLimit = new GroupBy('SpeedLimit', 'speed_limit_hebrew');\r\n  dictGroupBy.RoadWidth = new GroupBy('RoadWidth', 'road_width_hebrew');\r\n  dictGroupBy.Separator = new GroupBy('Separator', 'multi_lane_hebrew');\r\n  dictGroupBy.OneLane = new GroupBy('OneLane', 'one_lane_hebrew');\r\n  return dictGroupBy;\r\n};\r\n","import { observable } from 'mobx';\r\n \r\nexport interface IGroupBy2 {\r\n  text: string;\r\n  name: string;\r\n  vals: any;\r\n}\r\n\r\nexport default class GroupBy2 implements IGroupBy2 {\r\n  @observable\r\n  text: string;\r\n\r\n  name: string;\r\n\r\n  vals: any;\r\n\r\n  constructor(text: string, name: string) {\r\n    this.text = text;\r\n    this.name = name;\r\n    this.vals = {};\r\n  }\r\n\r\n  revTrnas = (key: string) => {\r\n    if (key === '') return '';\r\n    const res = this.vals[key].name;\r\n    return res;\r\n  }\r\n\r\n  // input sample: {count : [{grp2: \"\", count: 3},  {grp2: \"\", count: 2} ]}\r\n  // output sample: {_id: \"2015\", male: 3, female: 2}\r\n  fixStrcutTable = (data: any[]) => {\r\n    const res = data.map((x) => {\r\n      const arr = x.count.map((y: any) => {\r\n        const engVal = this.revTrnas(y.grp2);\r\n        return (`\"${engVal}\":${y.count}`);\r\n      }).join(',');\r\n      // eslint-disable-next-line no-underscore-dangle\r\n      let xId = x._id;\r\n      if (xId !== null && xId !== undefined && typeof (xId) === 'string') xId = xId.replace('\"', '\\\\\"');\r\n      let sObject = `{\"_id\":\"${xId}\",${arr}}`;\r\n      sObject = JSON.parse(sObject);\r\n      return (sObject);\r\n    });\r\n    return res;\r\n  }\r\n\r\n  getBars = () => {\r\n    // [{key:\"male\",color:\"#8884d8\"},{key:\"female\",color:\"#82ca9d\"}]\r\n    const res = Object.entries(this.vals).map(([key, x]: any[]) => ({ key: x.name, color: x.color }));\r\n    return res;\r\n  }\r\n\r\n  getColumns = () => {\r\n    const res = Object.entries(this.vals).map(([key, x]: any[]) => (x.name));\r\n    res.unshift('_id');\r\n    return res;\r\n  }\r\n}\r\n","export default class GroupBy2Val {\r\n  name: string;\r\n  \r\n  color: string;\r\n\r\n  constructor(name: string, color: string) {\r\n    this.name = name;\r\n    this.color = color;\r\n  }\r\n}\r\n","import { observable, action } from 'mobx';\r\nimport GroupBy from './GroupBy';\r\nimport GroupBy2 from './GroupBy2';\r\nimport GroupBy2Val from './GroupBy2Val';\r\n\r\nexport default class GroupMap {\r\n    dict: Map<string,any>;\r\n    queryColName: string;\r\n\r\n    @observable\r\n    groupBy: GroupBy2|GroupBy;\r\n\r\n    constructor(map: Map<string,any>, colName: string,  defautVal: string) {\r\n        this.dict = map;\r\n        this.queryColName = colName;\r\n        this.groupBy = this.dict.get(defautVal);\r\n        this.setArrGroups();\r\n    }\r\n\r\n    @action\r\n    setFilter = (key: string) => {\r\n        this.groupBy = this.dict.get(key);\r\n    }\r\n\r\n    @observable\r\n    arrGroups: any[] = [];\r\n\r\n    @action\r\n    setArrGroups = () => {\r\n        this.arrGroups = Array.from(this.dict, ([key, item]) => ({ value: key, text: item.text }));\r\n    }\r\n\r\n    setBrowserQueryString = () => {\r\n        const params = new URLSearchParams(location.search);\r\n        if (this.groupBy instanceof GroupBy){\r\n            params.set(this.queryColName, (this.groupBy as GroupBy).value);\r\n        } else if (this.groupBy instanceof GroupBy2) {\r\n            params.set(this.queryColName, (this.groupBy as GroupBy2).name);\r\n        }\r\n        window.history.replaceState({}, '', `${location.pathname}?${params.toString()}`);\r\n    }\r\n\r\n    @action\r\n    setValuesByQuery = (params: URLSearchParams) => {\r\n        const val = params.get(this.queryColName);\r\n        if (val !== null) {\r\n             this.setFilter(val);\r\n        }\r\n    }\r\n}\r\n\r\nexport const initGroup2Map = (useGetFetch: boolean) => {\r\n    if (useGetFetch) return initGroup2DictForGet();\r\n    else return initGroup2DictForPost();\r\n  };\r\n\r\n  /**\r\n   * init a map of GroupBy2 objects, \r\n   * each GroupBy2 object has values, to be used in charts, \r\n   * keys are axpected values from server maped to lang values \r\n   * @returns \r\n   */\r\nconst initGroup2DictForGet = () => {\r\n    const dict = new Map()\r\n    const sev = new GroupBy2('Severity', 'sev');\r\n    sev.vals[''] = new GroupBy2Val('dead', '#8884D8');\r\n    sev.vals[' '] = new GroupBy2Val('severly-injured', '#82CA9D');\r\n    dict.set(sev.name, sev);\r\n\r\n    const gen = new GroupBy2('Gender', 'sex');\r\n    gen.vals[''] = new GroupBy2Val('male', '#8884D8');\r\n    gen.vals[''] = new GroupBy2Val('female', '#82CA9D');\r\n    dict.set(gen.name, gen);\r\n\r\n    const roadt = new GroupBy2('RoadType', 'rt');\r\n    roadt.vals[' '] = new GroupBy2Val('urban-junction', '#559E54');\r\n    roadt.vals['  '] = new GroupBy2Val('urban-road', '#305A30');\r\n    roadt.vals['- '] = new GroupBy2Val('non-urban-junction', '#1258DC');\r\n    roadt.vals['-  '] = new GroupBy2Val('non-urban-road', '#0A337F');\r\n    dict.set(roadt.name, roadt);\r\n\r\n    const year = new GroupBy2('Year', 'year');\r\n    year.vals[2015] = new GroupBy2Val('2015', '#82CA9D');\r\n    year.vals[2016] = new GroupBy2Val('2016', '#559E54');\r\n    year.vals[2017] = new GroupBy2Val('2017', '#559E54');\r\n    year.vals[2018] = new GroupBy2Val('2018', '#305A30');\r\n    year.vals[2019] = new GroupBy2Val('2019', '#305A30');\r\n    year.vals[2020] = new GroupBy2Val('2020', '#1258DC');\r\n    year.vals[2021] = new GroupBy2Val('2021', '#1258DC');\r\n    dict.set(year.name, year);\r\n\r\n    const dayNight = new GroupBy2('DayNight', 'dn');\r\n    dayNight.vals[''] = new GroupBy2Val('day', '#82CA9D');\r\n    dayNight.vals[''] = new GroupBy2Val('night', '#559E54');\r\n    dict.set(dayNight.name, dayNight);\r\n\r\n\r\n    const injt = new GroupBy2('TypeInjured', 'injt');\r\n    injt.vals[' '] = new GroupBy2Val('pedestrian', '#82CA9D');\r\n    injt.vals[' - '] = new GroupBy2Val('cyclist-d', '#559E54');\r\n    injt.vals[' -  ( )'] = new GroupBy2Val('cyclist-p', '#559E54');\r\n    injt.vals[' -   '] = new GroupBy2Val('inj-unknown-d', '#305A30');\r\n    injt.vals[' -   '] = new GroupBy2Val('inj-unknown-p', '#305A30');\r\n    injt.vals[' - '] = new GroupBy2Val('motorcycle-d', '#1258DC');\r\n    injt.vals[' -  ( )'] = new GroupBy2Val('motorcycle-p', '#1258DC');\r\n    injt.vals[' -   4  '] = new GroupBy2Val('wheels4+-d', '#0A337F');\r\n    injt.vals[' -   4  '] = new GroupBy2Val('wheels4+-p', '#0A337F');\r\n    dict.set(injt.name, injt);\r\n\r\n    const acc=  new GroupBy2('AccidentType', 'acc');\r\n    acc.vals['  '] = new GroupBy2Val('accType.ped', '#e3eaa7');\r\n    acc.vals['  '] = new GroupBy2Val('accType.front-side', '#03045E');\r\n    acc.vals['  '] = new GroupBy2Val('accType.front-front', '#4673FA');\r\n    acc.vals['  '] = new GroupBy2Val('accType.front-rear', '#00b4d8');\r\n    acc.vals['  '] = new GroupBy2Val('accType.side-side', '#90e0ef');\r\n    acc.vals['   '] = new GroupBy2Val('accType.obstacle3', '#ef6351');\r\n    acc.vals['   '] = new GroupBy2Val('accType.obstacle2', '#f38375');\r\n    acc.vals['     '] = new GroupBy2Val('accType.obstacle1', '#f7a399');\r\n    acc.vals['    '] = new GroupBy2Val('accType.offroad', '#fbc3bc');\r\n    acc.vals[''] = new GroupBy2Val('accType.turning-over', '#FA6E2D');\r\n    acc.vals[''] = new GroupBy2Val('accType.slip', '#BD5422');\r\n    acc.vals[''] = new GroupBy2Val('accType.other', '#a53860');\r\n    acc.vals['    '] = new GroupBy2Val('accType.passenger', '#31572c');\r\n    acc.vals['  '] = new GroupBy2Val('accType.falloff', '#4f772d');\r\n    acc.vals['  '] = new GroupBy2Val('accType.rear-front', '#CAF0F8');\r\n    acc.vals['   '] = new GroupBy2Val('accType.rear-side', '#CAF0F8');\r\n    acc.vals['   '] = new GroupBy2Val('accType.animal', '#ecf39e');\r\n    acc.vals['   '] = new GroupBy2Val('accType.cargo', '#0A337F');\r\n    dict.set(acc.name, acc);\r\n\r\n    return dict;\r\n}\r\n\r\nconst initGroup2DictForPost = () => {\r\n\r\n    const dict = {} as any;\r\n    dict.Severity = new GroupBy2('Severity', 'injury_severity_hebrew');\r\n    dict.Severity.vals[''] = new GroupBy2Val('dead', '#8884D8');\r\n    dict.Severity.vals[' '] = new GroupBy2Val('severly-injured', '#82CA9D');\r\n\r\n    dict.Gender = new GroupBy2('Gender', 'sex_hebrew');\r\n    dict.Gender.vals[''] = new GroupBy2Val('male', '#8884D8');\r\n    dict.Gender.vals[''] = new GroupBy2Val('female', '#82CA9D');\r\n\r\n    dict.RoadType = new GroupBy2('RoadType', 'road_type_hebrew');\r\n    dict.RoadType.vals[' '] = new GroupBy2Val('urban-junction', '#559E54');\r\n    dict.RoadType.vals['  '] = new GroupBy2Val('urban-road', '#305A30');\r\n    dict.RoadType.vals['- '] = new GroupBy2Val('non-urban-junction', '#1258DC');\r\n    dict.RoadType.vals['-  '] = new GroupBy2Val('non-urban-road', '#0A337F');\r\n\r\n    dict.Year = new GroupBy2('Year', 'accident_year');\r\n    dict.Year.vals[2015] = new GroupBy2Val('2015', '#82CA9D');\r\n    dict.Year.vals[2016] = new GroupBy2Val('2016', '#559E54');\r\n    dict.Year.vals[2017] = new GroupBy2Val('2017', '#559E54');\r\n    dict.Year.vals[2018] = new GroupBy2Val('2018', '#305A30');\r\n    dict.Year.vals[2019] = new GroupBy2Val('2019', '#305A30');\r\n\r\n    dict.TypeInjured = new GroupBy2('TypeInjured', 'injured_type_hebrew');\r\n    dict.TypeInjured.vals[' '] = new GroupBy2Val('pedestrian', '#82CA9D');\r\n    dict.TypeInjured.vals[' - '] = new GroupBy2Val('cyclist-d', '#559E54');\r\n    dict.TypeInjured.vals[' -  ( )'] = new GroupBy2Val('cyclist-p', '#559E54');\r\n    dict.TypeInjured.vals[' -   '] = new GroupBy2Val('inj-unknown-d', '#305A30');\r\n    dict.TypeInjured.vals[' -   '] = new GroupBy2Val('inj-unknown-p', '#305A30');\r\n    dict.TypeInjured.vals[' - '] = new GroupBy2Val('motorcycle-d', '#1258DC');\r\n    dict.TypeInjured.vals[' -  ( )'] = new GroupBy2Val('motorcycle-p', '#1258DC');\r\n    dict.TypeInjured.vals[' -   4  '] = new GroupBy2Val('wheels4+-d', '#0A337F');\r\n    dict.TypeInjured.vals[' -   4  '] = new GroupBy2Val('wheels4+-p', '#0A337F');\r\n\r\n    return dict;\r\n}","class AccidentService {\r\n  public fetchGetList = async (filter: string, type: string): Promise<Array<any> | undefined> => {\r\n    // Default options are marked with *\r\n    let url = '/api/v1/accident/';\r\n    url += filter;\r\n    // console.log(url);\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      mode: 'cors', // no-cors, *cors, same-origin\r\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin', // include, *same-origin, omit\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    });\r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    return response.json(); // parses JSON response into native JavaScript objects\r\n  };\r\n  \r\n  public fetchGetGroupBy = async (filter: string): Promise<Array<any> | undefined> => {\r\n    // Default options are marked with *\r\n    let url = '/api/v1/accident/groupby/';\r\n    url += filter;\r\n    // console.log(url);\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      mode: 'cors', // no-cors, *cors, same-origin\r\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin', // include, *same-origin, omit\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    });\r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    return response.json(); // parses JSON response into native JavaScript objects\r\n  };\r\n  \r\n  public fetchGetCount = async (filter: string, type: string): Promise<Array<any> | undefined> => {\r\n    // Default options are marked with *\r\n    let url = '/api/v1/accident/get';\r\n    url += filter;\r\n    // console.log(url);\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      mode: 'cors', // no-cors, *cors, same-origin\r\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin', // include, *same-origin, omit\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    });\r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    return response.json(); // parses JSON response into native JavaScript objects\r\n  };\r\n\r\n  public fetchFilter = async (filter: string, type: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/accident/${type}`;\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\npublic fetchAggregatFilter = async (filter: string, type: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = (type === 'main') ? '/api/v1/accident/aggmain' : '/api/v1/accident/agglatlon';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\npublic fetchAggregate = async (filter: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/accident/agg';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n}\r\nexport default new AccidentService();\r\n\r\n","export default class CityService {\r\n  getCityByNameHe = (cityName: string, collback: (res: any[]) => void) => {\r\n    // \"http://localhost:5000/api/v1/city?name_he=\"\r\n    const url = `/api/v1/city?name_he=${cityName}`;\r\n    fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    })\r\n      .then(\r\n        response => {\r\n          return response.json();}\r\n        )\r\n      .then(data => {\r\n        collback(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log('srv.getCityByNameHe',error)\r\n      });\r\n      ;\r\n  };\r\n\r\n  getCitiesNames(lang: string, collback: (res: any[]) => void) {\r\n    // \"http://localhost:5000/api/v1/city?lang=he\"\r\n    const url = `/api/v1/city?lang=${lang}`;\r\n    fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        collback(data);\r\n      });\r\n  }\r\n}\r\n","import Dexie from 'dexie';\r\n\r\nconst db = new Dexie('saftyData');\r\ndb.version(1).stores({\r\n  injuerd: 'id++,_id, accident_id, accident_year, accident_timestamp, sex_hebrew, accident_yishuv_name ,road_type_hebrew',\r\n});\r\n\r\nexport async function insertToDexie(data) {\r\n  // logger.log(\"insertToDexie\")\r\n  // logger.log(data)\r\n  await db.injuerd.bulkPut(data);\r\n  // testInsertDexie()\r\n}\r\n\r\nexport async function getFromDexie(arrFilters) {\r\n  let data;\r\n  if (arrFilters.length === 0) data = await db.injuerd.toArray();\r\n  else {\r\n    const years = arrFilters.shift();\r\n    let collection = await db.injuerd.where(years.filterName).between(years.startYear, years.endYear, true, true);\r\n    arrFilters.forEach((element) => {\r\n      collection = collection.and(((x) => {\r\n        if (element.values.length === 1) return x[element.filterName] === element.values[0];\r\n\r\n        let orFilter = false;\r\n        element.values.forEach((val) => orFilter = orFilter || x[element.filterName] === val);\r\n        return orFilter;\r\n      }));\r\n    });\r\n    data = await collection.toArray();\r\n  }\r\n  return data;\r\n}\r\n\r\n\r\n// var db1 = new Dexie('hellodb');\r\n// db1.version(1).stores({\r\n//     tasks: '++id,date,description,done'\r\n// });\r\n\r\n\r\n// export async function testInsertDexie() {\r\n//     var id = await db1.tasks.put({date: Date.now(), description: 'Test Dexie', done: 0});\r\n//     logger.log(\"Got id \" + id);\r\n//     // Now lets add a bunch of tasks\r\n//     await db1.tasks.bulkPut([\r\n//         {date: Date.now(), description: 'Test Dexie bulkPut()', done: 1},\r\n//         {date: Date.now(), description: 'Finish testing Dexie bulkPut()', done: 1}\r\n//     ]);\r\n// }\r\n\r\n\r\nexport default db;\r\n","export interface FilterLocalStorage {\r\n   url: string\r\n   description: string\r\n}\r\n\r\nexport class LocalStorageService<T> {\r\n\r\n   getLoaclStorage(key: string) {\r\n      let data = localStorage.getItem(key)\r\n      return data ? JSON.parse(data) : []\r\n   }\r\n\r\n   setLocalStorage(key: string, data: T[]) {\r\n      localStorage.setItem(key, JSON.stringify(data))\r\n   }\r\n\r\n}","import {\r\n   observable, action, computed,\r\n} from 'mobx';\r\nimport { IColumnFilter } from './ColumnFilterCheckBoxList';\r\nimport * as FC from './ColumnFilterCheckBoxList';\r\nimport * as FilterUtils from '../utils/FilterUtils';\r\nimport { ColumnFilterArray } from './ColumnFilterArray';\r\nimport { ColumnFilterCombo, initStartYear, initEndYear, initCityPopSize } from './ColumnFilterCombo';\r\nimport { IFilterChecker } from './FilterChecker';\r\nimport GroupBy, { initGroupMap } from './GroupBy';\r\nimport GroupBy2 from './GroupBy2';\r\nimport GroupMap, { initGroup2Map } from './GroupMap';\r\nimport RootStore from './RootStore';\r\nimport AccidentService from '../services/AccidentService';\r\nimport CityService from '../services/CityService';\r\nimport { insertToDexie, getFromDexie } from '../services/DexieInjuredService';\r\nimport logger from '../services/logger';\r\nimport { BBoxType } from './MapStore';\r\nimport Casualty from './Casualty';\r\nimport { FilterLocalStorage, LocalStorageService } from '../services/Localstorage.Service';\r\nimport citisNamesHeb from '../assets/cities_names_heb.json';\r\n// import autorun  from \"mobx\"\r\n\r\n\r\nexport default class FilterStore {\r\n   appInitialized = false\r\n\r\n   useGetFetch = true;\r\n\r\n   localStorageService: LocalStorageService<FilterLocalStorage>\r\n\r\n   constructor(rootStore: RootStore) {\r\n      // init app data\r\n      this.rootStore = rootStore;\r\n      this.injurySeverity = FC.initInjurySeverity();\r\n      this.setCasualtiesNames(this.injurySeverity);\r\n      // when\r\n      this.startYear = initStartYear(2019);\r\n      this.endYear = initEndYear(2023);\r\n      this.dayNight = FC.initDayNight();\r\n      // where\r\n      this.locationAccuracy = FC.initLocationAccuracy();\r\n      this.roadTypes = FC.initRoadTypes();\r\n      this.roads = new ColumnFilterArray('Road', 'rd', false);\r\n      this.roadSegment = new ColumnFilterArray('RoadSegment', 'rds', true);\r\n      this.cities = new ColumnFilterArray('City', 'city', true);\r\n      this.streets = new ColumnFilterArray('Street', 'st', true);\r\n      this.cityPopSizeRange = initCityPopSize();\r\n      // who\r\n      this.genderTypes = FC.initGenderTypes();\r\n      this.ageTypes = FC.initAgeTypes();\r\n      this.populationTypes = FC.initPopulationTypes();\r\n      // What\r\n      this.accidentType = FC.initAccidentType();\r\n      // what vehicle\r\n      this.injTypes = FC.initInjTypes();\r\n      this.vehicleType = FC.initVehicleTypesFull();\r\n      this.involvedVehicle = FC.initInvolvedVehicle();\r\n      // What Road\r\n      this.speedLimit = FC.initSpeedLimit();\r\n      this.roadWidth = FC.initRoadWidth();\r\n      this.separator = FC.initSeparator();\r\n      this.oneLane = FC.initOneLane();\r\n      //init Group-by dictionary\r\n      const map: Map<string, any> = initGroupMap(this.useGetFetch);\r\n      this.groupByDict = new GroupMap(map, 'gb', 'injt');\r\n      const mapGroupBy2 = initGroup2Map(this.useGetFetch);\r\n      this.group2Dict = new GroupMap(mapGroupBy2, 'gb2', 'sex');\r\n\r\n      // init data (on home page)\r\n      this.dataByYears = FC.initDataYreasUnfilterd();\r\n      this.dataFilterdByYears = FC.initDataYreasfilterd();\r\n      this.dataFilterd = FC.initDataGrpBy1();\r\n      this.dataGroupby2 = FC.initDataGrpBy2();\r\n      this.appInitialized = false;\r\n      this.localStorageService = new LocalStorageService();\r\n   }\r\n\r\n   rootStore: RootStore;\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // Config Filter\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   filtersArrayLocalStorage: FilterLocalStorage[] = []\r\n\r\n   @action\r\n   setCurrentFiltersArrayLocalStorage = () => {\r\n      this.filtersArrayLocalStorage = this.localStorageService.getLoaclStorage('my-filters')\r\n   }\r\n   @action\r\n   updateFilterArrayLocalStorage = (data: FilterLocalStorage) => {\r\n      this.filtersArrayLocalStorage = this.localStorageService.getLoaclStorage('my-filters')\r\n      this.filtersArrayLocalStorage.push(data)\r\n      this.localStorageService.setLocalStorage('my-filters', this.filtersArrayLocalStorage)\r\n   }\r\n\r\n   @observable\r\n   showAllVehicleTypes: boolean = false;\r\n\r\n   @action\r\n   updateShowAllVehicleTypes = (val: boolean) => {\r\n      this.showAllVehicleTypes = val;\r\n      if (this.showAllVehicleTypes) this.vehicleType = FC.initVehicleTypesFull();\r\n      else this.vehicleType = FC.initVehicleTypes();\r\n   }\r\n\r\n   @observable isUpdateFromUrl: boolean = true;\r\n\r\n   @action setIsUpdateFromUrl = (value: boolean) => {\r\n      this.isUpdateFromUrl = value;\r\n   }\r\n\r\n   @observable formCardKey: number = 0;\r\n   @action setFormCardKey = (value: number) => {\r\n      this.formCardKey = value;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // Severity\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   injurySeverity: IColumnFilter\r\n\r\n   @action\r\n   updateInjurySeverity = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.injurySeverity, aType, val);\r\n   }\r\n\r\n   @computed get isValidSeverity() {\r\n      const res = !this.injurySeverity.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   @observable\r\n   casualtiesNames: string = 'casualties';\r\n\r\n   @action\r\n   setCasualtiesNames = (injurySeverity: IColumnFilter) => {\r\n      let res = 'casualties';\r\n      const deadChecker: IFilterChecker = injurySeverity.arrTypes[0];\r\n      const sevIngChecker: IFilterChecker = injurySeverity.arrTypes[1];\r\n      if (deadChecker.checked && !sevIngChecker.checked) res = 'killed';\r\n      else if (!deadChecker.checked && sevIngChecker.checked) res = 'severely-injured';\r\n      this.casualtiesNames = res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // where\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   isMultipleCities: boolean = false;\r\n\r\n   @action\r\n   setIsMultipleCities = (isMulti: boolean) => {\r\n      this.isMultipleCities = isMulti;\r\n   }\r\n\r\n\r\n   @observable\r\n   cities: ColumnFilterArray;\r\n\r\n   @action\r\n   updateCities = (names: string[], updateCityResult: boolean) => {\r\n      this.cities.setFilter(names);\r\n      if (this.cities.arrValues.length === 0) {\r\n         this.streets.arrValues = [];\r\n      } else if (updateCityResult) {\r\n         [this.cityResult] = this.cities.arrValues;\r\n      }\r\n   }\r\n\r\n   // get city name by url query parmas\r\n   getCityNameFromQuery(query: URLSearchParams, defVal: string | undefined) {\r\n      let res = (defVal) ? [defVal] : [];\r\n      const name = query.get('city');\r\n      let found = false;\r\n      if (name !== null) {\r\n         const arr = name.split(',');\r\n         if (arr.length > 1 && this.isMultipleCities) {\r\n            res = arr;\r\n         } else {\r\n            found = citisNamesHeb.includes(name);\r\n            if (found) {\r\n               res = [citisNamesHeb.find((element) => element === name!)!];\r\n            }\r\n         }\r\n      }\r\n      return res;\r\n   }\r\n\r\n   @observable\r\n   cityResult: string = '';\r\n\r\n   @observable\r\n   streets: ColumnFilterArray;\r\n\r\n   @action\r\n   updateStreets = (names: string) => {\r\n      this.streets.setFilter(names.split(','));\r\n   }\r\n\r\n   @observable\r\n   roads: ColumnFilterArray;\r\n\r\n   @action\r\n   setRoads = (names: string[]) => {\r\n      this.roads.setFilter(names);\r\n   }\r\n\r\n   @observable\r\n   cityPopSizeRange: ColumnFilterCombo;\r\n\r\n   @action\r\n   setCityPopSizeRange = (range: string) => {\r\n      this.cityPopSizeRange.setFilter(range);\r\n   }\r\n\r\n\r\n   @observable\r\n   roadSegment: ColumnFilterArray;\r\n\r\n   @action\r\n   updateRoadSegment = (names: string) => {\r\n      this.roadSegment.setFilter(names.split(','));\r\n   }\r\n\r\n   @observable\r\n   roadTypes: IColumnFilter;\r\n\r\n   @action\r\n   updateRoadType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.roadTypes, aType, val);\r\n   }\r\n\r\n   @observable\r\n   locationAccuracy: IColumnFilter;\r\n\r\n   @action\r\n   updateLocationAccuracy = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.locationAccuracy, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhere() {\r\n      const res = !this.roadTypes.isAllValsFalse && !this.locationAccuracy.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // when\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   startYear: ColumnFilterCombo;\r\n\r\n   @action\r\n   setStartYear = (year: string) => {\r\n      this.startYear.setFilter(parseInt(year));\r\n   }\r\n\r\n   @observable\r\n   endYear: ColumnFilterCombo;\r\n\r\n   @action\r\n   setEndYear = (year: string) => {\r\n      this.endYear.setFilter(parseInt(year));\r\n   }\r\n\r\n   @observable\r\n   dayNight: IColumnFilter;\r\n\r\n   @action\r\n   updateDayNight = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.dayNight, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhen() {\r\n      const res = !this.dayNight.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // who\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   genderTypes: IColumnFilter\r\n\r\n   @action\r\n   updateGenderType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.genderTypes, aType, val);\r\n   }\r\n\r\n   @observable\r\n   ageTypes: IColumnFilter;\r\n\r\n   @action\r\n   updateAgeType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.ageTypes, aType, val);\r\n   }\r\n\r\n   @observable\r\n   populationTypes: IColumnFilter;\r\n\r\n   @action\r\n   updatePopulationType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.populationTypes, aType, val);\r\n   }\r\n\r\n   @computed get isValidWho() {\r\n      const res = !this.genderTypes.isAllValsFalse\r\n         && !this.ageTypes.isAllValsFalse && !this.populationTypes.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // What\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n   @observable\r\n   accidentType: IColumnFilter;\r\n\r\n   @action\r\n   updateAccidentType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.accidentType, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhat() {\r\n      const res = !this.accidentType.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // What Vehicle \r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n   /**\r\n   * injuerd type - for example pedestrian bycicle, car driver etc,\r\n   */\r\n   @observable\r\n   injTypes: IColumnFilter;\r\n\r\n   @action\r\n   updateInjuerdType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.injTypes, aType, val);\r\n   }\r\n\r\n   // vehicle Type of the killed / injured \r\n   @observable\r\n   vehicleType: IColumnFilter;\r\n\r\n   @action\r\n   updateVehicleType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.vehicleType, aType, val);\r\n   }\r\n\r\n   // vehicle that were in the accident\r\n   @observable\r\n   involvedVehicle: IColumnFilter;\r\n\r\n   @action\r\n   setInvolvedVehicle = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.involvedVehicle, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhatVehicle() {\r\n      const res = !this.injTypes.isAllValsFalse && !this.vehicleType.isAllValsFalse && !this.involvedVehicle.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // What Road\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n   @observable\r\n   speedLimit: IColumnFilter;\r\n\r\n   updateSpeedLimit = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.speedLimit, aType, val);\r\n   }\r\n\r\n   @observable\r\n   roadWidth: IColumnFilter;\r\n\r\n   @action\r\n   updateRoadWidth = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.roadWidth, aType, val);\r\n   }\r\n\r\n   @observable\r\n   separator: IColumnFilter;\r\n\r\n   @action\r\n   updateSeparator = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.separator, aType, val);\r\n   }\r\n\r\n   @observable\r\n   oneLane: IColumnFilter;\r\n\r\n   @action\r\n   updateOneLane = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.oneLane, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhatRoad() {\r\n      const res = !this.speedLimit.isAllValsFalse && !this.roadWidth.isAllValsFalse\r\n         && !this.separator.isAllValsFalse && !this.oneLane.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ////////////////////////////////////////////////////////////////////////////////////////////\r\n   // data\r\n   // ////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   injuriesCount: number = 0;\r\n\r\n   @action\r\n   setInjuriesCount = (val: number) => {\r\n      this.injuriesCount = val;\r\n      this.isLoadingInjuriesCount = false;\r\n   }\r\n\r\n   @observable\r\n   isLoadingInjuriesCount: boolean = false;\r\n\r\n   @observable\r\n   dataAllInjuries: Casualty[] = [];\r\n\r\n   @action\r\n   updateAllInjuries = (data: Casualty[]) => {\r\n      // looger.log(\"updateAllInjuries \",data.length)\r\n      this.setMarkersLoadStep(2);\r\n      this.dataAllInjuries = data;\r\n      this.rootStore.mapStore.setBounds(data, this.cities.arrValues);\r\n      if (this.rootStore.mapStore.bboxType === BBoxType.LOCAL_BBOX) {\r\n         this.rootStore.mapStore.getMarkersInLocalBBox(0.1);\r\n      }\r\n   }\r\n\r\n   @observable\r\n   dataMarkersLean: Casualty[] = []\r\n\r\n   @action\r\n   updateDataMarkersLean = (data: Casualty[]) => {\r\n      // logger.log(\"updateDataMarkersLean \",data.length)\r\n      this.setMarkersLoadStep(1);\r\n      this.dataMarkersLean = data;\r\n   }\r\n\r\n   // casualties groupd by yeras, filterd only by injurySeverity\r\n   @observable\r\n   dataByYears: any[] = []\r\n\r\n   // casualties groupd by yeras, filterd on main filter\r\n   @observable\r\n   dataFilterdByYears: any[] = []\r\n\r\n   @action\r\n   setDataFilterdByYears = (data: any[]) => {\r\n      this.dataFilterdByYears = data;\r\n   }\r\n\r\n   // casualties groupd by some group, filterd on main filter\r\n   @observable\r\n   dataFilterd: any[] = []\r\n\r\n   // casualties groupd by 2 groups, filterd on main filter\r\n   @observable\r\n   dataGroupby2: any[] = []\r\n\r\n   @observable\r\n   isLoading: boolean = false;\r\n\r\n   @computed get isValidAllFilters() {\r\n      const res = this.isValidSeverity && this.isValidWhen && this.isValidWho\r\n         && this.isValidWhere && this.isValidWhat && this.isValidWhatVehicle && this.isValidWhatRoad;\r\n      return res;\r\n   }\r\n\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   // group by\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   // @observable\r\n   // groupBy: GroupBy;\r\n\r\n   @action\r\n   updateGroupby = (key: string) => {\r\n      this.groupByDict.setFilter(key);\r\n      this.groupByDict.setBrowserQueryString();\r\n      if (!this.useGetFetch && this.groupByDict.groupBy.text === 'CityByPop') this.submitfilterdGroupByPop();\r\n      else this.submitfilterdGroup(this.groupByDict.groupBy as GroupBy);\r\n      if (this.groupByDict.groupBy.text !== 'CityByPop') {\r\n         const gb2 = (this.group2Dict.groupBy as GroupBy2).name\r\n         this.submitfilterdGroup2(this.groupByDict.groupBy as GroupBy, gb2);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Dictionary with key-value list of the group-by  \r\n    */\r\n   @observable\r\n   groupByDict: GroupMap;\r\n\r\n   @action\r\n   submitGroupByYears = () => {\r\n      if (this.useGetFetch) {\r\n         const filtermatch = this.getfilterBySeverityAndCity();\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, 'year');\r\n         AccidentService.fetchGetGroupBy(filter)\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== undefined) {\r\n                  const dataPadded = this.padDataYearsWith0(data);\r\n                  this.dataByYears = dataPadded;\r\n               }\r\n            });\r\n      }\r\n      else {\r\n         const filtermatch = this.getfilterBySeverityAndCity();\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, 'accident_year');\r\n         AccidentService.fetchAggregate(filter)\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== undefined) {\r\n                  const dataPadded = this.padDataYearsWith0(data);\r\n                  this.dataByYears = dataPadded;\r\n               }\r\n            });\r\n      }\r\n\r\n   }\r\n\r\n   /**\r\n    * convert parital array of years and count to full array\r\n    * if year is missing, add year and count = 0\r\n    * @param data array of years and counts, some of the years might be missing\r\n    */\r\n   padDataYearsWith0 = (data: any) => {\r\n      const yearsList = [];\r\n      for (let i = Number(this.startYear.queryValue); i <= Number(this.endYear.queryValue); i += 1) {\r\n         yearsList.push(i);\r\n      }\r\n      const data2 = yearsList.map((year) => {\r\n         const objDAta = data.find((x: any) => x._id === year);\r\n         const val = (objDAta) ? objDAta.count : 0;\r\n         return { _id: year, count: val };\r\n      });\r\n      return data2;\r\n   }\r\n\r\n   getCountFromGroupByRes = (data: any[]) => {\r\n      const res = data.reduce((b: number, x: any) => b + x.count, 0);\r\n      return res;\r\n   }\r\n\r\n   @action\r\n   submitfilterdGroupByYears = () => {\r\n      this.isLoadingInjuriesCount = true;\r\n      const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n      if (this.useGetFetch) {\r\n         const filtermatch = this.getFilterQueryString(null);\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, 'year', range.min, range.max);\r\n         AccidentService.fetchGetGroupBy(filter)\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== undefined) {\r\n                  const dataPadded = this.padDataYearsWith0(data);\r\n                  this.setDataFilterdByYears(dataPadded);\r\n                  const count = this.getCountFromGroupByRes(data);\r\n                  this.setInjuriesCount(count);\r\n               }\r\n            });\r\n      } else {\r\n         const filtermatch = this.getFilterForPost(null);\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, 'accident_year', range.min, range.max);\r\n         AccidentService.fetchAggregate(filter)\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== undefined) {\r\n                  const dataPadded = this.padDataYearsWith0(data);\r\n                  this.setDataFilterdByYears(dataPadded);\r\n                  const count = this.getCountFromGroupByRes(data);\r\n                  this.setInjuriesCount(count);\r\n               }\r\n            });\r\n      }\r\n   }\r\n\r\n\r\n   @action\r\n   submitfilterdGroup = (aGroupBy: GroupBy) => {\r\n      const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n      if (this.useGetFetch) {\r\n         const filtermatch = this.getFilterQueryString(null);\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, '', aGroupBy.limit, aGroupBy.sort);\r\n         // logger.log(filter);\r\n         AccidentService.fetchGetGroupBy(filter)\r\n            .then((data: any | undefined) => {\r\n               if(aGroupBy.reGroupResultFunc) {\r\n                  data = aGroupBy.reGroupResultFunc(data);\r\n               }\r\n               if (data !== undefined) this.dataFilterd = data;\r\n            });\r\n      } else {\r\n         const filtermatch = this.getFilterForPost(null);\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, '', aGroupBy.limit);\r\n         // logger.log(filter);\r\n         AccidentService.fetchAggregate(filter)\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== undefined) this.dataFilterd = data;\r\n            });\r\n      }\r\n\r\n   }\r\n\r\n    \r\n   /**\r\n    * deprecated function\r\n    */\r\n   @action\r\n   submitfilterdGroupByPop = () => {\r\n      const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n      const filtermatch = this.getFilterForPost(null);\r\n      const filter = FilterUtils.getFilterGroupByPop(filtermatch, range.min, range.max, -1, 15);\r\n      // logger.log(filter);\r\n      AccidentService.fetchAggregate(filter)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== undefined) {\r\n               this.dataFilterd = data;\r\n            }\r\n         });\r\n   }\r\n\r\n   @action\r\n   submitfilterdGroup2 = (aGroupBy: GroupBy, groupName2: string) => {\r\n      if (this.useGetFetch) {\r\n         const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n         const filtermatch = this.getFilterQueryString(null);\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, groupName2, aGroupBy.limit);\r\n         // logger.log(filter)\r\n         AccidentService.fetchGetGroupBy(filter)\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== undefined && data.length > 0) {\r\n                  try {\r\n                     const fixData = (this.group2Dict.groupBy as GroupBy2).fixStrcutTable(data);\r\n                     this.dataGroupby2 = fixData;\r\n                  } catch (error) {\r\n                     logger.log(error);\r\n                     this.dataGroupby2 = [];\r\n                  }\r\n               } else {\r\n                  this.dataGroupby2 = [];\r\n               }\r\n            });\r\n      } else {\r\n         const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n         const filtermatch = this.getFilterForPost(null);\r\n         const filter = FilterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, groupName2, aGroupBy.limit);\r\n         // logger.log(filter)\r\n         AccidentService.fetchAggregate(filter)\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== undefined && data.length > 0) {\r\n                  try {\r\n                     const fixData = (this.group2Dict.groupBy as GroupBy2).fixStrcutTable(data);\r\n                     this.dataGroupby2 = fixData;\r\n                  } catch (error) {\r\n                     logger.log(error);\r\n                     this.dataGroupby2 = [];\r\n                  }\r\n               } else {\r\n                  this.dataGroupby2 = [];\r\n               }\r\n            });\r\n      }\r\n\r\n   }\r\n\r\n   // @observable\r\n   // groupBy2: GroupBy2;\r\n\r\n   @action\r\n   updateGroupBy2 = (key: string) => {\r\n      this.group2Dict.setFilter(key);\r\n      this.group2Dict.setBrowserQueryString();\r\n      const gb2name = (this.group2Dict.groupBy as GroupBy2).name\r\n      this.submitfilterdGroup2(this.groupByDict.groupBy as GroupBy, gb2name);\r\n   }\r\n\r\n   @observable\r\n   group2Dict: GroupMap;\r\n\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   // filters actions\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   isUse2StepsMarkers: boolean = false;\r\n\r\n   @observable\r\n   markersLoadStep: number = 1;\r\n\r\n   @action\r\n   setMarkersLoadStep = (step: number) => {\r\n      if (this.isUse2StepsMarkers) this.markersLoadStep = step;\r\n   }\r\n\r\n   @action\r\n   submitFilter = () => {\r\n      // this.setMarkersLoadStep(0);\r\n      if (this.useLocalDb === 2) {\r\n         this.submitMainDataFilterLocalDb();\r\n      } else {\r\n         if (this.rootStore.mapStore.bboxType === BBoxType.SERVER_BBOX) {\r\n            this.rootStore.mapStore.submintGetMarkersBBox();\r\n         }\r\n         if (this.isUse2StepsMarkers) this.submintGetMarkerFirstStep();\r\n         this.submintMainDataFilter();\r\n      }\r\n      this.submitCityNameAndLocation();\r\n      this.submitGroupByYears();\r\n      this.submitfilterdGroupByYears();\r\n      // console.log((this.groupByDict.groupBy as GroupBy).text);\r\n      if (!this.useGetFetch && this.groupByDict.groupBy.text === 'CityByPop') this.submitfilterdGroupByPop();\r\n      else this.submitfilterdGroup(this.groupByDict.groupBy as GroupBy);\r\n      this.submitfilterdGroup2(this.groupByDict.groupBy as GroupBy, (this.group2Dict.groupBy as GroupBy2).name);\r\n      this.setCasualtiesNames(this.injurySeverity);\r\n      const lang = this.rootStore.uiStore.language;\r\n      if (this.rootStore.uiStore.currentPage === 'city') this.rootStore.imageStore.getImagesByPlace(this.cityResult, lang);\r\n   }\r\n\r\n   submintMainDataFilter = () => {\r\n      this.isLoading = true;\r\n      if (this.useGetFetch) {\r\n         const filter = this.getFilterQueryString(null);\r\n         this.setFiltersText(true);\r\n         this.setBrowserQueryString();\r\n         // logger.log(filter);\r\n         this.rootStore.mapStore.updateIsSetBounds(this.cities.arrValues, this.roadSegment.arrValues);\r\n         AccidentService.fetchGetList(filter, 'main')\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== null && data !== undefined) {\r\n                  this.updateAllInjuries(data);\r\n                  // write Data to local db\r\n                  if (this.useLocalDb === 1) insertToDexie(data);\r\n               }\r\n               this.isLoading = false;\r\n            });\r\n      } else {\r\n         const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n         const filter = this.getFilterForPost(null);\r\n         // logger.log(filter);\r\n         // const filter = FiterUtils.getFilterByCityPop(filterMatch, range.min, range.max);\r\n         this.rootStore.mapStore.updateIsSetBounds(this.cities.arrValues, this.roadSegment.arrValues);\r\n         AccidentService.fetchAggregatFilter(filter, 'main')\r\n            .then((data: any[] | undefined) => {\r\n               if (data !== null && data !== undefined) {\r\n                  this.updateAllInjuries(data);\r\n                  // write Data to local db\r\n                  if (this.useLocalDb === 1) insertToDexie(data);\r\n               }\r\n               this.isLoading = false;\r\n            });\r\n      }\r\n\r\n   }\r\n\r\n   submintGetMarkerFirstStep = () => {\r\n      const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n      const filter = this.getFilterForPost(null);\r\n      // const filter = FiterUtils.getFilterByCityPop(filterMatch, range.min, range.max);\r\n      AccidentService.fetchAggregatFilter(filter, 'latlon')\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== null && data !== undefined) {\r\n               this.updateDataMarkersLean(data);\r\n            }\r\n         });\r\n   }\r\n\r\n   submitCityNameAndLocation = () => {\r\n      if (this.cities.arrValues.length >= 1) {\r\n         const city = this.cities.arrValues[0];\r\n         const srvCity = new CityService();\r\n         //this.rootStore.mapStore.delQueryStrMapCenter();\r\n         var noop = function () { }; // do nothing.\r\n         const CenterByCityCallBack = (this.rootStore.mapStore.isCenterMapByCity()) ?\r\n            this.rootStore.mapStore.updateMapCenterByCity :\r\n            noop;\r\n         srvCity.getCityByNameHe(city, CenterByCityCallBack);\r\n         const index = 0;\r\n         this.cityResult = this.cities.arrValues[index];\r\n      } else this.cityResult = '';\r\n   }\r\n   /**\r\n    * get filter query string for the server request. \r\n    * @param bounds gis bound (rect) to filter\r\n    * @param useBounds if true will use gis bound to filter reqest\r\n    * @returns query string , for example ?sy=2017&sev=1&city=\"  -\",\"\"\r\n    */\r\n   getFilterQueryString = (bounds: any, useBounds: boolean = false) => {\r\n      //the oreder of the fileds is importnet for indexing in server\r\n      let filter = '?';\r\n      filter += this.startYear.getFilter();\r\n      filter += this.endYear.getFilter();\r\n      filter += this.injurySeverity.getFilter();\r\n      filter += this.cities.getFilter();\r\n      if (useBounds && bounds != null) filter += FilterUtils.getfilterBounds(bounds);\r\n      filter += this.dayNight.getFilter();\r\n      filter += this.streets.getFilter();\r\n      filter += this.roads.getFilter();\r\n      filter += this.roadSegment.getFilter();\r\n      filter += this.injTypes.getFilter();\r\n      filter += this.genderTypes.getFilter();\r\n      filter += this.ageTypes.getFilter();\r\n      filter += this.populationTypes.getFilter();\r\n      filter += this.accidentType.getFilter();\r\n      filter += this.vehicleType.getFilter();\r\n      filter += this.involvedVehicle.getFilter();\r\n      filter += this.locationAccuracy.getFilter();\r\n      filter += this.roadTypes.getFilter();\r\n      filter += this.speedLimit.getFilter();\r\n      filter += this.roadWidth.getFilter();\r\n      filter += this.separator.getFilter();\r\n      filter += this.oneLane.getFilter();\r\n      const range = JSON.parse(this.cityPopSizeRange.queryValue.toString());\r\n      filter += FilterUtils.getFilterByCityPop(range.min, range.max)\r\n      return filter;\r\n   }\r\n\r\n\r\n   /**\r\n    * set filters text - used in info-panel to show current filter\r\n    * @param ignoreIfAll - if true and if all option is cheked return blank\r\n    */\r\n   setFiltersText = (ignoreIfAll: boolean) => {\r\n      this.startYear.setText();\r\n      this.endYear.setText();\r\n      this.injTypes.setText(ignoreIfAll);\r\n      this.dayNight.setText(ignoreIfAll);\r\n      this.genderTypes.setText(ignoreIfAll);\r\n      this.ageTypes.setText(ignoreIfAll);\r\n      this.populationTypes.setText(ignoreIfAll);\r\n      this.locationAccuracy.setText(ignoreIfAll);\r\n      this.roadTypes.setText(ignoreIfAll);\r\n      this.cities.setText();\r\n      this.roads.setText();\r\n      this.cityPopSizeRange.setText();\r\n      this.accidentType.setText(ignoreIfAll);\r\n      this.vehicleType.setText(ignoreIfAll);\r\n      this.involvedVehicle.setText(ignoreIfAll);\r\n   }\r\n\r\n   /**\r\n    * set the QueryString of the browser by current filter\r\n    */\r\n   @action\r\n   setBrowserQueryString = () => {\r\n      const params = new URLSearchParams(location.search);\r\n      params.set('tab', this.rootStore.uiStore.currentTab);\r\n      this.startYear.setBrowserQueryString(params, false);\r\n      this.endYear.setBrowserQueryString(params, false);\r\n      this.injurySeverity.setBrowserQueryString(params, false);\r\n      this.roadTypes.setBrowserQueryString(params);\r\n      this.injTypes.setBrowserQueryString(params);\r\n      this.genderTypes.setBrowserQueryString(params);\r\n      this.ageTypes.setBrowserQueryString(params);\r\n      this.populationTypes.setBrowserQueryString(params);\r\n      this.cities.setBrowserQueryString(params);\r\n      this.roads.setBrowserQueryString(params);\r\n      this.locationAccuracy.setBrowserQueryString(params);\r\n      this.accidentType.setBrowserQueryString(params);\r\n      this.vehicleType.setBrowserQueryString(params);\r\n      this.involvedVehicle.setBrowserQueryString(params);\r\n      this.speedLimit.setBrowserQueryString(params);\r\n      this.roadWidth.setBrowserQueryString(params);\r\n      this.separator.setBrowserQueryString(params);\r\n      this.oneLane.setBrowserQueryString(params);\r\n      window.history.replaceState({}, '', `${location.pathname}?${params.toString()}`);\r\n\r\n      this.groupByDict.setBrowserQueryString();\r\n   }\r\n\r\n   /**\r\n    * udpate the store (and gui) using given qurey from the browser (on load time)\r\n    * @param defTab default tab to dispaly\r\n    * @param defCity default city to choose. (can be null)\r\n    */\r\n   @action\r\n   setStoreByQuery = (params: URLSearchParams, defCity?: string) => {\r\n      this.startYear.setValuesByQuery(params);\r\n      this.endYear.setValuesByQuery(params);\r\n      this.injurySeverity.setValuesByQuery(params);\r\n      this.dayNight.setValuesByQuery(params);\r\n      const citis = this.getCityNameFromQuery(params, defCity);\r\n      if (citis) this.updateCities(citis, true);\r\n      this.locationAccuracy.setValuesByQuery(params);\r\n      this.roadTypes.setValuesByQuery(params);\r\n      this.injTypes.setValuesByQuery(params);\r\n      this.genderTypes.setValuesByQuery(params);\r\n      this.ageTypes.setValuesByQuery(params);\r\n      this.populationTypes.setValuesByQuery(params);\r\n      this.accidentType.setValuesByQuery(params);\r\n      this.vehicleType.setValuesByQuery(params);\r\n      this.involvedVehicle.setValuesByQuery(params);\r\n      this.speedLimit.setValuesByQuery(params);\r\n      this.roadWidth.setValuesByQuery(params);\r\n      this.separator.setValuesByQuery(params);\r\n      this.oneLane.setValuesByQuery(params);\r\n      //update groupby\r\n      this.groupByDict.setValuesByQuery(params);\r\n      this.group2Dict.setValuesByQuery(params);\r\n\r\n   }\r\n\r\n\r\n\r\n   // old code - backup for post req\r\n   getFilterForPost = (bounds: any, useBounds: boolean = false) => {\r\n      let filter = '{\"$and\" : [';\r\n      filter += `{\"accident_year\":  { \"$gte\" : ${this.startYear},\"$lte\": ${this.endYear}}}`;\r\n      // filter += FiterUtils.getMultiplefilter(this.injurySeverity);\r\n      // filter += FiterUtils.getfilterCity(this.cities);\r\n      if (useBounds && bounds != null) filter += FilterUtils.getfilterBounds(bounds);\r\n      //filter += FiterUtils.getMultiplefilter(this.dayNight);\r\n      // filter += FiterUtils.getFilterStreets(this.streets);\r\n      // filter += this.getFilterFromNumArray(this.roads, 'road1');\r\n      // filter += this.getFilterFromArray(this.roadSegment, 'road_segment_name');\r\n      // filter += FiterUtils.getMultiplefilter(this.injTypes);\r\n      // filter += FiterUtils.getMultiplefilter(this.genderTypes);\r\n      // filter += FiterUtils.getMultiplefilter(this.ageTypes);\r\n      // filter += FiterUtils.getMultiplefilter(this.populationTypes);\r\n      // filter += FiterUtils.getMultiplefilter(this.accidentType);\r\n      // filter += FiterUtils.getMultiplefilter(this.vehicleType);\r\n      // filter += FiterUtils.getMultiplefilter(this.roadTypes);\r\n      // filter += FiterUtils.getMultiplefilter(this.speedLimit);\r\n      // filter += FiterUtils.getMultiplefilter(this.roadWidth);\r\n      // filter += FiterUtils.getMultiplefilter(this.separator);\r\n      // filter += FiterUtils.getMultiplefilter(this.oneLane);\r\n      filter += ']}';\r\n      return filter;\r\n   }\r\n\r\n   @action\r\n   updateFilters = (colFilter: IColumnFilter, aType: number, val: boolean) => {\r\n      colFilter.setFilter(aType, val);\r\n      if (colFilter.allTypesOption === -1) colFilter.arrTypes[aType].checked = val;\r\n      else if (aType === colFilter.allTypesOption) {\r\n         colFilter.arrTypes\r\n            .forEach((x, index) => x.checked = (index === colFilter.allTypesOption) ? val : !val);\r\n      } else {\r\n         colFilter.arrTypes[colFilter.allTypesOption].checked = false;\r\n         colFilter.arrTypes[aType].checked = val;\r\n      }\r\n   }\r\n\r\n   getfilterBySeverityAndCity = () => {\r\n      let filter = '?';\r\n      filter += this.startYear.getFilter();\r\n      filter += this.injurySeverity.getFilter();\r\n      filter += this.cities.getFilter();\r\n      // filter += FiterUtils.getFilterFromArray('city', this.cities.arrValues);\r\n      return filter;\r\n   }\r\n\r\n   getFilterFromArray = (arr: string[], filterName: string) => {\r\n      let filter: string = '';\r\n      if (arr.length > 0 && arr[0] !== '') {\r\n         filter += ',{\"$or\": [';\r\n         filter += arr.map((x: string) => `{\"${filterName}\" : \"${x.trim()}\"}`).join(',');\r\n         filter += ']}';\r\n      }\r\n      return filter;\r\n   }\r\n   getFilterFromNumArray = (arr: string[], filterName: string) => {\r\n      let filter: string = '';\r\n      if (arr.length > 0) {\r\n         filter += ',{\"$or\": [';\r\n         filter += arr.map((x: string) => `{\"${filterName}\" : ${parseInt(x, 10)}}`).join(',');\r\n         filter += ']}';\r\n      }\r\n      return filter;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // local db filters - idb using Dexie.js\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   useLocalDb = 0;\r\n\r\n   submitMainDataFilterLocalDb = () => {\r\n      this.isLoading = true;\r\n      const arrFilters = this.getFilterIDB();\r\n      this.rootStore.mapStore.updateIsSetBounds(this.cities.arrValues, this.roadSegment.arrValues);\r\n      // logger.log(arrFilters);\r\n      getFromDexie(arrFilters)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== null && data !== undefined) {\r\n               this.updateAllInjuries(data);\r\n            }\r\n            this.isLoading = false;\r\n         });\r\n   }\r\n\r\n   submintGetMarkersBBoxIdb = (mapBounds: L.LatLngBounds) => {\r\n      const arrFilters = this.getFilterBboxIDB(mapBounds);\r\n      getFromDexie(arrFilters)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== null && data !== undefined) {\r\n               this.rootStore.mapStore.updateDataMarkersInBounds(data);\r\n            }\r\n         });\r\n   }\r\n\r\n   getFilterIDB = () => {\r\n      const arrFilters: any[] = [];\r\n      const years = { filterName: 'accident_year', startYear: this.startYear.queryValue.toString(), endYear: this.endYear.queryValue.toString() };\r\n      arrFilters.push(years);\r\n      this.getfilterCityIDB(arrFilters);\r\n      this.getFilterStreetsIDB(arrFilters);\r\n      this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n      this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment.arrValues);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n      this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n      this.getMultiplefilterIDB(arrFilters, this.separator);\r\n      this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n      return arrFilters;\r\n   }\r\n\r\n   getFilterBboxIDB = (bounds: L.LatLngBounds) => {\r\n      const arrFilters: any[] = [];\r\n      const bbox = { filterName: 'bbox', p1: bounds.getSouthWest, p2: bounds.getNorthEast };\r\n      arrFilters.push(bbox);\r\n      const years = { filterName: 'accident_year', startYear: this.startYear.queryValue.toString(), endYear: this.endYear.queryValue.toString() };\r\n      arrFilters.push(years);\r\n      this.getfilterCityIDB(arrFilters);\r\n      this.getFilterStreetsIDB(arrFilters);\r\n      this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n      this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment.arrValues);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n      this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n      this.getMultiplefilterIDB(arrFilters, this.separator);\r\n      this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n      return arrFilters;\r\n   }\r\n\r\n   getMultiplefilterIDB = (arrFilters: any[], colFilter: IColumnFilter) => {\r\n      if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) {\r\n         return;\r\n      }\r\n      let allChecked: boolean = true;\r\n      let arrfilter: number[] = [];\r\n      const iterator = colFilter.arrTypes.values();\r\n      for (const filterCheck of iterator) {\r\n         if (filterCheck.checked) {\r\n            arrfilter = [...arrfilter, ...filterCheck.filters];\r\n         } else {\r\n            allChecked = false;\r\n         }\r\n      }\r\n      if (!allChecked) {\r\n         const filterVals = arrfilter.map((x: number) => {\r\n            if (x === -1) return null;\r\n            return x;\r\n         });\r\n         const filter = { filterName: colFilter.queryColName, values: filterVals };\r\n         arrFilters.push(filter);\r\n      }\r\n   }\r\n\r\n   getfilterCityIDB = (arrFilters: any[]) => {\r\n      if (this.cities.arrValues.length > 0) {\r\n         const filter = { filterName: 'accident_yishuv_name', values: this.cities.arrValues };\r\n         arrFilters.push(filter);\r\n      }\r\n   }\r\n\r\n   getFilterStreetsIDB = (arrFilters: any[]) => {\r\n      if (this.streets.arrValues.length > 0 && this.streets.arrValues[0] !== '') {\r\n         const filter1 = { filterName: 'street1_hebrew', values: this.streets.arrValues.map((x: string) => x.trim()) };\r\n         arrFilters.push(filter1);\r\n         // const filter2 = { filterName: \"street2_hebrew\", values: this.streets.map((x: string) => {x.trim()}) }\r\n         // arrFilters.push(filter2)\r\n      }\r\n   }\r\n\r\n   getFilterFromArrayIDb = (arrFilters: any[], filterName: string, arr: string[]) => {\r\n      if (arr.length > 0 && arr[0] !== '') {\r\n         const filter = { filterName, values: arr.map((x: string) => x.trim()) };\r\n         arrFilters.push(filter);\r\n      }\r\n   }\r\n}\r\n\r\n// autorun(() =>{\r\n//     logger.log(store.todos[0])\r\n//     logger.log(store.filter)\r\n// })\r\n\r\n// export default store\r\n","import { observable, action, reaction } from 'mobx';\r\nimport i18n from '../i18n';\r\nimport RootStore from './RootStore';\r\nimport { setBrowserQueryString } from '../utils/queryStringUtils';\r\nimport logger from '../services/logger';\r\n// import autorun  from \"mobx\"\r\n\r\nexport default class UiStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n    this.initLang();\r\n    this.appInitialized = false;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  // ////////////////////////////////////////////\r\n  @observable\r\n  language: string = 'he'\r\n\r\n  @action\r\n  updateLanguage = (lang: string) => {\r\n    this.language = lang;\r\n    localStorage.setItem('lang', JSON.stringify(lang));\r\n    const dir = (lang === 'en') ? 'ltr' : 'rtl';\r\n    this.setDirection(dir);\r\n  }\r\n\r\n  @observable\r\n  direction: string = 'rtl';\r\n\r\n  @action\r\n  setDirection = (val: string) => {\r\n    this.direction = val;\r\n  }\r\n\r\n  reactionChangeLang = reaction(\r\n    () => this.language,\r\n    (locale) => {\r\n      i18n.changeLanguage(locale);\r\n    },\r\n  )\r\n\r\n  initLang = () => {\r\n    try {\r\n      const slang = localStorage.getItem('lang');\r\n      if (slang !== null) {\r\n        const lang = JSON.parse(slang);\r\n        this.updateLanguage(lang);\r\n      }\r\n    } catch (error) {\r\n      logger.log(error);\r\n    }\r\n  }\r\n\r\n  @observable\r\n  showFilterModal: boolean = false;\r\n\r\n  @action\r\n  setShowFilterModal = (val: boolean) => {\r\n    this.showFilterModal = val;\r\n  }\r\n\r\n  @observable\r\n  initPage: boolean = false;\r\n  @action\r\n  setInitPage = (val: boolean) => {\r\n    this.initPage = val;\r\n  }\r\n\r\n   /**\r\n    * udpate the store (and gui) using given qurey from the browser (on load time)\r\n    * @param defTab default tab to dispaly\r\n    * @param defCity default city to choose. (can be null)\r\n    */\r\n  @action\r\n  setStoreByQuery = (defTab: string, defCity?: string) => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    //set tab\r\n    const tab = this.getValFromQuery(params, 'tab', defTab);\r\n      if (tab) this.setCurrentTab(tab);\r\n    //set other stores\r\n    this.rootStore.filterStore.setStoreByQuery(params, defCity);\r\n    this.rootStore.mapStore.setStoreByQuery(params);\r\n  }\r\n\r\n   // get name by url query parmas\r\n   getValFromQuery= (query: URLSearchParams, name: string, defVal?: string) => {\r\n    const val = query.get(name);\r\n    const res = (val !== null) ? val : defVal;\r\n    return res;\r\n }\r\n\r\n  /**\r\n   * current page\r\n   */\r\n  @observable\r\n  currentPage: string = 'home';\r\n\r\n  @action\r\n  setCurrentPage = (pageType: string) => {\r\n    this.currentPage = pageType;\r\n  }\r\n\r\n  @observable\r\n  currentTab: string = 'charts';\r\n\r\n  @action\r\n  setCurrentTab = (tabName: string) => {\r\n    this.currentTab = tabName;\r\n    this.setQueryStrTab();\r\n  }\r\n\r\n  @action\r\n  setQueryStrTab = () => {\r\n    setBrowserQueryString('tab', this.currentTab);\r\n  }\r\n\r\n\r\n  @observable\r\n  searchParams: string = '';\r\n\r\n  // @action\r\n  // setSearchParams = () => {\r\n  //   let res = '';\r\n  //   if (this.currentPage === 'home') {\r\n  //     res += `?tab=${this.currentTab}`;\r\n  //   } else {\r\n  //     res += `?name=${this.rootStore.filterStore.cityResult}`;\r\n  //     res += `&tab=${this.currentTab}`;\r\n  //   }\r\n  //   // if (!this.rootStore.filterStore.injTypes.isAllValsFalse()) {\r\n  //   // }\r\n  //   this.searchParams = res;\r\n  // }\r\n\r\n  @observable\r\n  chartType: string = 'BarChart';\r\n\r\n  @observable\r\n  chartTypeList: string[] = ['BarChart', 'PieChart', 'HorizontalBar'];\r\n\r\n  @action\r\n  updateChartType = (val: string) => {\r\n    this.chartType = val;\r\n  }\r\n\r\n  @observable\r\n  showPercentageChart: boolean = false\r\n\r\n  @action\r\n  updateShowPercentageChart = (val: boolean) => {\r\n    this.showPercentageChart = val;\r\n  }\r\n}\r\n","import IimageEntity from '../stores/ImageEntity';\r\n\r\nexport const fetchListImgByTag = async (tag: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = (lang === '') ? `/api/v1/img/tags/${tag}` : `/api/v1/img/tags/${lang}/${tag}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\nexport const fetchListImgByPlace = async (place: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/place/${lang}/${place}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const uploadImg = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  if (image.file === undefined) return [];\r\n  const formData = new FormData();\r\n  formData.append('titlehe', image.titlehe);\r\n  formData.append('texthe', image.texthe);\r\n  formData.append('image', image.file);\r\n  formData.append('tags', image.tags);\r\n  formData.append('place', image.place);\r\n  if (image.index !== undefined) formData.append('index', image.index?.toString());\r\n  const url = '/api/v1/img/';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    body: formData,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const updateImgProps = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/img/props';\r\n  const response = await fetch(url, {\r\n    method: 'PUT',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: JSON.stringify(image),\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchImg = async (fileName: string):\r\n  Promise<any| undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/${fileName}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response; // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport default fetchImg;\r\n","import { observable, action } from 'mobx';\r\nimport RootStore from './RootStore';\r\nimport {\r\n  fetchListImgByTag, fetchListImgByPlace, updateImgProps, uploadImg,\r\n} from '../services/ImageService';\r\nimport IimageEntity from './ImageEntity';\r\n\r\nexport default class ImageStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  @observable\r\n  imageList: IimageEntity[] = [];\r\n\r\n  @action\r\n  setImageList = (data: IimageEntity[]) => {\r\n    this.imageList = data;\r\n    if (this.imageList.length > 0) this.setCurrImage(this.imageList[0]);\r\n  }\r\n\r\n  @observable\r\n  isLoading: boolean = false;\r\n\r\n  @observable\r\n  currTag: string = '';\r\n\r\n  @action\r\n  setCurrTag = (tag: string) => {\r\n    this.currTag = tag;\r\n    const lang = this.rootStore.uiStore.language;\r\n    this.getImagesByTag(tag, lang);\r\n  }\r\n  tagsArr = [\r\n    { val: \"\", text: 'general' },\r\n    { val: \" \", text: 'pedestrian' },\r\n    { val: \" \", text: 'cyclist' },\r\n    { val: \" \", text: 'motorcycle' },\r\n    { val: \"\", text: 'car' },\r\n    { val: \"\", text: 'bus' },\r\n    { val: \"\", text: 'kids' },\r\n  ];\r\n\r\n  @observable\r\n  currImage: IimageEntity| null = null;\r\n\r\n  @action\r\n  setCurrImage = (image: IimageEntity) => {\r\n    this.currImage = image;\r\n  }\r\n\r\n  @observable\r\n  hideDescription = false;\r\n\r\n  @action\r\n  toggleHideDescription = () => {\r\n    this.hideDescription = !this.hideDescription;\r\n    if (this.hideDescription) {\r\n      document.documentElement.style.setProperty('--image-gallery-description-visable', 'none');\r\n    } else document.documentElement.style.setProperty('--image-gallery-description-visable', 'inherit');\r\n  }\r\n\r\n  setCurrImageVal= <T extends keyof IimageEntity, K extends IimageEntity[T]> (valName: T, val: K) => {\r\n    if (this.currImage !== null) this.currImage[valName] = val;\r\n  }\r\n\r\n  submitImageFile = () => {\r\n    if (this.currImage !== null) {\r\n      if (this.currImage._id === 0 && this.currImage.file !== undefined) {\r\n        uploadImg(this.currImage);\r\n      } else updateImgProps(this.currImage);\r\n    }\r\n  };\r\n\r\n  getImages = (type :string) => {\r\n    const lang = this.rootStore.uiStore.language;\r\n    if (type === 'city') {\r\n      const city = this.rootStore.filterStore.cityResult;\r\n      this.getImagesByPlace(city, lang);\r\n    } else {\r\n      this.getImagesByTag(this.currTag, lang);\r\n    }\r\n  }\r\n\r\n  getImagesByTag = (tag :string, lang: string) => {\r\n    this.isLoading = true;\r\n    fetchListImgByTag(tag, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  getImagesByPlace = (place :string, lang: string) => {\r\n    // this.isLoading = true;\r\n    fetchListImgByPlace(place, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        // this.isLoading = false;\r\n      });\r\n  }\r\n}\r\n","// https://mobx-react.js.org/recipes-context\r\nimport React from 'react'\r\nimport RootStore from './RootStore';\r\n\r\nexport const store = new RootStore();\r\nexport const StoreContext = React.createContext(store);\r\nexport const useStore = (): RootStore => {\r\n  const store = React.useContext(StoreContext);\r\n  if (!store) {\r\n    // this is especially useful in TypeScript so you don't need to be checking for null all the time\r\n    throw new Error('You have forgot to use StoreProvider, shame on you.')\r\n  }\r\n  return store\r\n};\r\n\r\n/* // see: https://facebook.github.io/create-react-app/docs/adding-custom-environment-variables\r\nif(process.env.NODE_ENV !== 'production') {\r\n  // @ts-ignore\r\n  window['store'] = store;\r\n} */","import FilterStore from './FilterStore';\r\nimport UiStore from './UiStore';\r\nimport MapStore from './MapStore';\r\nimport ImageStore from './ImageStore'\r\n\r\nexport default class RootStore {\r\n    appInitialized = false;\r\n\r\n    constructor() {\r\n      this.uiStore = new UiStore(this);\r\n      this.mapStore = new MapStore(this);\r\n      this.filterStore = new FilterStore(this);\r\n      this.imageStore = new ImageStore(this);\r\n    }\r\n\r\n    uiStore: UiStore;\r\n\r\n    mapStore: MapStore;\r\n\r\n    filterStore: FilterStore;\r\n\r\n    imageStore: ImageStore;\r\n}\r\n","import React, { PropsWithChildren } from 'react'\r\n\r\ninterface SmallCard2Props extends PropsWithChildren<any> {\r\n   header?: string,\r\n   style?: any,\r\n}\r\n\r\nconst SmallCard2: React.FC<SmallCard2Props> = ({ children, header, style }) => {\r\n   const cardHeader = header ? <> <h6>{header}</h6> <hr /> </> : null;\r\n   return (\r\n      <div\r\n         style={{...style}}\r\n         className=\"p-3 bg-white rounded shadow\">\r\n         {cardHeader}\r\n         {children}\r\n      </div>\r\n   )\r\n}\r\nexport default SmallCard2","\r\nimport React, { ChangeEvent, memo } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\ninterface IProps {\r\n  label: string,\r\n  group: string,\r\n  id: number,\r\n  checked: boolean,\r\n  onChange: (e: ChangeEvent<HTMLInputElement>) => any\r\n}\r\nconst Checkbox: React.FC<IProps> = ({\r\n  group, label, id, checked, onChange,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Check inline label={t(label)} type=\"checkbox\" id={`cbox${group}${id}`} checked={checked} onChange={onChange} />\r\n  );\r\n};\r\nexport default memo(Checkbox);\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport { observer } from 'mobx-react';\r\n\r\ninterface IProps {\r\n  title: string;\r\n  showModal: boolean;\r\n  setShow: (show: boolean) => void;\r\n  children: any;\r\n  size?: \"sm\" | \"lg\" | \"xl\" | undefined;\r\n  action?: (val?: any) => void;\r\n}\r\n\r\n\r\nconst ConfigModal: React.FC<IProps> = observer(({\r\n  title, showModal, setShow, children, size, action\r\n}: IProps) => {\r\n\r\n  const { t } = useTranslation();\r\n  const handleClose = () => setShow(false);\r\n  const { filterStore } = useStore();\r\n\r\n  const submitChanges = action ?\r\n    <Button\r\n      variant=\"primary\"\r\n      onClick={action}\r\n      disabled={filterStore.isLoading || !filterStore.isValidAllFilters}\r\n    >\r\n      {filterStore.isLoading ? t('Loading') : t('Submit')}\r\n    </Button>\r\n    : null\r\n\r\n  return (\r\n    <Modal\r\n      size={size}\r\n      show={showModal}\r\n      onHide={handleClose}\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>{t(title)}</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body style={{ maxHeight: 'calc(100vh - 240px)', overflowY: 'auto' }}>\r\n        {children}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        {submitChanges}\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          {t('Close')}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n});\r\nexport default React.memo(ConfigModal);\r\n","/**\r\n * singlton logger class\r\n */\r\nclass Logger {\r\n  log(message) {\r\n    console.log(message);\r\n  }\r\n\r\n  error(message) {\r\n    console.error(message);\r\n  }\r\n}\r\nconst logger = new Logger();\r\nObject.freeze(logger);\r\nexport default logger;\r\n","import React from 'react';\r\nimport logger from '../../services/logger';\r\n\r\ninterface IProps {\r\n}\r\ninterface IState {\r\n  hasError: boolean;\r\n}\r\nclass ErrorBoundary extends React.Component<IProps, IState> {\r\n  constructor(props:IProps) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error:any) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error:any, errorInfo:any) {\r\n    // You can also log the error to an error reporting service\r\n    // logErrorToMyService(error: TypeError, errorInfo);\r\n    logger.error(error);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\nexport default ErrorBoundary;\r\n","import React from 'react'\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport '../../styles/loader.css'\r\nconst Loader: React.FC<any> = () => <div className=\"loader-con\"> <Spinner animation=\"border\" variant=\"info\" /></div>\r\n\r\nexport default Loader\r\n","import React, { FunctionComponent, lazy, Suspense, } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport ErrorBoundary from '../atoms/ErrorBoundary';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport Loader from '../atoms/Loader';\r\nimport SmallCard2 from '../atoms/SmallCard2';\r\n\r\ninterface IProps {\r\n  type: string;\r\n}\r\n\r\nconst GroupByGraphsPanel = lazy(() => import('../organisms/GroupByGraphsPanel'));\r\nconst GroupByTablesPanel = lazy(() => import('../organisms/GroupByTablesPanel'));\r\nconst MapAccidents = lazy(() => import('../organisms/MapAccidents'));\r\nconst AccidentsTable = lazy(() => import('../organisms/AccidentsTable'));\r\nconst MyImageGallery = lazy(() => import('../organisms/MyImageGallery'));\r\n\r\nconst styles = {\r\n  tab: { marginTop: '0.5rem' },\r\n  tabMap: { marginTop: '0.1rem' },\r\n  mapCard: { width: '150px', height: '35px' }\r\n};\r\n\r\nexport const TabsTemplate: FunctionComponent<IProps> = observer(({ type }) => {\r\n  const { t } = useTranslation();\r\n  const { mapStore, uiStore } = useStore();\r\n  // const [activeKey] = useState(uiStore.);\r\n  // defaultActiveKey={uiStore.currentTab}\r\n  return (\r\n    <Tabs\r\n      mountOnEnter\r\n      activeKey={uiStore.currentTab}\r\n      id=\"main-tabs\"\r\n      onSelect={(tabActiveKey: any) => {\r\n        if (tabActiveKey === 'map') {\r\n          // map is renderd only when tab is shown to prevent leaflet bug\r\n          mapStore.isReadyToRenderMap = true;\r\n        } else mapStore.isReadyToRenderMap = false;\r\n        uiStore.setCurrentTab(tabActiveKey);\r\n      }}\r\n    >\r\n      <Tab style={styles.tab} eventKey=\"charts\" title={t('Charts')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <GroupByGraphsPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={styles.tab} eventKey=\"groups\" title={t('Groups')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <GroupByTablesPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={styles.tabMap} eventKey=\"map\" title={t('Map')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <SmallCard2>\r\n              <MapAccidents />\r\n            </SmallCard2>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={styles.tab} eventKey=\"table\" title={t('Table')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <div className=\"col-auto\"><AccidentsTable /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={styles.tab} eventKey=\"image\" title={t('Images')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <div className=\"col-auto\"><MyImageGallery type={type} /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n    </Tabs>\r\n  );\r\n});\r\nexport default TabsTemplate;\r\n","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\n// @ts-ignore\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport citisNamesHeb from '../../assets/cities_names_heb.json';\r\n\r\ninterface IProps {\r\n  isMultiple?: boolean\r\n}\r\n\r\nconst CitySelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { filterStore } = useStore();\r\n  const { cities, updateCities} = filterStore;\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Group controlId=\"exampleForm.ControlCity\">\r\n      <Form.Label className=\"filterLable\">\r\n        {t('City')}:\r\n      </Form.Label>\r\n      <Typeahead\r\n        id=\"typeaheadCity\"\r\n        // defaultSelected={[store.city]}\r\n        onChange={(selected: string[]) => {\r\n          updateCities(selected, true);\r\n        }}\r\n        options={citisNamesHeb}\r\n        multiple={isMultiple}\r\n        selected={cities.arrValues}\r\n      />\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default CitySelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {}\r\nconst StreetSelector: React.FC<IProps> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { streets, cities } = filterStore;\r\n  const { t } = useTranslation();\r\n  if (cities.arrValues.length > 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlStreet\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('Street')}\r\n:\r\n        </Form.Label>\r\n        <Form.Control \r\n          type=\"input\" \r\n          placeholder=\"\" \r\n          value={streets.arrValues.toString()} \r\n          onChange={(e: ChangeEvent<HTMLInputElement>) => { filterStore.updateStreets(e.target.value); }} \r\n          />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default StreetSelector;\r\n","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\n// @ts-ignore\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport roadNames from '../../assets/road_names.json';\r\n\r\ninterface IProps {\r\n  isMultiple?: boolean\r\n}\r\n\r\nconst RoadNameSelector: React.FC<IProps> = observer(({ isMultiple = true }) => {\r\n  const { filterStore } = useStore();\r\n  const {roads, setRoads} = filterStore;\r\n  const {arrValues} = roads;\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Group controlId=\"filterForm.ControlRoad\">\r\n      <Form.Label className=\"filterLable\">\r\n        {t('Road')}:\r\n      </Form.Label>\r\n      <Typeahead\r\n        id=\"typeaheadCity\"\r\n        // defaultSelected={[store.city]}\r\n        onChange={(selected: string[]) => {\r\n          setRoads(selected);\r\n        }}\r\n        inputProps={{\r\n          type: 'number',\r\n        }}\r\n        options={roadNames}\r\n        multiple={isMultiple}\r\n        selected={arrValues}\r\n      />\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default RoadNameSelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n  isMultiple?: boolean\r\n}\r\nconst RoadSegmentSelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { cities, roadSegment, updateRoadSegment } = filterStore;\r\n  if (cities.arrValues.length === 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlRoadSegment\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('RoadSegment')}\r\n          :\r\n        </Form.Label>\r\n        <Form.Control\r\n          type=\"input\"\r\n          placeholder=\"\"\r\n          value={roadSegment.arrValues.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { updateRoadSegment(e.target.value); }}\r\n        />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default RoadSegmentSelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Checkbox from '../atoms/Checkbox';\r\nimport { IColumnFilter } from '../../stores/ColumnFilterCheckBoxList';\r\nimport { useMemos } from \"../../hooks/myUseMemo\";\r\n\r\ninterface IProps {\r\n  formName: string,\r\n  colFilter: IColumnFilter,\r\n  onChange: (aType: number, val: boolean) => void\r\n}\r\n\r\n/**\r\n * group of check boxs, that represnat single filter\r\n * each filter can get several boolean paramters - for exampe car and bycle\r\n * each of this paramters is repreansted as a number, and get a true/false value\r\n * in some cases there is a \"select all\" option.\r\n */\r\nconst GroupCheckbox: React.FC<IProps> = observer(({ formName, colFilter, onChange }) => {\r\n  const styleFeedback = {\r\n    marginTop: '.25rem',\r\n    fontSize: '80%',\r\n    color: '#dc3545',\r\n  };\r\n  const { t } = useTranslation();\r\n  const { isAllValsFalse, name, arrTypes } = colFilter;\r\n  const onGroupChange = (aType: number, checked: boolean) => {\r\n    // checkValid(checked)\r\n    onChange(aType, checked);\r\n  };\r\n  const feedback = (\r\n    <div style={styleFeedback}>\r\n      {' '}\r\n      {t('check_one_checkbox')}\r\n    </div>\r\n  );\r\n  const isvalid = (isAllValsFalse) ? feedback : null;\r\n  const list = arrTypes.map((fChecker, index) => {\r\n    return useMemos([fChecker.checked], <Checkbox\r\n      key={fChecker.label}\r\n      label={fChecker.label}\r\n      group={colFilter.name}\r\n      id={index}\r\n      checked={fChecker.checked}\r\n      onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n        onGroupChange(index, e.target.checked);\r\n      }}\r\n    />);\r\n  });\r\n  return (\r\n    <div className=\"injury-level-form\">\r\n      <Form.Group controlId={`${formName}.Control${name}`}>\r\n        <Form.Label className=\"filterLable\">\r\n          {t(name)}:\r\n      </Form.Label>\r\n        {list}\r\n        {isvalid}\r\n      </Form.Group>\r\n    </div>\r\n  );\r\n});\r\nexport default GroupCheckbox;\r\n","import React, { ChangeEvent, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\n// import Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport { useAccordionToggle } from 'react-bootstrap/AccordionToggle';\r\nimport Card from 'react-bootstrap/Card';\r\n// @ts-ignore\r\nimport CitySelector from '../molecules/CitySelector';\r\nimport StreetSelector from '../molecules/StreetSelector';\r\nimport RoadNameSelector from '../molecules/RoadNameSelector';\r\nimport RoadSegmentSelector from '../molecules/RoadSegmentSelector';\r\nimport GroupCheckbox from '../molecules/GroupCheckBox';\r\nimport Select from '../atoms/Select';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport { useQuery, useInjTypeByQuery } from '../../hooks/queryHooks';\r\nimport MySelect from '../atoms/MySelect';\r\nimport '../../styles/accordion.css'\r\n\r\ninterface IProps {\r\n}\r\nconst STYLE_TOGGLE_WARNING = {\r\n   // color: '#dc3545',\r\n   // cursor: 'pointer',\r\n   // paddingRight: '15px',\r\n   // paddingLeft: '15px',\r\n};\r\nconst STYLE_TOGGLE_NORMAL = {\r\n   color: '#007bff',\r\n   cursor: 'pointer',\r\n   // paddingRight: '15px',\r\n   // paddingLeft: '15px',\r\n};\r\n\r\nconst FilterForm: React.FC<IProps> = observer(({ }) => {\r\n   const { filterStore } = useStore();\r\n   const { injurySeverity, updateInjurySeverity, formCardKey } = filterStore;\r\n   // console.log(injurySeverity)\r\n   return (\r\n      <React.Fragment>\r\n         <Form>\r\n            <Accordion defaultActiveKey={formCardKey.toString()}>\r\n               <CardFilterWhen />\r\n               <CardFilterWhatVehicle />\r\n               <CardFilterWhere />\r\n               <CardFilterWho />\r\n               <CardFilterWhat />\r\n               <CardFilterWhatRoad />\r\n            </Accordion>\r\n            <GroupCheckbox\r\n               formName=\"exampleForm\"\r\n               colFilter={injurySeverity}\r\n               onChange={updateInjurySeverity}\r\n            />\r\n         </Form>\r\n      </React.Fragment>\r\n   );\r\n});\r\n\r\n\r\nfunction CustomToggle({ children, style, eventKey, onClick }: any) {\r\n   const [hover, setHover] = useState(false);\r\n   const toggleHover = () => setHover(!hover);\r\n   const linkStyle = (hover) ? { textDecoration: 'underline' } : { textDecoration: 'none' };\r\n   const onButtonClick = useAccordionToggle(eventKey, () => onClick(eventKey));\r\n   return (\r\n      <div>\r\n         <a style={{ ...style, ...linkStyle }} onClick={onButtonClick}\r\n            onMouseEnter={toggleHover}\r\n            onMouseLeave={toggleHover}>\r\n            {children}\r\n         </a>\r\n      </div>\r\n   );\r\n}\r\n\r\n\r\nconst CardFilterWhen: React.FC<any> = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const {\r\n      isValidWhen, startYear, setStartYear, endYear, setEndYear,\r\n      dayNight, updateDayNight,\r\n      setFormCardKey,\r\n   } = filterStore;\r\n   const styleToggle = isValidWhen ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"0\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('When')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse eventKey=\"0\" className=\"filterControls\">\r\n            <Card.Body>\r\n               <div>\r\n                  <div className=\"accordion-when-selects\">\r\n                     <MySelect\r\n                        label={'FromYear'}\r\n                        value={String(startYear.queryValue)}\r\n                        data={startYear.arrTypes}\r\n                        onChange={(e: ChangeEvent<HTMLSelectElement>) => { setStartYear(e.target.value); }}\r\n                     />\r\n                     <MySelect\r\n                        label={'ToYear'}\r\n                        value={String(endYear.queryValue)}\r\n                        data={endYear.arrTypes}\r\n                        onChange={(e: ChangeEvent<HTMLSelectElement>) => { setEndYear(e.target.value); }}\r\n                     />\r\n                  </div>\r\n                  <GroupCheckbox formName=\"exampleForm\" colFilter={dayNight} onChange={updateDayNight} />\r\n               </div>\r\n            </Card.Body>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\n\r\nconst CardFilterWhere = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const {\r\n      isValidWhere, roadTypes, updateRoadType,\r\n      locationAccuracy, updateLocationAccuracy,\r\n      isMultipleCities,\r\n      cityPopSizeRange, setCityPopSizeRange,\r\n      setFormCardKey,\r\n   } = filterStore;\r\n   const styleToggle = isValidWhere ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"2\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('Where')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"2\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <CitySelector isMultiple={isMultipleCities} />\r\n               <StreetSelector />\r\n               <RoadNameSelector />\r\n               <RoadSegmentSelector />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={roadTypes}\r\n                  onChange={updateRoadType}\r\n               />\r\n               <MySelect\r\n                  style={{ display: 'flex-end', alignItems: 'center' }}\r\n                  label={'city_size'}\r\n                  data={cityPopSizeRange.arrTypes}\r\n                  valProp=\"val\"\r\n                  contentProp=\"text\"\r\n                  onChange={(event: React.ChangeEvent<HTMLSelectElement>) => setCityPopSizeRange(event.target.value)}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={locationAccuracy}\r\n                  onChange={updateLocationAccuracy}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\nconst CardFilterWho = observer(() => {\r\n   const { t } = useTranslation();\r\n   const location = useLocation();\r\n   const { filterStore } = useStore();\r\n   const { isValidWho, genderTypes, updateGenderType, } = filterStore;\r\n   const { ageTypes, updateAgeType, populationTypes, updatePopulationType, setFormCardKey } = filterStore;\r\n\r\n   // useEffect(() => {\r\n   //    const query = useQuery(location);\r\n   //    const injType = useInjTypeByQuery(query);\r\n   //    if (injType) {\r\n   //       updateInjuerdType(injType, true);\r\n   //    }\r\n   // }, []);\r\n\r\n   const styleToggle = isValidWho ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"3\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('Who')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"3\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={genderTypes}\r\n                  onChange={updateGenderType}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={ageTypes}\r\n                  onChange={updateAgeType}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={populationTypes}\r\n                  onChange={updatePopulationType}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\nconst CardFilterWhat = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const { isValidWhat, accidentType, updateAccidentType, setFormCardKey } = filterStore;\r\n   const styleToggle = isValidWhat ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"4\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('What')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"4\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={accidentType} onChange={updateAccidentType}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\n\r\nconst CardFilterWhatVehicle = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const { injTypes,\r\n      updateInjuerdType,\r\n      vehicleType,\r\n      updateVehicleType,\r\n      involvedVehicle,\r\n      setInvolvedVehicle,\r\n      isValidWhatVehicle,\r\n      setFormCardKey\r\n   } = filterStore;\r\n   const styleToggle = isValidWhatVehicle ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"1\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('WhatVehicle')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"1\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={injTypes}\r\n                  onChange={updateInjuerdType}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={vehicleType} onChange={updateVehicleType}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={involvedVehicle} onChange={setInvolvedVehicle}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\n\r\nconst CardFilterWhatRoad = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const { isValidWhatRoad } = filterStore;\r\n   const { speedLimit, updateSpeedLimit, roadWidth, updateRoadWidth, } = filterStore;\r\n   const { separator, updateSeparator, oneLane, updateOneLane, setFormCardKey } = filterStore;\r\n   const styleToggle = isValidWhatRoad ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card >\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"5\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('WhatRoad')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"5\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={speedLimit}\r\n                  onChange={updateSpeedLimit}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={roadWidth}\r\n                  onChange={updateRoadWidth}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={separator}\r\n                  onChange={updateSeparator}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={oneLane}\r\n                  onChange={updateOneLane}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\nexport default FilterForm;\r\n","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport FilterForm from '../organisms/FilterForm';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport ConfigModal from \"../organisms/ConfigModal\";\r\n\r\ninterface IProps {\r\n }\r\nconst ConfigFilterModal: React.FC<IProps> = observer(() => {\r\n    const { filterStore, uiStore } = useStore();\r\n    const { showFilterModal, setShowFilterModal } = uiStore;\r\n    return (\r\n        <ConfigModal\r\n            action={() => {\r\n                filterStore.submitFilter();\r\n                setTimeout(() => {\r\n                    setShowFilterModal(!showFilterModal)\r\n                }, 1000);\r\n            }}\r\n            size=\"lg\"\r\n            title={'Filters'}\r\n            setShow={setShowFilterModal}\r\n            showModal={showFilterModal}>\r\n             <FilterForm />\r\n        </ConfigModal>\r\n    );\r\n});\r\nexport default ConfigFilterModal;\r\n","import React from \"react\"\r\n\r\nfunction SvgIconFilter(props: React.SVGProps<SVGSVGElement>) {\r\n  const color = (props.color) ? props.color : 'blue';\r\n  const height = (props.height) ? props.height : 24;\r\n  const width = (props.width) ? props.width : 24;\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height={height}\r\n      viewBox=\"0 0 24 24\"\r\n      width={width}\r\n    >\r\n      <path d=\"M0 0h24m0 24H0\" fill=\"none\" />\r\n      <path d=\"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39A.998.998 0 0018.95 4H5.04c-.83 0-1.3.95-.79 1.61z\" \r\n       fill={color} />\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport default React.memo(SvgIconFilter);","import React from 'react';\r\n// import { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../stores/storeConfig';\r\n// import IconWithImage from '../atoms/IconWithImage';\r\n// import imgSrc from '../../assets/filter.png';\r\nimport { useMemos } from '../../hooks/myUseMemo';\r\nimport SvgIconFilter from '../../assets/SvgIconFilter';\r\nimport '../../styles/filter-btn.css'\r\n\r\ninterface IProps { }\r\nconst ButtonShowFilterModal: React.FC<IProps> = observer(() => {\r\n    // const { t } = useTranslation();\r\n    const { uiStore } = useStore();\r\n    const { showFilterModal, setShowFilterModal } = uiStore;\r\n    const memoFilterIcon = useMemos([],\r\n        <SvgIconFilter color={'var(--onprimary-color)'} height={40} width={34} />);\r\n    // const filterIcon = <IconWithImage\r\n    //     path={imgSrc}\r\n    //     style={{ lineHeight: '30px' }}\r\n    //     alt='open filter'\r\n    // />\r\n\r\n    return (\r\n        <>\r\n            <span\r\n                title=\"Filter\"\r\n                // aria-label=\"This is information\"\r\n                className=\"btn-sm filter-btn\"\r\n                onClick={() => setShowFilterModal(!showFilterModal)}>\r\n                {memoFilterIcon}\r\n            </span>\r\n        </>\r\n    );\r\n});\r\nexport default ButtonShowFilterModal;\r\n","import React from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport FilterForm from './FilterForm'\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport { observer } from 'mobx-react';\r\nimport { Button } from 'react-bootstrap';\r\nimport '../../styles/sidebar.css'\r\n\r\nconst Drawer: React.FC<any> = observer((props) => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n\r\n   // console.log(filterStore)\r\n\r\n   return (\r\n      <div className=\"sidebar\">\r\n         <div className=\"filters\">\r\n            <FilterForm />\r\n         </div>\r\n         <Button\r\n            style={{ margin: '0.5rem' }}\r\n            variant=\"primary\"\r\n            onClick={() => filterStore.submitFilter()}\r\n            disabled={filterStore.isLoading || !filterStore.isValidAllFilters}\r\n         >\r\n            {filterStore.isLoading ? t('Loading') : t('Submit')}\r\n         </Button>\r\n         <Button\r\n            style={{ margin: '0.5rem' }}\r\n            variant=\"info\"\r\n            onClick={() => alert('action in filter store to collect filters')}\r\n            disabled={filterStore.isLoading || !filterStore.isValidAllFilters}\r\n         >\r\n            {t('Save')}  {t('Filter')}\r\n         </Button>\r\n      </div>\r\n   )\r\n   {/* </SmallCard2> */ }\r\n})\r\n\r\n\r\nexport default Drawer","import React, { PropsWithChildren } from 'react'\r\nimport Drawer from '../organisms/Drawer'\r\nimport '../../styles/grid-with-drawer.css'\r\n\r\ninterface Props extends PropsWithChildren<any> { }\r\n\r\nconst WithSidebarTemplate: React.FC<Props> = ({ children }) => {\r\n   return (\r\n      <div className=\"grid-with-drawer\">\r\n         <div className=\"grid-drawer\">\r\n            <Drawer />\r\n         </div>\r\n         <div className=\"grid-main\">\r\n            {children}\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default WithSidebarTemplate","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { toJS } from 'mobx';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n}\r\n\r\nconst WhenTitle: React.FC<{}> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { dayNight } = filterStore;\r\n  let res = (dayNight.text !== '') ? `, ${dayNight.text}` : '';\r\n  return (\r\n    <span>{res}</span>\r\n  )\r\n});\r\n\r\nconst WhereTitle: React.FC<{}> = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { cities, cityPopSizeRange, roads, roadTypes, locationAccuracy } = filterStore;\r\n  let res = t('Israel');\r\n  if (cities.text !== '') {\r\n    res = `${cities.text}`; // maybe use t('several-cities');\r\n  } else if (cityPopSizeRange.text !== '') {\r\n    res = `${t('city_size')} ${cityPopSizeRange.text}`;\r\n  } else if (roads.text !== '') {\r\n    res = `${t(roads.name)} ${roads.text}`;\r\n    //res = (roads.length === 1) ? `${t('Road')} ${roads[0]}` : t('several-roads');\r\n  }\r\n  else if (roadTypes.text !== '') {\r\n    res = `${roadTypes.text}`;\r\n  }\r\n  if (locationAccuracy.text != '') res += `, ${locationAccuracy.text}`;\r\n  return (\r\n    <span>{res}</span>\r\n  )\r\n});\r\n\r\nconst WhoTitle: React.FC<{}> = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { genderTypes, ageTypes, populationTypes } = filterStore;\r\n  let res = (genderTypes.text != '') ? `, ${genderTypes.text}` : '';\r\n  if (populationTypes.text != '') res += `, ${populationTypes.text}`;\r\n  if (ageTypes.text != '') res += `, ${t('Age')}: ${ageTypes.text}`;\r\n  return (\r\n    <span>{res}</span>\r\n  )\r\n});\r\n\r\nconst WhatTitle: React.FC<{}> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { accidentType } = filterStore;\r\n  let res = (accidentType.text !== '') ? `, ${accidentType.text}` : '';\r\n  return (\r\n    <span>{res}</span>\r\n  )\r\n});\r\n\r\nconst WhatVehicleTitle: React.FC<{}> = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { injTypes, vehicleType , involvedVehicle} = filterStore;\r\n  let res = (injTypes.text !== '') ? `, ${injTypes.text}` : '';\r\n  if (vehicleType.text !== '') res += `,  ${t('VehicleType')}: ${vehicleType.text}`;\r\n  if (involvedVehicle.text != '') res += `, ${t('Vehicles')}: ${involvedVehicle.text}`;\r\n  return (\r\n    <span>{res}</span>\r\n  )\r\n});\r\n\r\nconst InfoPanel: React.FC<IProps> = observer(({ }) => {\r\n  const styles = {\r\n    div: {\r\n      marginTop: '0.8rem',\r\n      marginLeft: '1rem',\r\n      marginRight: '1rem',\r\n      marginBottom: '0.1rem'\r\n    }\r\n  }\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { casualtiesNames, isLoadingInjuriesCount: isLoadingCountInjuries, injuriesCount } = filterStore;\r\n  if (isLoadingCountInjuries) return <div style={styles.div}> {t('Loading')} </div>\r\n  if (injuriesCount > 0) {\r\n    return (\r\n      <h5 style={styles.div}>\r\n        <WhereTitle />\r\n        <WhatVehicleTitle />\r\n        <WhoTitle />\r\n        <WhenTitle />\r\n        <WhatTitle />\r\n        {', '}\r\n        {t('Found')}\r\n        {' '}\r\n        {injuriesCount}\r\n        {' '}\r\n        {t(casualtiesNames)}\r\n        {' '}\r\n      </h5>\r\n    );\r\n  }\r\n  return (\r\n    <h5 style={styles.div}>{t('NoResultsFound')}</h5>\r\n  );\r\n});\r\nexport default InfoPanel;\r\n","import React, { useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\n// import FilterPanel from '../organisms/FilterPanel';\r\nimport TabsTemplate from './TabsTemplate';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport ConfigFilterModal from '../organisms/ConfigFilterModal';\r\nimport ButtonShowFilterModal from '../atoms/ButtonShowFilterModal';\r\nimport { useMemos } from \"../../hooks/myUseMemo\";\r\n// import CasualtiesSumLabel from '../atoms/CasualtiesSumLabel';\r\n// import FilterForm from \"../organisms/FilterForm\";\r\nimport WithSidebarTemplate from './WithSidebarTemplate';\r\nimport InfoPanel from '../molecules/InfoPanel';\r\n\r\ninterface IProps { }\r\nconst HomeTemplate: React.FC<IProps> = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { mapStore, filterStore, uiStore } = useStore();\r\n   const { setIsMultipleCities, updateCities, submitFilter } = filterStore;\r\n   const { setCurrentPage, setStoreByQuery, showFilterModal , setInitPage} = uiStore;\r\n\r\n   useEffect(() => {\r\n      setCurrentPage('home');\r\n      // const query = useQuery(location);\r\n      // const tab = useTabFromQuery(query, 'charts');\r\n      // setCurrentTab(tab);\r\n      setIsMultipleCities(true);\r\n   }, []);  // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n   mapStore.isReadyToRenderMap = false;\r\n\r\n   useEffect(() => {\r\n      // mapStore.initBounds();\r\n      setInitPage(true);\r\n      updateCities([], false);\r\n      setStoreByQuery('charts');\r\n      submitFilter();\r\n      setInitPage(false)\r\n   }, [submitFilter, updateCities]);\r\n\r\n\r\n   const memoConfigModal = useMemos([showFilterModal], <ConfigFilterModal />)\r\n\r\n   return (\r\n      <WithSidebarTemplate>\r\n         {/* <div className=\"row\"> */}\r\n         <div>\r\n            <div>\r\n               <InfoPanel />\r\n               <ButtonShowFilterModal />\r\n            </div>\r\n            {showFilterModal && memoConfigModal}\r\n            <TabsTemplate type=\"home\" />\r\n         </div>\r\n      </WithSidebarTemplate>\r\n   )\r\n})\r\n\r\nexport default HomeTemplate\r\n","import React from 'react';\r\nimport HomeTemplate from '../templates/HomeTemplate';\r\n\r\ninterface IProps { }\r\n\r\nconst HomePage: React.FC<IProps> = () => (\r\n  <HomeTemplate />\r\n);\r\nexport default HomePage;\r\n","import React, { useEffect } from 'react';\r\n// import { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { TabsTemplate } from './TabsTemplate';\r\n// import FilterPanel from '../organisms/FilterPanel';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport ConfigFilterModal from '../organisms/ConfigFilterModal';\r\nimport ButtonShowFilterModal from '../atoms/ButtonShowFilterModal';\r\nimport { useMemos } from '../../hooks/myUseMemo';\r\nimport InfoPanel from '../molecules/InfoPanel';\r\nimport WithSidebarTemplate from './WithSidebarTemplate';\r\n\r\ninterface IProps { }\r\nconst CityTemplate: React.FC<IProps> = observer(() => {\r\n  // const { t } = useTranslation();\r\n  const { filterStore, uiStore } = useStore();\r\n  const { cityResult, isUpdateFromUrl, setIsUpdateFromUrl } = filterStore;\r\n  const { setCurrentPage, setStoreByQuery, showFilterModal, setInitPage} = uiStore;\r\n\r\n  useEffect(() => {\r\n    setCurrentPage('city');\r\n    filterStore.isMultipleCities = false;\r\n    if (cityResult !== '') {\r\n      filterStore.submitFilter();\r\n    }\r\n    return () => setIsUpdateFromUrl(true); // unmount\r\n  }, []);\r\n  // useEffect(() => {\r\n  //   if (cityResult !== '') {\r\n  //     history.push({\r\n  //       pathname: '/city',\r\n  //       search: `?name=${cityResult}&tab=${currentTab}`,\r\n  //     });\r\n  //     filterStore.submitFilter();\r\n  //   }\r\n  // }, [cityResult, currentTab]);\r\n  useEffect(() => {\r\n    setInitPage(true);\r\n    if (cityResult === '' && isUpdateFromUrl) {\r\n      setIsUpdateFromUrl(false);\r\n      setStoreByQuery('map','  -');\r\n      filterStore.submitFilter();\r\n    }\r\n    setInitPage(false);\r\n  }, []);\r\n  // useEffect(() => {\r\n  //   if (cityResult !== '') {\r\n  //     filterStore.submitFilter();\r\n  //   }\r\n  // }, [cityResult]);\r\n\r\n  const memoConfigModal = useMemos([showFilterModal], <ConfigFilterModal />)\r\n  return (\r\n    <WithSidebarTemplate>\r\n      <div className=\"App\">\r\n        <div>\r\n          <InfoPanel />\r\n          <ButtonShowFilterModal />\r\n        </div>\r\n        {showFilterModal && memoConfigModal}\r\n        <TabsTemplate type=\"city\" />\r\n        {/* </div> */}\r\n        {/* </div>\r\n        </div> */}\r\n      </div>\r\n    </WithSidebarTemplate>\r\n  );\r\n});\r\nexport default CityTemplate;\r\n","import React from 'react';\r\nimport CityTemplate from '../templates/CityTemplate';\r\n\r\ninterface IProps { }\r\n\r\nconst CityPage: React.FC<IProps> = () => (\r\n  <CityTemplate />\r\n);\r\n\r\nexport default CityPage;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport Form from 'react-bootstrap/Form'\r\nimport MySelect from '../atoms/MySelect';\r\n\r\nconst LanguageSelector = observer(() => {\r\n   const { uiStore } = useStore();\r\n   const style: any = document.getElementById('style-direction');\r\n   if (style !== null) {\r\n      if (uiStore.direction === 'rtl') {\r\n         style.href = './bootstrap.rtl.min.css';\r\n         // changeLanguage('he')\r\n         document.body.classList.remove('dir-ltr');\r\n         document.body.classList.add('dir-rtl');\r\n      } else {\r\n         style.href = './bootstrap.min.css';\r\n         // changeLanguage('en')\r\n         document.body.classList.remove('dir-rtl');\r\n         document.body.classList.add('dir-ltr');\r\n      }\r\n   }\r\n   return (\r\n      <React.Fragment>\r\n\r\n         <MySelect\r\n            onChange={(e: React.ChangeEvent<HTMLSelectElement>) => {\r\n               uiStore.updateLanguage(e.target.value)\r\n            }}\r\n            //  label={labelText}\r\n            data={[{ value: 'he', text: 'Hebrew' }, { value: 'en', text: 'English' }]}\r\n            valProp=\"value\"\r\n            contentProp=\"text\"\r\n            value={uiStore.language}\r\n         />\r\n         {/* <Form className=\"form-inline\">\r\n            <Form.Group>\r\n               <Form.Control\r\n                  style={{ width: '7rem' }}\r\n                  className=\"form-select form-select-sm\"\r\n                  as=\"select\"\r\n                  onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n                     uiStore.updateLanguage(e.target.value)\r\n                  }}\r\n               >\r\n                  <option value=\"he\">Hebrew</option>\r\n                  <option value=\"en\">English</option>\r\n               </Form.Control>\r\n            </Form.Group>\r\n         </Form> */}\r\n         {/* <select\r\n            className=\"form-select-sm\"\r\n            onChange={(e) => {\r\n               uiStore.updateLanguage(e.target.value)\r\n            }}>\r\n            <option value=\"he\">Hebrew</option>\r\n            <option value=\"en\">English</option>\r\n         </select> */}\r\n      </React.Fragment>\r\n   );\r\n});\r\nexport default LanguageSelector;","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n\r\nconst NavigationList: React.FC<any> = () => {\r\n   const { t } = useTranslation();\r\n   return (\r\n      <React.Fragment>\r\n         <Link\r\n            className=\"nav-link\"\r\n            to=\"/\">\r\n            {t('Home')}\r\n         </Link>\r\n         <Link\r\n            className=\"nav-link\"\r\n            to=\"/city\">\r\n            {t('Cities')}\r\n         </Link>\r\n         <Link\r\n            className=\"nav-link\"\r\n            to=\"/about\">\r\n            {t('About')}\r\n         </Link>\r\n         <Link\r\n            className=\"nav-link\"\r\n            to=\"/my-filters\">\r\n            {t('My-Filters')}\r\n         </Link>\r\n      </React.Fragment>\r\n   )\r\n}\r\n\r\nexport default NavigationList\r\n","import React from 'react';\r\nimport LanguageSelector from '../molecules/LanguageSelector';\r\nimport logo from '../../assets/safety-logo.png';\r\nimport NavigationList from '../molecules/NavigationList';\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport '../../styles/tabs.css'\r\n\r\n\r\ninterface IProps {\r\n   title: string\r\n}\r\n\r\nconst styles = {\r\n   header: {\r\n      marginBottom: '1rem',\r\n      position: 'fixed' as 'fixed',\r\n      top: '0px',\r\n      width: '100%',\r\n      zIndex: 5000,\r\n   }\r\n};\r\n\r\nexport const Header: React.FC<IProps> = ({ title }) => {\r\n\r\n   return (\r\n      <header style={styles.header} >\r\n         <Navbar className=\"navbar\" expand=\"lg\">\r\n            <div className=\"container-fluid\">\r\n               <img\r\n                  src={logo}\r\n                  alt={`${title} logo`}\r\n                  height=\"45\"\r\n                  width=\"188\"\r\n               />\r\n               <Navbar.Toggle aria-controls=\"basic-navbar-nav\" className=\"text-light\" />\r\n               <Navbar.Collapse id=\"basic-navbar-nav\" >\r\n                  <div className=\"navbar-nav\">\r\n                     <NavigationList />\r\n                  </div>\r\n                  <div>\r\n                     <LanguageSelector />\r\n                  </div>\r\n               </Navbar.Collapse>\r\n            </div>\r\n         </Navbar>\r\n      </header>\r\n\r\n   );\r\n};\r\n\r\nexport default Header;\r\n","export default \"data:image/png;base64,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\"","import React, { lazy, Suspense } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Card from 'react-bootstrap/Card';\r\nimport HomePage from './components/pages/HomePage';\r\nimport CityPage from './components/pages/CityPage';\r\nimport Header from './components/templates/Headr';\r\nimport Footer from './components/templates/Footer';\r\nimport Loader from './components/atoms/Loader';\r\nimport './i18n';\r\nimport './App.css';\r\nimport Drawer from './components/organisms/Drawer';\r\n// import MyFilters from './components/pages/MyFilters';\r\n// import { useTranslate } from './hooks/transelate'\r\n\r\nconst AboutPage = lazy(() => import('./components/pages/AboutPage'));\r\nconst UpdateImagePage = lazy(() => import('./components/pages/UpdateImagePage'));\r\nconst MyFilters = lazy(() => import('./components/pages/MyFilters'))\r\n\r\n\r\nconst styles = {\r\n   app: {\r\n      marginTop: '44px',\r\n   }\r\n};\r\n\r\nfunction App() {\r\n   return (\r\n      <Router>\r\n         {/* <Card display=\"flex\" height=\"100%\"> */}\r\n         <div style={{ height: \"100%\" }}>\r\n            <Header title=\"Safety Data\" />\r\n            <div style={styles.app}>\r\n               <Suspense fallback={<Loader />}>\r\n                  <Switch>\r\n                     <Route\r\n                        exact\r\n                        path=\"/my-filters\"\r\n                        component={MyFilters}\r\n                     />\r\n                     <Route\r\n                        path=\"/about\"\r\n                        component={AboutPage}\r\n                     />\r\n                     <Route\r\n                        exact\r\n                        path=\"/city\"\r\n                        component={CityPage}\r\n                     />\r\n                     <Route\r\n                        path=\"/update-img\"\r\n                        component={UpdateImagePage}\r\n                     />\r\n                     <Route\r\n                        path=\"/\"\r\n                        component={HomePage}\r\n                     />\r\n\r\n\r\n                  </Switch>\r\n               </Suspense>\r\n            </div>\r\n            {/* <Footer /> */}\r\n         </div>\r\n         {/* </Card> */}\r\n      </Router>\r\n   );\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"," /**\r\n* set the QueryString of the browser by name and vlaue\r\n*/\r\nexport const setBrowserQueryString = (name: string, val: string) => {\r\n  const params = new URLSearchParams(location.search);\r\n  params.set(name, val);\r\n  window.history.replaceState({}, '', `${location.pathname}?${params.toString()}`);\r\n}\r\nexport const delBrowserQueryString = (name: string,) => {\r\n  const params = new URLSearchParams(location.search);\r\n  params.delete(name);\r\n  window.history.replaceState({}, '', `${location.pathname}?${params.toString()}`);\r\n}","import { useMemo } from \"react\";\r\n\r\nexport function useMemos(dep: any[], item: any) {\r\n   return useMemo(() => {\r\n      return item\r\n   }, dep)\r\n}","import i18n from 'i18next';\r\n// import LanguageDetector from 'i18next-browser-languagedetector';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport translationEng from './lng/en/translation.json';\r\nimport translationHeb from './lng/he/translation.json';\r\n\r\ni18n\r\n  // detect user language\r\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n  // .use(LanguageDetector)\r\n  // pass the i18n instance to react-i18next.\r\n  .use(initReactI18next)\r\n  .init({\r\n    fallbackLng: 'he',\r\n    lng: 'he',\r\n    debug: true,\r\n    // hardcoding translations for the sake of simplicity,\r\n    // id more complex - get it from backend.\r\n    // i18next has a small plugin that makes it easy.\r\n    // learn more: https://github.com/i18next/i18next-xhr-backend\r\n    resources: {\r\n      en: {\r\n        translation: translationEng,\r\n      },\r\n      he: {\r\n        translation: translationHeb,\r\n      },\r\n    },\r\n    interpolation: {\r\n      escapeValue: false, // not needed for React as it escapes by default\r\n    },\r\n  });\r\nexport default i18n;\r\n","import React from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport '../../styles/my-select.css'\r\ninterface Props {\r\n   data: any[]\r\n   onChange: (event: React.ChangeEvent<HTMLSelectElement>) => void,\r\n   valProp?: string\r\n   contentProp?: string\r\n   value?: string\r\n   label?: string\r\n   style?: any\r\n   cssClass?: string\r\n}\r\n\r\nconst MySelect: React.FC<Props> = ({ style, label, onChange, data, valProp, contentProp, value, cssClass='' }) => {\r\n   const { t } = useTranslation();\r\n   const cssname= \"form-select form-select-sm \" + cssClass;\r\n   return (\r\n      <div className=\"select-wrapper\" style={style && style} >\r\n         {label && <label> {t(label)} </label>}\r\n         <select className={cssname} onChange={onChange} value={value}>\r\n            {data.map((item) => {\r\n               return <option\r\n                  key={valProp ? item[valProp] : item}\r\n                  value={valProp ? item[valProp] : item}>\r\n                  {t(contentProp ? item[contentProp] : item)}\r\n               </option>\r\n            })}\r\n         </select>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default MySelect\r\n","import { observable, action } from 'mobx';\r\nimport { Map } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport logger from '../services/logger';\r\nimport RootStore from './RootStore';\r\nimport { setBrowserQueryString, delBrowserQueryString } from '../utils/queryStringUtils';\r\n// import autorun  from \"mobx\"\r\n\r\n\r\n\r\n/**\r\n * bbox type - how to fetch data for map \r\n * NO_BBOX - when filter change, get all the points from server\r\n * SERVER_BBOX - on every zoom / movment of the map get only relevent DEFAULT_BOUNDS\r\n * LOCAL_BBOX - on zoom/ movment of map get relevent markers from memory (dataAllInjuries)\r\n */\r\nexport enum BBoxType {\r\n  NO_BBOX,\r\n  SERVER_BBOX,\r\n  LOCAL_BBOX\r\n}\r\n// const INIT_BOUNDS = [L.latLng(32.032, 34.739), L.latLng(32.115, 34.949)];\r\nconst DEFAULT_BOUNDS = [\r\n  L.latLng(29.50, 34.22), // most possible south-west point\r\n  L.latLng(33.271, 35.946), // most possible north-east point\r\n];\r\nconst QUERY_STR_NAME_LAT = 'lat';\r\nconst QUERY_STR_NAME_LNG = 'lng';\r\nconst QUERY_STR_NAME_MRKRCOLOR = 'mkclr';\r\n\r\nexport default class MapStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  mapRef: React.RefObject<Map<any>> | null = null;\r\n\r\n  setMapRef = (mapRef: React.RefObject<Map<any>>) => {\r\n    this.mapRef = mapRef;\r\n  }\r\n  @action\r\n  onMapLoad = () => {\r\n    console.log('onMapLoad');\r\n    const params = new URLSearchParams(window.location.search);\r\n    this.setMapZoomByQuery(params);\r\n  }\r\n\r\n  /////////// set / get from quey string\r\n  @action\r\n  setStoreByQuery = (params: URLSearchParams) => {\r\n    this.setMapCenterByQuery(params);\r\n    this.setMapZoomByQuery(params);\r\n    this.setMarkerColorTypeByQuery(params);\r\n  }\r\n\r\n  delQueryStrMapCenter = () => {\r\n    delBrowserQueryString(QUERY_STR_NAME_LAT);\r\n    delBrowserQueryString(QUERY_STR_NAME_LNG)\r\n  }\r\n\r\n  setQueryStrMapCenter = (center: L.LatLng) => {\r\n    setBrowserQueryString(QUERY_STR_NAME_LAT, center.lat.toFixed(5));\r\n    setBrowserQueryString(QUERY_STR_NAME_LNG, center.lng.toFixed(5));\r\n  }\r\n  setQueryStrMapZoom = (zoom: number) => {\r\n    setBrowserQueryString('z', zoom.toString());\r\n  }\r\n\r\n  @observable\r\n  isReadyToRenderMap = false;\r\n\r\n  @observable\r\n  bboxType: BBoxType = BBoxType.LOCAL_BBOX;\r\n\r\n  @observable\r\n  mapCenter: L.LatLng = new L.LatLng(32.08, 34.83)\r\n\r\n  @action\r\n  updateMapCenter = (center: L.LatLng, updateQuery: boolean = true) => {\r\n    this.mapCenter = center;\r\n    if (updateQuery) {\r\n      this.setQueryStrMapCenter(center);\r\n    }\r\n  }\r\n\r\n  @observable\r\n  mapZoom: number = 13;\r\n\r\n  @action\r\n  setMapZoom = (value: number) => {\r\n    this.mapZoom = value;\r\n  };\r\n\r\n\r\n  @action\r\n  setMapCenterByQuery = (params: URLSearchParams) => {\r\n    const center = this.getCenterByQuery(params);\r\n    if (center) {\r\n      this.updateMapCenter(center, false);\r\n    }\r\n  }\r\n  getCenterByQuery = (params: URLSearchParams) => {\r\n    let center = null\r\n    const sLat = params.get(QUERY_STR_NAME_LAT);\r\n    const sLon = params.get(QUERY_STR_NAME_LNG);\r\n    if (sLat && sLon) {\r\n      const lat = Number.parseFloat(sLat);\r\n      const lng = Number.parseFloat(sLon)\r\n      if (!Number.isNaN(lat) && !Number.isNaN(lng)) {\r\n        center = new L.LatLng(lat, lng);\r\n      }\r\n    }\r\n    return center;\r\n  }\r\n  @action\r\n  setMapZoomByQuery = (params: URLSearchParams) => {\r\n    const sZoom = params.get('z');\r\n    if (sZoom) {\r\n      const zoom = Number.parseInt(sZoom);\r\n      if (!Number.isNaN(zoom)) {\r\n        this.setMapZoom(zoom);\r\n      }\r\n    }\r\n  }\r\n  // if this is init-page and query string has center- don't center by city location\r\n  isCenterMapByCity = () => {\r\n    let doCenterByCity = true;\r\n    if (this.rootStore.uiStore.initPage) {\r\n      const params = new URLSearchParams(window.location.search);\r\n      const center = this.getCenterByQuery(params);\r\n      if (center) {\r\n        doCenterByCity = false;\r\n      }\r\n    }\r\n    return doCenterByCity;\r\n  }\r\n\r\n  @action\r\n  updateMapCenterByCity = (res: any[]) => {\r\n    if (res !== null && res.length > 0) {\r\n      const city = res[0];\r\n      if (city.lat && city.lon) {\r\n        this.updateMapCenter(new L.LatLng(city.lat, city.lon));\r\n        this.setMapZoom(13);\r\n      }\r\n    }\r\n  }\r\n\r\n  @observable\r\n  useSetBounds = true;\r\n\r\n  // @observable\r\n  // mapBounds: L.LatLngBounds = L.latLngBounds(INIT_BOUNDS);\r\n  // @action\r\n  // updateBounds = (bounds: L.LatLngBounds) => {\r\n  //   //logger.log(\"updateBounds\",bounds)\r\n  //   try {\r\n  //     this.mapBounds = (bounds);\r\n  //   } catch (error) {\r\n  //     logger.error(error)\r\n  //   }\r\n  // }\r\n  // @action\r\n  // initBounds = () => {\r\n  //   this.updateBounds(L.latLngBounds(INIT_BOUNDS))\r\n  // }\r\n  @action\r\n  setBounds = (data: any[], citisArr: string[]) => {\r\n    if (this.isSetBounds) {\r\n      const bunds = this.getBoundsByPointsArr(data);\r\n      if (citisArr.length > 0 && citisArr[0] !== '') {\r\n        // //this.mapBounds = bunds;\r\n        // if (bunds.contains(this.mapCenter))\r\n        //   this.mapBounds = bunds;\r\n        // else\r\n        //  logger.log(\"worng bounds: \", bunds, this.mapCenter)\r\n      } else {\r\n        this.updateMapCenter(bunds.getCenter());\r\n        // this.mapBounds = bunds;\r\n      }\r\n      this.isSetBounds = false;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  isSetBounds = false;\r\n\r\n  @action\r\n  updateIsSetBounds = (citisArr: string[], roadSegArr: any[]) => {\r\n    if (this.useSetBounds) {\r\n      if (citisArr.length > 0 && citisArr[0] !== '') this.isSetBounds = true;\r\n      else if (roadSegArr.length > 0 && roadSegArr[0] !== '') this.isSetBounds = true;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  heatLayerHidden = true;\r\n\r\n  @action\r\n  toggleHeatLayer = () => {\r\n    this.heatLayerHidden = !this.heatLayerHidden;\r\n  }\r\n\r\n\r\n  ////////// markers /////////////////\r\n  @observable\r\n  useSmallMarkers = false;\r\n\r\n  @action\r\n  toggleUseSmallMarkers = () => {\r\n    this.useSmallMarkers = !this.useSmallMarkers;\r\n  }\r\n\r\n  @observable\r\n  markerIconsType = \"Vehicle\";\r\n\r\n  @action\r\n  setMarkerIconsType = (value: string) => {\r\n    this.markerIconsType = value;\r\n  }\r\n  markerIconTypesArr = [\r\n    { val: \"general\", text: 'general' },\r\n    { val: \"Vehicle\", text: 'Vehicle' },\r\n  ];\r\n\r\n  @observable\r\n  markerColorType = \"Severity\";\r\n\r\n  @action\r\n  setMarkerColorType = (value: string) => {\r\n    this.markerColorType = value;\r\n    setBrowserQueryString(QUERY_STR_NAME_MRKRCOLOR, value);\r\n  }\r\n  @action\r\n  setMarkerColorTypeByQuery = (params: URLSearchParams) => {\r\n    const val = params.get(QUERY_STR_NAME_MRKRCOLOR);\r\n    if (val !== null) {\r\n      this.setMarkerColorType(val);\r\n    }\r\n  }\r\n  setBrowserQueryStringByMarkerColor = (params: URLSearchParams) => {\r\n    params.set(QUERY_STR_NAME_MRKRCOLOR, (this.markerColorType));\r\n    window.history.replaceState({}, '', `${location.pathname}?${params.toString()}`);\r\n  }\r\n\r\n  markerColorTypesArr = [\r\n    { val: \"Severity\", text: 'Severity' },\r\n    { val: \"Vehicle\", text: 'Vehicle' },\r\n    { val: 'AccidentType', text: 'AccidentType' },\r\n    { val: 'SelfOrNotAcc', text: 'SelfOrNotAcc' },\r\n    { val: \"DayNight\", text: 'DayNight' },\r\n    { val: \"Gender\", text: 'Gender' },\r\n    { val: 'RoadType', text: 'RoadType' }\r\n  ];\r\n\r\n  ////// bounds //////////////////////\r\n  getBoundsByPointsArr = (data: any[]) => {\r\n    // logger.log(\"setBounds!\")\r\n    let arr: L.LatLng[] = [];\r\n    let lastPoint: L.LatLng = L.latLng(0, 0);\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        const p = new L.LatLng(x.latitude, x.longitude);\r\n        if ((lastPoint.lat === 0 && lastPoint.lng === 0)\r\n          || x.latitude !== lastPoint.lat\r\n          || x.longitude !== lastPoint.lng) {\r\n          arr.push(p);\r\n          // prevent insertion of duplicate same point\r\n          lastPoint = p;\r\n        }\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (arr.length === 1) {\r\n      arr.length = 0; // clean tha array\r\n      arr.push(L.latLng(lastPoint.lat + 0.01, lastPoint.lng + 0.01));\r\n      arr.push(L.latLng(lastPoint.lat - 0.01, lastPoint.lng - 0.01));\r\n    }\r\n    // in case no lat/lon info\r\n    if (arr.length < 2) arr = DEFAULT_BOUNDS;\r\n    const bounds = L.latLngBounds(arr);\r\n    return bounds;\r\n  }\r\n\r\n  getBounds2 = (data: any[]) => {\r\n    if (data.length === 0) return L.latLngBounds(DEFAULT_BOUNDS);\r\n    const bounds = {\r\n      south: 200, north: -200, west: 200, east: -200,\r\n    };\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        bounds.south = Math.min(x.latitude, bounds.south);\r\n        bounds.north = Math.max(x.latitude, bounds.north);\r\n        bounds.west = Math.min(x.longitude, bounds.west);\r\n        bounds.east = Math.max(x.longitude, bounds.east);\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (bounds.south === bounds.north) {\r\n      bounds.south -= 0.01;\r\n      bounds.north += 0.01;\r\n      bounds.west -= 0.01;\r\n      bounds.east += 0.01;\r\n    }\r\n    const b = L.latLngBounds([bounds.south, bounds.west], [bounds.east, bounds.north]);\r\n    return b;\r\n  }\r\n\r\n  @observable\r\n  dataMarkersInBounds: any[] = []\r\n\r\n  @action\r\n  updateDataMarkersInBounds = (data: any[]) => {\r\n    this.dataMarkersInBounds = data;\r\n  }\r\n  @action\r\n  updateMapBounds = () => {\r\n    try {\r\n      //get markers\r\n      if (this.bboxType !== BBoxType.NO_BBOX) this.getMarkersInBBox();\r\n      //update query string by map\r\n      this.setQueryStrMapCenterByBounds()\r\n    } catch (error) {\r\n      logger.error(error);\r\n    }\r\n  };\r\n  setQueryStrMapCenterByBounds = () => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    try {\r\n      const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n      if (mapBounds) {\r\n        const center = mapBounds.getCenter()\r\n        this.setQueryStrMapCenter(center);\r\n        this.setQueryStrMapZoom(this.mapRef.current.leafletElement.getZoom());\r\n      }\r\n    } catch (error) {\r\n      logger.error(error);\r\n    }\r\n  }\r\n  /* \r\n    setMapZoom =(zoom: number) =>{\r\n      console.log('mapRef',this.mapRef)\r\n      if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n      try {\r\n        this.mapRef.current.leafletElement.setZoom(zoom);\r\n        const zoom2 = this.mapRef.current.leafletElement.getZoom();\r\n        console.log('zoom2', zoom2)\r\n      } catch (error) {\r\n        logger.error(error);\r\n      }\r\n    } */\r\n\r\n  getMarkersInBBox = () => {\r\n    if (this.bboxType === BBoxType.LOCAL_BBOX) {\r\n      this.getMarkersInLocalBBox(0.02);\r\n    } else if (this.bboxType === BBoxType.SERVER_BBOX) {\r\n      this.submintGetMarkersBBox();\r\n    }\r\n  }\r\n\r\n  getMarkersInLocalBBox = (boundsMargin: number) => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    try {\r\n      const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n      const west = mapBounds.getWest() - boundsMargin;\r\n      const east = mapBounds.getEast() + boundsMargin;\r\n      const south = mapBounds.getSouth() - boundsMargin;\r\n      const north = mapBounds.getNorth() + boundsMargin;\r\n      const data = this.rootStore.filterStore.dataAllInjuries\r\n        .filter((x) => x.latitude >= south\r\n          && x.latitude <= north && x.longitude >= west && x.longitude <= east);\r\n      // const zoom = this.mapRef.current.leafletElement.getZoom();\r\n      // console.log(zoom, east -west ,data.length);     \r\n      this.updateDataMarkersInBounds(data);\r\n    } catch (error) {\r\n      logger.error(error);\r\n    }\r\n  }\r\n\r\n  submintGetMarkersBBox = () => {\r\n    // if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    // const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n    // const filter = this.rootStore.filterStore.getFilterForPost(mapBounds, true);\r\n    // fetchFilter(filter, 'latlon')\r\n    //   .then((data: any[] | undefined) => {\r\n    //     if (data !== null && data !== undefined) {\r\n    //       this.updateDataMarkersInBounds(data);\r\n    //     }\r\n    //   });\r\n  }\r\n}\r\n"],"sourceRoot":""}