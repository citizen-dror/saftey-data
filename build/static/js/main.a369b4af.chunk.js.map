{"version":3,"sources":["stores/FilterChecker.ts","stores/ColumnFilter.ts","stores/GroupBy.ts","stores/GroupBy2Val.tsx","stores/GroupBy2.ts","stores/FiterUtils.ts","services/CityService.ts","services/DexieInjuredService.js","stores/FilterStore.ts","stores/UiStore.ts","services/ImageService.ts","stores/ImageStore.ts","stores/storeConfig.ts","stores/RootStore.ts","i18n.js","components/atoms/SmallCard2.tsx","components/atoms/Checkbox.tsx","components/organisms/ConfigModal.tsx","services/AccidentService.ts","hooks/queryHooks.ts","components/atoms/ErrorBoundary.tsx","components/atoms/Loader.tsx","components/templates/TabsTemplate.tsx","components/molecules/CitySelector.tsx","components/molecules/StreetSelector.tsx","components/molecules/RoadNameSelector.tsx","components/molecules/RoadSegmentSelector.tsx","components/molecules/GroupCheckBox.tsx","components/organisms/FilterForm.tsx","components/organisms/ConfigFilterModal.tsx","assets/SvgIconFilter.tsx","components/atoms/ButtonShowFilterModal.tsx","components/organisms/Drawer.tsx","components/templates/WithSidebarTemplate.tsx","components/molecules/InfoPanel.tsx","components/templates/HomeTemplate.tsx","components/pages/HomePage.tsx","components/templates/CityTemplate.tsx","components/pages/CityPage.tsx","components/molecules/LanguageSelector.tsx","components/molecules/NavigationList.tsx","components/templates/Headr.tsx","assets/safety-logo.png","App.js","serviceWorker.js","index.js","services/logger.js","hooks/myUseMemo.ts","components/atoms/MySelect.tsx","stores/MapStore.ts"],"names":["FilterChecker","label","valid","filters","this","checked","observable","ColumnFilter","name","dbColName","allTypesOption","arrTypes","reduce","counter","currentValue","computed","action","aType","forEach","x","index","initVehicleTypes","col","push","GroupBy","text","value","limit","GroupBy2Val","color","GroupBy2","vals","revTrnas","key","fixStrcutTable","data","map","arr","count","y","engVal","grp2","join","xId","_id","undefined","replace","sObject","JSON","parse","getBars","Object","entries","getColumns","res","unshift","getFilterGroupBy","filterMatch","groupName","popMin","popMax","groupName2","filter","grpids","getAggFilter","getMultiplefilter","colFilter","allChecked","arrfilter","iterator","values","filterCheck","xSafe","CityService","getCityByNameHe","cityName","collback","url","fetch","method","headers","redirect","referrerPolicy","then","response","json","lang","db","Dexie","a","injuerd","bulkPut","getFromDexie","arrFilters","length","toArray","years","shift","where","filterName","between","startYear","endYear","collection","element","and","orFilter","val","version","stores","FilterStore","rootStore","appInitialized","CITY_POP_SIZE_ALL","cityPopSizeArr","updateSpeedLimit","updateFilters","speedLimit","padDataYearsWith0","yearsList","i","year","objDAta","find","submintMainDataFilter","isLoading","range","cityPopSizeRange","getFilter","FiterUtils","min","max","mapStore","updateIsSetBounds","cities","roadSegment","fetchAggregatFilter","updateAllInjuries","useLocalDb","insertToDexie","submintGetMarkerFirstStep","updateDataMarkersLean","submitCityNameAndLocation","city","updateMapCenterByCity","cityResult","bounds","useBounds","injurySeverity","getfilterCity","getfilterBounds","dayNight","getFilterStreets","getFilterFromNumArray","roads","getFilterFromArray","injTypes","genderTypes","ageTypes","populationTypes","accidentType","vehicleType","roadTypes","roadWidth","separator","oneLane","mapBounds","getSouth","getNorth","getWest","getEast","getfilterBySeverityAndCity","streets","trim","parseInt","submitMainDataFilterLocalDb","getFilterIDB","submintGetMarkersBBoxIdb","getFilterBboxIDB","updateDataMarkersInBounds","toString","getfilterCityIDB","getFilterStreetsIDB","getMultiplefilterIDB","getFilterFromArrayIDb","bbox","p1","getSouthWest","p2","getNorthEast","filterVals","filter1","FC","setCasualtiesNames","groupByDict","dictGroupBy","Severity","TypeInjured","Vehicle","Gender","Age","Year","Month","DayNight","WeekDay","RoadType","City","CityByPop","Street","Road","AccidentType","Vehicles","SpeedLimit","RoadWidth","Separator","OneLane","initGroupByDict","group2Dict","dict","initGroup2Dict","groupBy","groupBy2","dataByYears","dataYearsUnfilterdInit","dataFilterdByYears","dataYearsfilterdInit","dataFilterd","dataGrpBy1Init","dataGroupby2","dataGrp2Init","isAllValsFalse","isValidSeverity","isValidWhen","isValidWho","isValidWhere","isValidWhat","isValidWhatVehicle","isValidWhatRoad","showAllVehicleTypes","isUpdateFromUrl","formCardKey","deadChecker","sevIngChecker","casualtiesNames","isMulti","isMultipleCities","names","updateCityResult","split","setMarkersLoadStep","dataAllInjuries","setBounds","bboxType","BBoxType","LOCAL_BBOX","getMarkersInLocalBBox","dataMarkersLean","submitfilterdGroupByPop","submitfilterdGroup","submitfilterdGroup2","filtermatch","fetchAggregate","dataPadded","aGroupBy","sort","fixData","error","logger","log","step","isUse2StepsMarkers","markersLoadStep","SERVER_BBOX","submintGetMarkersBBox","submitGroupByYears","submitfilterdGroupByYears","uiStore","language","currentPage","imageStore","getImagesByPlace","updateFilter","UiStore","reactionChangeLang","reaction","locale","i18n","changeLanguage","initLang","slang","localStorage","getItem","updateLanguage","setItem","stringify","dir","setDirection","direction","showFilterModal","pageType","tabName","currentTab","filterStore","searchParams","chartType","showPercentageChart","fetchListImgByTag","tag","mode","cache","credentials","ok","fetchListImgByPlace","place","uploadImg","image","file","formData","FormData","append","titlehe","texthe","tags","body","updateImgProps","ImageStore","tagsArr","setCurrImageVal","valName","currImage","submitImageFile","getImages","type","getImagesByTag","currTag","setImageList","imageList","setCurrImage","hideDescription","document","documentElement","style","setProperty","store","MapStore","StoreContext","React","createContext","useStore","useContext","Error","use","initReactI18next","init","fallbackLng","lng","debug","resources","translationEng","translationHeb","interpolation","escapeValue","SmallCard2","children","header","sizeWidth","sizeHeight","cardHeader","width","height","className","Checkbox","group","id","onChange","t","useTranslation","Check","inline","memo","ConfigModal","observer","title","showModal","setShow","size","console","handleClose","submitChanges","variant","onClick","disabled","isValidAllFilters","show","onHide","Header","closeButton","Title","Body","maxHeight","overflowY","Footer","fetchFilter","useQuery","location","URLSearchParams","search","useTabFromQuery","query","defVal","get","ErrorBoundary","props","state","hasError","errorInfo","Component","Loader","Spinner","animation","GroupByGraphsPanel","lazy","GroupByTablesPanel","MapAccidents","AccidentsTable","MyImageGallery","TabsTemplate","marginTop","Tabs","mountOnEnter","activeKey","onSelect","tabActiveKey","isReadyToRenderMap","setCurrentTab","Tab","eventKey","fallback","CitySelector","isMultiple","Form","Group","controlId","Label","selected","updateCities","options","citisNamesHeb","multiple","StreetSelector","Control","placeholder","e","updateStreets","target","RoadNameSelector","setRoads","inputProps","roadNames","RoadSegmentSelector","updateRoadSegment","GroupCheckbox","formName","onGroupChange","feedback","fontSize","isvalid","list","fChecker","useMemos","STYLE_TOGGLE_WARNING","STYLE_TOGGLE_NORMAL","cursor","FilterForm","updateInjurySeverity","Fragment","Accordion","defaultActiveKey","CardFilterWhen","CardFilterWhere","CardFilterWho","CardFilterWhat","CardFilterWhatVehicle","CardFilterWhatRoad","CustomToggle","useState","hover","setHover","toggleHover","linkStyle","textDecoration","onButtonClick","useAccordionToggle","onMouseEnter","onMouseLeave","setStartYear","setEndYear","updateDayNight","setFormCardKey","styleToggle","Card","Collapse","MySelect","deafaultVal","String","updateRoadType","setCityPopSizeRange","display","alignItems","valProp","contentProp","event","useLocation","updateInjuerdType","updateGenderType","updateAgeType","updatePopulationType","useEffect","injType","qText","useInjTypeByQuery","updateAccidentType","updateVehicleType","updateRoadWidth","updateSeparator","updateOneLane","ConfigFilterModal","setShowFilterModal","submitFilter","setTimeout","SvgIconFilter","xmlns","viewBox","d","fill","ButtonShowFilterModal","memoFilterIcon","Drawer","Button","margin","WithSidebarTemplate","WhereTitle","cityPopSizeObj","obj","InfoPanel","styles","div","marginLeft","marginRight","toJS","HomeTemplate","setIsMultipleCities","setCurrentPage","history","useHistory","pathname","tab","memoConfigModal","HomePage","CityTemplate","setIsUpdateFromUrl","defaultName","found","includes","useCityNameFromQuery","CityPage","LanguageSelector","getElementById","href","classList","remove","add","NavigationList","to","marginBottom","position","top","zIndex","Navbar","expand","src","alt","Toggle","aria-controls","AboutPage","UpdateImagePage","app","App","path","component","exact","Boolean","window","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch","message","freeze","dep","item","useMemo","defaultValue","DEFAULT_BOUNDS","L","latLng","mapRef","setMapRef","getBounds","lastPoint","latitude","longitude","p","LatLng","lat","latLngBounds","getBounds2","south","north","west","east","Math","getMarkersInBBox","boundsMargin","current","leafletElement","center","mapCenter","lon","updateMapCenter","citisArr","isSetBounds","bunds","getCenter","roadSegArr","useSetBounds","heatLayerHidden","useSmallMarkers","dataMarkersInBounds"],"mappings":"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","file":"static/js/main.a369b4af.chunk.js","sourcesContent":["import { observable} from 'mobx';\r\n\r\nexport interface IFilterChecker {\r\n    checked: boolean;\r\n    label: string;\r\n    filters: string[];\r\n}\r\n/**\r\n * filter that represnt a check - box in gui\r\n */\r\nexport default class FilterChecker implements IFilterChecker {\r\n    @observable\r\n    checked: boolean;\r\n\r\n    label: string;\r\n\r\n    filters: string[];\r\n\r\n    constructor(label: string, valid: boolean, filters: string[]) {\r\n      this.label = label;\r\n      this.checked = valid;\r\n      this.filters = filters;\r\n    }\r\n}\r\n","import { observable, action, computed } from 'mobx';\r\nimport FilterChecker, { IFilterChecker } from './FilterChecker';\r\nimport dataYearsUnfilterdInit from '../assets/data-by-years.json';\r\nimport dataYearsfilterdInit from '../assets/data-by-years-filtred.json';\r\nimport dataGrpBy1Init from '../assets/data-by-grp1.json';\r\nimport dataGrp2Init from '../assets/data-by-grp2.json';\r\n\r\nexport interface IColumnFilter {\r\n  name: string;\r\n  dbColName: string;\r\n  arrTypes: IFilterChecker[];\r\n  // spaciel value, if checkd it will mark all options as true\r\n  allTypesOption: number;\r\n  isAllValsFalse: boolean;\r\n  updateFilter: (aType: number, checked: boolean) => void;\r\n}\r\n/**  filter group of boolaen filters\r\n*  each group represnt one column in the database that can get\r\n* several fixd values\r\n*/\r\nexport class ColumnFilter implements IColumnFilter {\r\n  name: string;\r\n\r\n  dbColName: string;\r\n\r\n  @observable\r\n  arrTypes: IFilterChecker[];\r\n\r\n  allTypesOption: number;\r\n\r\n  constructor(name: string, dbColName: string, allTypesOption: number = -1) {\r\n    this.name = name;\r\n    this.dbColName = dbColName;\r\n    this.arrTypes = [];\r\n    // if this value > -1 , there is an option to set all values as true\r\n    this.allTypesOption = allTypesOption;\r\n  }\r\n\r\n  /**\r\n   * check if all the a values in the group are false\r\n   */\r\n  @computed get isAllValsFalse() {\r\n    const res = this.arrTypes.reduce((counter, currentValue) => (currentValue.checked ? ++counter : counter), 0);\r\n    return (res === 0);\r\n  }\r\n\r\n  @action\r\n  updateFilter = (aType: number, checked: boolean) => {\r\n    // in case this filter group has no option for \"select all\" - update the value\r\n    if (this.allTypesOption === -1) this.arrTypes[aType].checked = checked;\r\n    // in case this filter has opthion for \"select all\"\r\n    else if (aType === this.allTypesOption) {\r\n      this.arrTypes.forEach((x, index) => x.checked = (index === this.allTypesOption) ? checked : !checked);\r\n    } else {\r\n      this.arrTypes[this.allTypesOption].checked = false;\r\n      this.arrTypes[aType].checked = checked;\r\n    }\r\n  }\r\n}\r\n\r\nexport const initInjurySeverity = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Severity', 'injury_severity_hebrew');\r\n  col.arrTypes.push(new FilterChecker('dead', true, ['הרוג']));\r\n  col.arrTypes.push(new FilterChecker('severly-injured', false, ['פצוע קשה']));\r\n  return col;\r\n};\r\n\r\nexport const initDayNight = () => {\r\n  const col: IColumnFilter = new ColumnFilter('DayNight', 'day_night_hebrew');\r\n  col.arrTypes.push(new FilterChecker('day', true, ['יום']));\r\n  col.arrTypes.push(new FilterChecker('night', true, ['לילה']));\r\n  return col;\r\n};\r\n\r\nexport const initMonth = (arr: IFilterChecker[]) => {\r\n  arr.push(new FilterChecker('1', true, ['1']));\r\n  arr.push(new FilterChecker('2', true, ['2']));\r\n  arr.push(new FilterChecker('3', true, ['3']));\r\n  arr.push(new FilterChecker('4', true, ['4']));\r\n  arr.push(new FilterChecker('5', true, ['5']));\r\n  arr.push(new FilterChecker('6', true, ['6']));\r\n  arr.push(new FilterChecker('7', true, ['7']));\r\n  arr.push(new FilterChecker('8', true, ['8']));\r\n  arr.push(new FilterChecker('9', true, ['9']));\r\n  arr.push(new FilterChecker('10', true, ['10']));\r\n  arr.push(new FilterChecker('11', true, ['11']));\r\n  arr.push(new FilterChecker('12', true, ['12']));\r\n};\r\n\r\nexport const initInjTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Vehicle', 'injured_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, ['הולך רגל']));\r\n  col.arrTypes.push(new FilterChecker('cyclist', false, ['נהג - אופניים', 'נוסע - אופניים (לא נהג)']));\r\n  col.arrTypes.push(new FilterChecker('other', false, ['נהג - רכב לא ידוע', 'נוסע - רכב לא ידוע']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false, ['נהג - אופנוע', 'נוסע - אופנוע (לא נהג)']));\r\n  col.arrTypes.push(new FilterChecker('wheels4+', false, ['נהג - רכב בעל 4 גלגלים ויותר', 'נוסע - רכב בעל 4 גלגלים ויותר']));\r\n  return col;\r\n};\r\n\r\nexport const initVehicleTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('VehicleType', 'vehicle_vehicle_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, ['null']));\r\n  col.arrTypes.push(new FilterChecker('mobilityscooter', false, ['קלנועית חשמלית']));\r\n  col.arrTypes.push(new FilterChecker('bicycle', false, ['אופניים']));\r\n  col.arrTypes.push(new FilterChecker('e-scooter', false, ['קורקינט חשמלי']));\r\n  col.arrTypes.push(new FilterChecker('e-bike', false, ['אופניים חשמליים']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false,\r\n    ['אופנוע 401+ סמ\"ק', 'אופנוע 126 עד 400 סמ\"ק', 'אופנוע 51 עד 125 סמ\"ק']));\r\n  col.arrTypes.push(new FilterChecker('car', false, ['רכב נוסעים פרטי']));\r\n  col.arrTypes.push(new FilterChecker('taxi', false, ['מונית']));\r\n  col.arrTypes.push(new FilterChecker('bus', false, ['אוטובוס זעיר', 'אוטובוס']));\r\n  col.arrTypes.push(new FilterChecker('tranzit', false, ['משא עד 3.5 טון - אחוד (טרנזיט)']));\r\n  col.arrTypes.push(new FilterChecker('tender', false, ['משא עד 3.5  טון - לא אחוד (טנדר)']));\r\n  col.arrTypes.push(new FilterChecker('truck', false,\r\n    ['משא 3.6 עד 9.9 טון', 'משא 10.0 עד 12.0 טון', 'משא 12.1 עד 15.9 טון', 'משא 16.0 עד 33.9 טון', 'משא 34.0+ טון']));\r\n  col.arrTypes.push(new FilterChecker('tractor', false, ['טרקטור']));\r\n  col.arrTypes.push(new FilterChecker('train', false, ['רכבת']));\r\n  col.arrTypes.push(new FilterChecker('other', false, ['אחר ולא ידוע']));\r\n  return col;\r\n};\r\n\r\nexport const initVehicleTypesFull = () => {\r\n  const col: IColumnFilter = new ColumnFilter('VehicleType', 'vehicle_vehicle_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, ['null']));\r\n  col.arrTypes.push(new FilterChecker('mobilityscooter', false, ['קלנועית חשמלית']));\r\n  col.arrTypes.push(new FilterChecker('bicycle', false, ['אופניים']));\r\n  col.arrTypes.push(new FilterChecker('e-scooter', false, ['קורקינט חשמלי']));\r\n  col.arrTypes.push(new FilterChecker('e-bike', false, ['אופניים חשמליים']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle1', false, ['אופנוע 51 עד 125 סמ\"ק']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle2', false, ['אופנוע 126 עד 400 סמ\"ק']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle3', false, ['אופנוע 401+ סמ\"ק']));\r\n  col.arrTypes.push(new FilterChecker('car', false, ['רכב נוסעים פרטי']));\r\n  col.arrTypes.push(new FilterChecker('taxi', false, ['מונית']));\r\n  col.arrTypes.push(new FilterChecker('tranzit', false, ['משא עד 3.5 טון - אחוד (טרנזיט)']));\r\n  col.arrTypes.push(new FilterChecker('tender', false, ['משא עד 3.5  טון - לא אחוד (טנדר)']));\r\n  col.arrTypes.push(new FilterChecker('minbuss', false, ['אוטובוס זעיר']));\r\n  col.arrTypes.push(new FilterChecker('bus', false, ['אוטובוס']));\r\n  col.arrTypes.push(new FilterChecker('truck1', false, ['משא 3.6 עד 9.9 טון']));\r\n  col.arrTypes.push(new FilterChecker('truck2', false, ['משא 10.0 עד 12.0 טון']));\r\n  col.arrTypes.push(new FilterChecker('truck3', false, ['משא 12.1 עד 15.9 טון']));\r\n  col.arrTypes.push(new FilterChecker('truck4', false, ['משא 16.0 עד 33.9 טון']));\r\n  col.arrTypes.push(new FilterChecker('truck5', false, ['משא 34.0+ טון']));\r\n  col.arrTypes.push(new FilterChecker('tractor', false, ['טרקטור']));\r\n  col.arrTypes.push(new FilterChecker('train', false, ['רכבת']));\r\n  col.arrTypes.push(new FilterChecker('other', false, ['אחר ולא ידוע']));\r\n  return col;\r\n};\r\n\r\n\r\nexport const initGenderTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Gender', 'sex_hebrew');\r\n  col.arrTypes.push(new FilterChecker('female', true, ['נקבה']));\r\n  col.arrTypes.push(new FilterChecker('male', true, ['זכר']));\r\n  return col;\r\n};\r\n\r\nexport const initAgeTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Age', 'age_group_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('00-04', false, ['00-04']));\r\n  col.arrTypes.push(new FilterChecker('05-09', false, ['05-09']));\r\n  col.arrTypes.push(new FilterChecker('10-14', false, ['10-14']));\r\n  col.arrTypes.push(new FilterChecker('15-19', false, ['15-19']));\r\n  col.arrTypes.push(new FilterChecker('20-29', false, ['20-24', '25-29']));\r\n  col.arrTypes.push(new FilterChecker('30-39', false, ['30-34', '35-39']));\r\n  col.arrTypes.push(new FilterChecker('40-49', false, ['40-44', '45-49']));\r\n  col.arrTypes.push(new FilterChecker('50-59', false, ['50-54', '55-59']));\r\n  col.arrTypes.push(new FilterChecker('60-69', false, ['60-64', '65-69']));\r\n  col.arrTypes.push(new FilterChecker('70-79', false, ['70-74', '75-79']));\r\n  col.arrTypes.push(new FilterChecker('80+', false, ['80-84', '85+']));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, ['לא ידוע']));\r\n  return col;\r\n};\r\nexport const initPopulationTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Population', 'population_type_hebrew');\r\n  col.arrTypes.push(new FilterChecker('jews', true, ['יהודים']));\r\n  col.arrTypes.push(new FilterChecker('arabs', true, ['ערבים']));\r\n  col.arrTypes.push(new FilterChecker('immigrants', true, ['זרים']));\r\n  col.arrTypes.push(new FilterChecker('others', true, ['אחרים']));\r\n  return col;\r\n};\r\n\r\nexport const initRoadTypes = () => {\r\n  const col: IColumnFilter = new ColumnFilter('RoadType', 'road_type_hebrew');\r\n  col.arrTypes.push(new FilterChecker('urban-junction', true, ['עירונית בצומת']));\r\n  col.arrTypes.push(new FilterChecker('urban-road', true, ['עירונית לא בצומת']));\r\n  col.arrTypes.push(new FilterChecker('non-urban-junction', true, ['לא-עירונית בצומת']));\r\n  col.arrTypes.push(new FilterChecker('non-urban-road', true, ['לא-עירונית לא בצומת']));\r\n  return col;\r\n};\r\nexport const initSpeedLimit = () => {\r\n  const col: IColumnFilter = new ColumnFilter('SpeedLimit', 'speed_limit_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('speed50', false, ['עד 50 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed60', false, ['60 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed70', false, ['70 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed80', false, ['80 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed90', false, ['90 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed100', false, ['100 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed110', false, ['110 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed120', false, ['120 קמ\"ש']));\r\n  col.arrTypes.push(new FilterChecker('speed-unknown', false, ['לא ידוע']));\r\n  return col;\r\n};\r\nexport const initRoadWidth = () => {\r\n  const col: IColumnFilter = new ColumnFilter('RoadWidth', 'road_width_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('road-width-5', false, ['עד 5 מטר']));\r\n  col.arrTypes.push(new FilterChecker('road-width-7', false, ['5 עד 7  מטר']));\r\n  col.arrTypes.push(new FilterChecker('road-width-10', false, ['7 עד 10.5 מטר']));\r\n  col.arrTypes.push(new FilterChecker('road-width-14', false, ['10.5 עד 14 מטר']));\r\n  col.arrTypes.push(new FilterChecker('road-width-14+', false, ['יותר מ- 14 מטר']));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, ['לא ידוע']));\r\n  return col;\r\n};\r\nexport const initSeparator = () => {\r\n  const col: IColumnFilter = new ColumnFilter('Separator', 'multi_lane_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('separator-fence', false, ['מיפרדה עם גדר בטיחות']));\r\n  col.arrTypes.push(new FilterChecker('separator-built', false, ['מיפרדה בנויה ללא גדר בטיחות']));\r\n  col.arrTypes.push(new FilterChecker('separator-not-built', false, ['מיפרדה לא בנויה']));\r\n  col.arrTypes.push(new FilterChecker('separator-paint', false, ['מיפרדה מסומנת בצבע']));\r\n  col.arrTypes.push(new FilterChecker('separator-ohter', false, ['אחר']));\r\n  col.arrTypes.push(new FilterChecker('separator-not-relevant', false, ['null']));\r\n  return col;\r\n};\r\nexport const initOneLane = () => {\r\n  const col: IColumnFilter = new ColumnFilter('OneLane', 'one_lane_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-line', false, ['דו סיטרי + קו הפרדה רצוף']));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-noline', false, ['דו סיטרי אין קו הפרדה רצוף']));\r\n  col.arrTypes.push(new FilterChecker('onelane-oneway', false, ['חד סיטרי']));\r\n  col.arrTypes.push(new FilterChecker('onelane-unknown', false, ['לא ידוע מס מסלולים']));\r\n  col.arrTypes.push(new FilterChecker('onelane-not-relevant', false, ['null']));\r\n  return col;\r\n};\r\nexport const initAccidentType = () => {\r\n  const col: IColumnFilter = new ColumnFilter('AccidentType', 'accident_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('hit-ped', false, ['פגיעה בהולך רגל']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-side', false, ['התנגשות חזית בצד']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-front', false, ['התנגשות חזית בחזית']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-rear', false, ['התנגשות חזית באחור']));\r\n  col.arrTypes.push(new FilterChecker('hit-side-side', false, ['התנגשות צד בצד']));\r\n  col.arrTypes.push(new FilterChecker('hit-obstacle', false, ['התנגשות עם עצם דומם']));\r\n  col.arrTypes.push(new FilterChecker('hit-turning-over', false, ['התהפכות']));\r\n  col.arrTypes.push(new FilterChecker('hit-slip', false, ['החלקה']));\r\n  return col;\r\n};\r\n\r\nexport const initDataYreasUnfilterd = () => dataYearsUnfilterdInit;\r\n\r\nexport const initDataYreasfilterd = () => dataYearsfilterdInit;\r\n\r\nexport const initDataGrpBy1 = () => dataGrpBy1Init;\r\n\r\nexport const initDataGrpBy2 = () => dataGrp2Init;","import { observable } from 'mobx';\r\n\r\nexport interface IGroupBy {\r\n  text: string;\r\n  value: string;\r\n  limit: number;\r\n}\r\n\r\nexport default class GroupBy implements IGroupBy {\r\n  @observable\r\n  text: string;\r\n\r\n  value: string;\r\n\r\n  limit: number;\r\n\r\n  // text - headleine for GUI, value - name of value for filter\r\n  constructor(text: string, value: string, limit: number = 0) {\r\n    this.text = text;\r\n    this.value = value;\r\n    this.limit = limit;\r\n  }\r\n}\r\n\r\nexport const initGroupByDict = () => {\r\n  const dictGroupBy:any = {};\r\n  dictGroupBy.Severity = new GroupBy('Severity', 'injury_severity_hebrew');\r\n  dictGroupBy.TypeInjured = new GroupBy('TypeInjured', 'injured_type_hebrew');\r\n  dictGroupBy.Vehicle = new GroupBy('Vehicle', 'vehicle_vehicle_type_hebrew');\r\n  dictGroupBy.Gender = new GroupBy('Gender', 'sex_hebrew');\r\n  dictGroupBy.Age = new GroupBy('Age', 'age_group_hebrew');\r\n  dictGroupBy.Year = new GroupBy('Year', 'accident_year');\r\n  dictGroupBy.Month = new GroupBy('Month', 'accident_month');\r\n  dictGroupBy.DayNight = new GroupBy('DayNight', 'day_night_hebrew');\r\n  dictGroupBy.WeekDay = new GroupBy('WeekDay', 'day_in_week_hebrew');\r\n  dictGroupBy.RoadType = new GroupBy('RoadType', 'road_type_hebrew');\r\n  dictGroupBy.City = new GroupBy('City', 'accident_yishuv_name', 10);\r\n  dictGroupBy.CityByPop = new GroupBy('CityByPop', 'accident_yishuv_name');\r\n  dictGroupBy.Street = new GroupBy('Street', 'street1_hebrew', 10);\r\n  dictGroupBy.Road = new GroupBy('Road', 'road1', 10);\r\n  dictGroupBy.AccidentType = new GroupBy('AccidentType', 'accident_type_hebrew');\r\n  dictGroupBy.Vehicles = new GroupBy('Vehicles', 'vehicles');\r\n  dictGroupBy.SpeedLimit = new GroupBy('SpeedLimit', 'speed_limit_hebrew');\r\n  dictGroupBy.RoadWidth = new GroupBy('RoadWidth', 'road_width_hebrew');\r\n  dictGroupBy.Separator = new GroupBy('Separator', 'multi_lane_hebrew');\r\n  dictGroupBy.OneLane = new GroupBy('OneLane', 'one_lane_hebrew');\r\n  return dictGroupBy;\r\n};\r\n","export default class GroupBy2Val {\r\n  name: string;\r\n  \r\n  color: string;\r\n\r\n  constructor(name: string, color: string) {\r\n    this.name = name;\r\n    this.color = color;\r\n  }\r\n}\r\n","import { observable } from 'mobx';\r\nimport GroupBy2Val from './GroupBy2Val';\r\n\r\nexport interface IGroupBy2 {\r\n    text: string;\r\n    name: string;\r\n    vals: any;\r\n  }\r\n\r\nexport default class GroupBy2 implements IGroupBy2 {\r\n    @observable\r\n    text:string;\r\n\r\n    name: string;\r\n\r\n    vals: any;\r\n\r\n    constructor(text:string, name: string) {\r\n      this.text = text;\r\n      this.name = name;\r\n      this.vals = {};\r\n    }\r\n\r\n    revTrnas = (key: string) => {\r\n      if (key === '') return '';\r\n      const res = this.vals[key].name;\r\n      return res;\r\n    }\r\n\r\n    // input like {_id: 2015, count: Array(2)}\r\n    // output like {_id: \"2015\", male: 264, female: 92}\r\n    fixStrcutTable = (data: any[]) => {\r\n      const res = data.map((x) => {\r\n        const arr = x.count.map((y: any) => {\r\n          const engVal = this.revTrnas(y.grp2);\r\n          return (`\"${engVal}\":${y.count}`);\r\n        }).join(',');\r\n        // eslint-disable-next-line no-underscore-dangle\r\n        let xId = x._id;\r\n        if (xId !== null && xId !== undefined && typeof (xId) === 'string') xId = xId.replace('\"', '\\\\\"');\r\n        let sObject = `{\"_id\":\"${xId}\",${arr}}`;\r\n        sObject = JSON.parse(sObject);\r\n        return (sObject);\r\n      });\r\n      return res;\r\n    }\r\n\r\n    getBars = () => {\r\n      // [{key:\"male\",color:\"#8884d8\"},{key:\"female\",color:\"#82ca9d\"}]\r\n      const res = Object.entries(this.vals).map(([key, x]: any[]) => ({ key: x.name, color: x.color }));\r\n      return res;\r\n    }\r\n\r\n    getColumns= () => {\r\n      const res = Object.entries(this.vals).map(([key, x]: any[]) => (x.name));\r\n      res.unshift('_id');\r\n      return res;\r\n    }\r\n}\r\n\r\nexport const initGroup2Dict = () => {\r\n  const dict = {} as any;\r\n  dict.Severity = new GroupBy2('Severity', 'injury_severity_hebrew');\r\n  dict.Severity.vals['הרוג'] = new GroupBy2Val('dead', '#8884D8');\r\n  dict.Severity.vals['פצוע קשה'] = new GroupBy2Val('severly-injured', '#82CA9D');\r\n\r\n  dict.Gender = new GroupBy2('Gender', 'sex_hebrew');\r\n  dict.Gender.vals['זכר'] = new GroupBy2Val('male', '#8884D8');\r\n  dict.Gender.vals['נקבה'] = new GroupBy2Val('female', '#82CA9D');\r\n\r\n  dict.RoadType = new GroupBy2('RoadType', 'road_type_hebrew');\r\n  dict.RoadType.vals['עירונית בצומת'] = new GroupBy2Val('urban-junction', '#559E54');\r\n  dict.RoadType.vals['עירונית לא בצומת'] = new GroupBy2Val('urban-road', '#305A30');\r\n  dict.RoadType.vals['לא-עירונית בצומת'] = new GroupBy2Val('non-urban-junction', '#1258DC');\r\n  dict.RoadType.vals['לא-עירונית לא בצומת'] = new GroupBy2Val('non-urban-road', '#0A337F');\r\n\r\n  dict.Year = new GroupBy2('Year', 'accident_year');\r\n  dict.Year.vals[2015] = new GroupBy2Val('2015', '#82CA9D');\r\n  dict.Year.vals[2016] = new GroupBy2Val('2016', '#559E54');\r\n  dict.Year.vals[2017] = new GroupBy2Val('2017', '#559E54');\r\n  dict.Year.vals[2018] = new GroupBy2Val('2018', '#305A30');\r\n  dict.Year.vals[2019] = new GroupBy2Val('2019', '#305A30');\r\n\r\n  dict.TypeInjured = new GroupBy2('TypeInjured', 'injured_type_hebrew');\r\n  dict.TypeInjured.vals['הולך רגל'] = new GroupBy2Val('pedestrian', '#82CA9D');\r\n  dict.TypeInjured.vals['נהג - אופניים'] = new GroupBy2Val('cyclist-d', '#559E54');\r\n  dict.TypeInjured.vals['נוסע - אופניים (לא נהג)'] = new GroupBy2Val('cyclist-p', '#559E54');\r\n  dict.TypeInjured.vals['נהג - רכב לא ידוע'] = new GroupBy2Val('inj-unknown-d', '#305A30');\r\n  dict.TypeInjured.vals['נוסע - רכב לא ידוע'] = new GroupBy2Val('inj-unknown-p', '#305A30');\r\n  dict.TypeInjured.vals['נהג - אופנוע'] = new GroupBy2Val('motorcycle-d', '#1258DC');\r\n  dict.TypeInjured.vals['נוסע - אופנוע (לא נהג)'] = new GroupBy2Val('motorcycle-p', '#1258DC');\r\n  dict.TypeInjured.vals['נהג - רכב בעל 4 גלגלים ויותר'] = new GroupBy2Val('wheels4+-d', '#0A337F');\r\n  dict.TypeInjured.vals['נוסע - רכב בעל 4 גלגלים ויותר'] = new GroupBy2Val('wheels4+-p', '#0A337F');\r\n\r\n  return dict;\r\n};\r\n","\r\nimport { IColumnFilter } from './ColumnFilter';\r\n\r\nexport const getFilterGroupBy =\r\n  (filterMatch: string,\r\n    groupName: string,\r\n    popMin = -1,\r\n    popMax = -1,\r\n    groupName2: string = '',\r\n    limit: number = 0) => {\r\n    let filter = `${'['\r\n      + '{\"$match\": '}${filterMatch}}`;\r\n    if (popMin >= 0 && popMax > 0) {\r\n      filter += ',{\"$lookup\":{'\r\n        + ' \"from\": \"cities\", \"localField\": \"accident_yishuv_name\",'\r\n        + ' \"foreignField\": \"name_he\",\"as\": \"city\"'\r\n        + '}}';\r\n      filter += `,{ \"$match\": { \"city.population\": { \"$gte\" : ${popMin} , \"$lte\" : ${popMax}}}}`;\r\n    }\r\n    if (groupName2 === '') filter += `,{\"$group\": { \"_id\": \"$${groupName}\", \"count\": { \"$sum\": 1 }}}`;\r\n    else {\r\n      filter += `, { \"$match\" : { \"${groupName2}\" : { \"$exists\" : true, \"$ne\" : null}}}`;\r\n      const grpids = `{ \"grp1\": \"$${groupName}\", \"grp2\": \"$${groupName2}\"}`;\r\n      filter += `,{\"$group\": { \"_id\":${grpids}, \"count\": { \"$sum\": 1 }}}`;\r\n      filter += ',{\"$group\": { \"_id\": \"$_id.grp1\" , \"count\": { \"$push\": {\"grp2\" : \"$_id.grp2\",\"count\" : \"$count\" } }}}';\r\n    }\r\n    if (limit === 0) filter += ',{\"$sort\": {\"_id\": 1}}';\r\n    else {\r\n      filter += `${',{\"$sort\": {\"count\": -1}}'\r\n        + ',{\"$limit\": '}${limit}}`;\r\n    }\r\n    filter += ']';\r\n    return filter;\r\n  };\r\n\r\n// filter accidents using aggrgation pipline\r\nexport const getAggFilter = (filterMatch: string, popMin: number, popMax: number) => {\r\n  let filter = `${'['\r\n    + '{\"$match\": '}${filterMatch}}`;\r\n  if (popMin >= 0 && popMax > 0) {\r\n    filter += ',{\"$lookup\":{'\r\n      + ' \"from\": \"cities\", \"localField\": \"accident_yishuv_name\",'\r\n      + ' \"foreignField\": \"name_he\",\"as\": \"city\"'\r\n      + '}}';\r\n    filter += `,{ \"$match\": { \"city.population\": { \"$gte\" : ${popMin} , \"$lte\" : ${popMax}}}}`;\r\n  }\r\n  filter += ']';\r\n  return filter;\r\n};\r\n\r\n// fiter by accidents per 100,000 city population\r\nexport const getFilterGroupByPop = (filterMatch: string, popMin = 200000, popMax = 100000, sort: number, limit: number) => {\r\n  let filter = `${'['\r\n    + '{\"$match\": '}${filterMatch}}`;\r\n  filter += ',{\"$lookup\":{'\r\n    + ' \"from\": \"cities\", \"localField\": \"accident_yishuv_name\",'\r\n    + ' \"foreignField\": \"name_he\",\"as\": \"city\"'\r\n    + '}}';\r\n  if (popMin >= 0 && popMax > 0) {\r\n    filter += `,{ \"$match\": { \"city.population\": { \"$gte\" : ${popMin} , \"$lte\" : ${popMax}}}}`;\r\n  }\r\n  filter += ',{\"$group\": {'\r\n    + '\"_id\": \"$accident_yishuv_name\",\"t_count\" : { \"$sum\" : 1 },\"t_population\" : { \"$first\" : \"$city.population\" }'\r\n    + '}}';\r\n  filter += ',{ \"$unwind\" : \"$t_population\"}';\r\n  filter += ',{ \"$project\" : { \"count\" :'\r\n    + '{ \"$multiply\" : [100000, { \"$divide\" : [\"$t_count\", \"$t_population\"] } ]}'\r\n    + '}}';\r\n  if (limit === 0) filter += `,{\"$sort\": {\"count\": ${sort}}}`;\r\n  else {\r\n    filter += `${`,{\"$sort\": {\"count\": ${sort}}}`\r\n      + ',{\"$limit\": '}${limit}}`;\r\n  }\r\n  filter += ']';\r\n  return filter;\r\n};\r\n\r\nexport const getMultiplefilter = (colFilter: IColumnFilter) => {\r\n  let filter: string = '';\r\n  let allChecked: boolean = true;\r\n  let arrfilter: string[] = [];\r\n  if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) allChecked = true;\r\n  else {\r\n    // in case there is allTypesOption , it want be copied to arrfilter\r\n    // as it is not checked\r\n    const iterator = colFilter.arrTypes.values();\r\n    for (const filterCheck of iterator) {\r\n      if (filterCheck.checked) {\r\n        arrfilter = [...arrfilter, ...filterCheck.filters];\r\n      } else {\r\n        allChecked = false;\r\n      }\r\n    }\r\n  }\r\n  if (allChecked) filter = '';\r\n  else {\r\n    filter += ',{\"$or\": [';\r\n    filter += arrfilter.map((x: string) => {\r\n      if (x === 'null') return `{\"${colFilter.dbColName}\":${null}}`;\r\n\r\n      const xSafe = x.replace('\"', '\\\\\"');\r\n      return `{\"${colFilter.dbColName}\" : \"${xSafe}\"}`;\r\n    }).join(',');\r\n    filter += ']}';\r\n  }\r\n  return filter;\r\n};\r\n","export default class CityService {\r\n  getCityByNameHe = (cityName: string, collback: (res: any[]) => void) => {\r\n    // \"http://localhost:5000/api/v1/city?name_he=חיפה\"\r\n    const url = `/api/v1/city?name_he=${cityName}`;\r\n    fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        collback(data);\r\n      });\r\n  };\r\n\r\n  getCitiesNames(lang: string, collback: (res: any[]) => void) {\r\n    // \"http://localhost:5000/api/v1/city?lang=he\"\r\n    const url = `/api/v1/city?lang=${lang}`;\r\n    fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        collback(data);\r\n      });\r\n  }\r\n}\r\n","import Dexie from 'dexie';\r\n\r\nconst db = new Dexie('saftyData');\r\ndb.version(1).stores({\r\n  injuerd: 'id++,_id, accident_id, accident_year, accident_timestamp, sex_hebrew, accident_yishuv_name ,road_type_hebrew',\r\n});\r\n\r\nexport async function insertToDexie(data) {\r\n  // logger.log(\"insertToDexie\")\r\n  // logger.log(data)\r\n  await db.injuerd.bulkPut(data);\r\n  // testInsertDexie()\r\n}\r\n\r\nexport async function getFromDexie(arrFilters) {\r\n  let data;\r\n  if (arrFilters.length === 0) data = await db.injuerd.toArray();\r\n  else {\r\n    const years = arrFilters.shift();\r\n    let collection = await db.injuerd.where(years.filterName).between(years.startYear, years.endYear, true, true);\r\n    arrFilters.forEach((element) => {\r\n      collection = collection.and(((x) => {\r\n        if (element.values.length === 1) return x[element.filterName] === element.values[0];\r\n\r\n        let orFilter = false;\r\n        element.values.forEach((val) => orFilter = orFilter || x[element.filterName] === val);\r\n        return orFilter;\r\n      }));\r\n    });\r\n    data = await collection.toArray();\r\n  }\r\n  return data;\r\n}\r\n\r\n\r\n// var db1 = new Dexie('hellodb');\r\n// db1.version(1).stores({\r\n//     tasks: '++id,date,description,done'\r\n// });\r\n\r\n\r\n// export async function testInsertDexie() {\r\n//     var id = await db1.tasks.put({date: Date.now(), description: 'Test Dexie', done: 0});\r\n//     logger.log(\"Got id \" + id);\r\n//     // Now lets add a bunch of tasks\r\n//     await db1.tasks.bulkPut([\r\n//         {date: Date.now(), description: 'Test Dexie bulkPut()', done: 1},\r\n//         {date: Date.now(), description: 'Finish testing Dexie bulkPut()', done: 1}\r\n//     ]);\r\n// }\r\n\r\n\r\nexport default db;\r\n","import {\r\n   observable, action, computed,\r\n} from 'mobx';\r\nimport { IColumnFilter } from './ColumnFilter';\r\nimport * as FC from './ColumnFilter';\r\nimport { IFilterChecker } from './FilterChecker';\r\nimport GroupBy, { initGroupByDict } from './GroupBy';\r\nimport GroupBy2, { initGroup2Dict } from './GroupBy2';\r\nimport * as FiterUtils from './FiterUtils';\r\nimport RootStore from './RootStore';\r\nimport { fetchAggregate, fetchAggregatFilter } from '../services/AccidentService';\r\nimport CityService from '../services/CityService';\r\nimport { insertToDexie, getFromDexie } from '../services/DexieInjuredService';\r\nimport logger from '../services/logger';\r\nimport { BBoxType } from './MapStore';\r\nimport Casualty from './Casualty';\r\n// import autorun  from \"mobx\"\r\n\r\nexport default class FilterStore {\r\n   appInitialized = false\r\n\r\n   constructor(rootStore: RootStore) {\r\n      // init app data\r\n      this.rootStore = rootStore;\r\n      this.injurySeverity = FC.initInjurySeverity();\r\n      this.setCasualtiesNames(this.injurySeverity);\r\n      // when\r\n      this.dayNight = FC.initDayNight();\r\n      // where\r\n      this.roadTypes = FC.initRoadTypes();\r\n      // who\r\n      this.injTypes = FC.initInjTypes();\r\n      this.genderTypes = FC.initGenderTypes();\r\n      this.ageTypes = FC.initAgeTypes();\r\n      this.populationTypes = FC.initPopulationTypes();\r\n      // What\r\n      this.accidentType = FC.initAccidentType();\r\n      this.vehicleType = FC.initVehicleTypes();\r\n      // What Road\r\n      this.speedLimit = FC.initSpeedLimit();\r\n      this.roadWidth = FC.initRoadWidth();\r\n      this.separator = FC.initSeparator();\r\n      this.oneLane = FC.initOneLane();\r\n      this.groupByDict = initGroupByDict();\r\n      this.group2Dict = initGroup2Dict();\r\n      this.groupBy = this.groupByDict.TypeInjured;\r\n      this.groupBy2 = this.group2Dict.Gender;\r\n      // init data (on home page)\r\n      this.dataByYears = FC.initDataYreasUnfilterd();\r\n      this.dataFilterdByYears = FC.initDataYreasfilterd();\r\n      this.dataFilterd = FC.initDataGrpBy1();\r\n      this.dataGroupby2 = FC.initDataGrpBy2();\r\n      this.appInitialized = false;\r\n   }\r\n\r\n   rootStore: RootStore;\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // Config Filter\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   showAllVehicleTypes: boolean = false;\r\n\r\n   @action\r\n   updateShowAllVehicleTypes = (val: boolean) => {\r\n      this.showAllVehicleTypes = val;\r\n      if (this.showAllVehicleTypes) this.vehicleType = FC.initVehicleTypesFull();\r\n      else this.vehicleType = FC.initVehicleTypes();\r\n   }\r\n\r\n   @observable isUpdateFromUrl: boolean = true;\r\n\r\n   @action setIsUpdateFromUrl = (value: boolean) => {\r\n      this.isUpdateFromUrl = value;\r\n   }\r\n\r\n   @observable formCardKey: number = 0;\r\n   @action setFormCardKey = (value: number) => {\r\n      this.formCardKey = value;\r\n   }\r\n\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // Severity\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   injurySeverity: IColumnFilter\r\n\r\n   @action\r\n   updateInjurySeverity = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.injurySeverity, aType, val);\r\n   }\r\n\r\n   @computed get isValidSeverity() {\r\n      const res = !this.injurySeverity.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   @observable\r\n   casualtiesNames: string = 'casualties';\r\n\r\n   @action\r\n   setCasualtiesNames = (injurySeverity: IColumnFilter) => {\r\n      let res = 'casualties';\r\n      const deadChecker: IFilterChecker = injurySeverity.arrTypes[0];\r\n      const sevIngChecker: IFilterChecker = injurySeverity.arrTypes[1];\r\n      if (deadChecker.checked && !sevIngChecker.checked) res = 'killed';\r\n      else if (!deadChecker.checked && sevIngChecker.checked) res = 'severely-injured';\r\n      this.casualtiesNames = res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // where\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   isMultipleCities: boolean = false;\r\n\r\n   @action\r\n   setIsMultipleCities = (isMulti: boolean) => {\r\n      this.isMultipleCities = isMulti;\r\n   }\r\n\r\n\r\n   @observable\r\n   cities: string[] = [];\r\n\r\n   @action\r\n   updateCities = (names: string[], updateCityResult: boolean) => {\r\n      this.cities = names;\r\n      if (this.cities.length === 0) {\r\n         this.streets = [];\r\n      } else if (updateCityResult) {\r\n         [this.cityResult] = this.cities;\r\n      }\r\n   }\r\n\r\n   @observable\r\n   cityResult: string = '';\r\n\r\n   // @computed get cityResult() {\r\n   //   let res = (this.cities.length >= 1) ? this.cities[0] : '';\r\n   //   if (window.location.pathname === '/city' && this.onInitCityPage && res === '')\r\n   //   {\r\n   //     res = 'תל אביב -יפו';\r\n   //     this.onInitCityPage = false;\r\n   //   }\r\n   //   return res;\r\n   // };\r\n\r\n   // @observable\r\n   // onInitCityPage = true;\r\n\r\n   // setAddressBar = autorun(() => {\r\n   //   if (window.history.pushState && window.location.pathname === '/city') {\r\n   //     const newurl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?name=${this.cityResult}`;\r\n   //     window.history.pushState({ path: newurl }, '', newurl);\r\n   //   }\r\n   // });\r\n\r\n   // submitCityFilter = autorun(() => {\r\n   //   if (window.location.pathname === '/city' && this.cityResult !== '') {\r\n   //     this.submitFilter();\r\n   //   }\r\n   // });\r\n\r\n   @observable\r\n   streets: string[] = [];\r\n\r\n   @action\r\n   updateStreets = (names: string) => {\r\n      this.streets = names.split(',');\r\n   }\r\n\r\n   @observable\r\n   roads: string[] = [];\r\n\r\n   @action\r\n   setRoads = (names: string[]) => {\r\n      this.roads = names;\r\n   }\r\n\r\n   CITY_POP_SIZE_ALL = '{\"min\":-1,\"max\":-1}';\r\n   @observable\r\n   cityPopSizeRange: string = this.CITY_POP_SIZE_ALL;\r\n\r\n   @action\r\n   setCityPopSizeRange = (range: string) => {\r\n      this.cityPopSizeRange = range;\r\n   }\r\n   cityPopSizeArr = [\r\n      { val: '{\"min\":-1,\"max\":-1}', text: 'all' },\r\n      { val: '{\"min\":200000,\"max\":1000000}', text: '200K-1000K' },\r\n      { val: '{\"min\":100000,\"max\":200000}', text: '100K-200K' },\r\n      { val: '{\"min\":50000,\"max\":100000}', text: '50K-100K' },\r\n      { val: '{\"min\":20000,\"max\":50000}', text: '20K-50K' },\r\n      { val: '{\"min\":10000,\"max\":20000}', text: '10K-20K' },\r\n      { val: '{\"min\":0,\"max\":10000}', text: '0-10K' },\r\n   ];\r\n\r\n   @observable\r\n   roadSegment: string[] = [];\r\n\r\n   @action\r\n   updateRoadSegment = (names: string) => {\r\n      this.roadSegment = names.split(',');\r\n   }\r\n\r\n   @observable\r\n   roadTypes: IColumnFilter;\r\n\r\n   @action\r\n   updateRoadType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.roadTypes, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhere() {\r\n      const res = !this.roadTypes.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // when\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   startYear: number = 2015;\r\n\r\n   @action\r\n   setStartYear = (year: string) => {\r\n      this.startYear = parseInt(year);\r\n   }\r\n\r\n   @observable\r\n   endYear: number = 2019;\r\n\r\n   @action\r\n   setEndYear = (year: string) => {\r\n      this.endYear = parseInt(year);\r\n   }\r\n\r\n   @observable\r\n   dayNight: IColumnFilter;\r\n\r\n   @action\r\n   updateDayNight = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.dayNight, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhen() {\r\n      const res = !this.dayNight.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // who\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   genderTypes: IColumnFilter\r\n\r\n   @action\r\n   updateGenderType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.genderTypes, aType, val);\r\n   }\r\n\r\n   @observable\r\n   ageTypes: IColumnFilter;\r\n\r\n   @action\r\n   updateAgeType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.ageTypes, aType, val);\r\n   }\r\n\r\n   @observable\r\n   populationTypes: IColumnFilter;\r\n\r\n   @action\r\n   updatePopulationType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.populationTypes, aType, val);\r\n   }\r\n\r\n   /**\r\n    * injuerd type - for example pedestrian bycicle, car driver etc,\r\n    */\r\n   @observable\r\n   injTypes: IColumnFilter;\r\n\r\n   @action\r\n   updateInjuerdType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.injTypes, aType, val);\r\n   }\r\n\r\n   @computed get isValidWho() {\r\n      const res = !this.injTypes.isAllValsFalse && !this.genderTypes.isAllValsFalse\r\n         && !this.ageTypes.isAllValsFalse && !this.populationTypes.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // What\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n   @observable\r\n   accidentType: IColumnFilter;\r\n\r\n   @action\r\n   updateAccidentType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.accidentType, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhat() {\r\n      const res = !this.accidentType.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // What Vehicle\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   vehicleType: IColumnFilter;\r\n\r\n   @action\r\n   updateVehicleType = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.vehicleType, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhatVehicle() {\r\n      const res = !this.vehicleType.isAllValsFalse;\r\n      return res;\r\n   }\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // What Road\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n   @observable\r\n   speedLimit: IColumnFilter;\r\n\r\n   updateSpeedLimit = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.speedLimit, aType, val);\r\n   }\r\n\r\n   @observable\r\n   roadWidth: IColumnFilter;\r\n\r\n   @action\r\n   updateRoadWidth = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.roadWidth, aType, val);\r\n   }\r\n\r\n   @observable\r\n   separator: IColumnFilter;\r\n\r\n   @action\r\n   updateSeparator = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.separator, aType, val);\r\n   }\r\n\r\n   @observable\r\n   oneLane: IColumnFilter;\r\n\r\n   @action\r\n   updateOneLane = (aType: number, val: boolean) => {\r\n      this.updateFilters(this.oneLane, aType, val);\r\n   }\r\n\r\n   @computed get isValidWhatRoad() {\r\n      const res = !this.speedLimit.isAllValsFalse && !this.roadWidth.isAllValsFalse\r\n         && !this.separator.isAllValsFalse && !this.oneLane.isAllValsFalse;\r\n      return res;\r\n   }\r\n\r\n   // ////////////////////////////////////////////////////////////////////////////////////////////\r\n   // data\r\n   // ////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   dataAllInjuries: Casualty[] = [];\r\n\r\n   @action\r\n   updateAllInjuries = (data: Casualty[]) => {\r\n      // looger.log(\"updateAllInjuries \",data.length)\r\n      this.setMarkersLoadStep(2);\r\n      this.dataAllInjuries = data;\r\n      this.rootStore.mapStore.setBounds(data, this.cities);\r\n      if (this.rootStore.mapStore.bboxType === BBoxType.LOCAL_BBOX) {\r\n         this.rootStore.mapStore.getMarkersInLocalBBox(0.1);\r\n      }\r\n   }\r\n\r\n   @observable\r\n   dataMarkersLean: Casualty[] = []\r\n\r\n   @action\r\n   updateDataMarkersLean = (data: Casualty[]) => {\r\n      // logger.log(\"updateDataMarkersLean \",data.length)\r\n      this.setMarkersLoadStep(1);\r\n      this.dataMarkersLean = data;\r\n   }\r\n\r\n   // casualties groupd by yeras, filterd only by injurySeverity\r\n   @observable\r\n   dataByYears: any[] = []\r\n\r\n   // casualties groupd by yeras, filterd on main filter\r\n   @observable\r\n   dataFilterdByYears: any[] = []\r\n\r\n   // casualties groupd by some group, filterd on main filter\r\n   @observable\r\n   dataFilterd: any[] = []\r\n\r\n   // casualties groupd by 2 groups, filterd on main filter\r\n   @observable\r\n   dataGroupby2: any[] = []\r\n\r\n   @observable\r\n   isLoading: boolean = false;\r\n\r\n   @computed get isValidAllFilters() {\r\n      const res = this.isValidSeverity && this.isValidWhen && this.isValidWho\r\n         && this.isValidWhere && this.isValidWhat && this.isValidWhatVehicle && this.isValidWhatRoad;\r\n      return res;\r\n   }\r\n\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   // group by\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   groupBy: GroupBy;\r\n\r\n   @action\r\n   updateGroupby = (key: string) => {\r\n      this.groupBy = this.groupByDict[key];\r\n      if (this.groupBy.text === 'CityByPop') this.submitfilterdGroupByPop();\r\n      else this.submitfilterdGroup(this.groupBy);\r\n      this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n   }\r\n\r\n   /**\r\n    * Dictionary with key-value list of the group-by  \r\n    */\r\n   @observable\r\n   groupByDict: any = {}\r\n\r\n   @action\r\n   submitGroupByYears = () => {\r\n      const filtermatch = this.getfilterBySeverityAndCity();\r\n      const filter = FiterUtils.getFilterGroupBy(filtermatch, 'accident_year');\r\n      fetchAggregate(filter)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== undefined) {\r\n               const dataPadded = this.padDataYearsWith0(data);\r\n               this.dataByYears = dataPadded;\r\n            }\r\n         });\r\n   }\r\n\r\n   /**\r\n    * convert parital array of years and count to full array\r\n    * if year is missing, add year and count = 0\r\n    * @param data array of years and counts, some of the years might be missing\r\n    */\r\n   padDataYearsWith0 = (data: any) => {\r\n      const yearsList = [];\r\n      for (let i = this.startYear; i <= this.endYear; i += 1) {\r\n         yearsList.push(i);\r\n      }\r\n      const data2 = yearsList.map((year) => {\r\n         const objDAta = data.find((x: any) => x._id === year);\r\n         const val = (objDAta) ? objDAta.count : 0;\r\n         return { _id: year, count: val };\r\n      });\r\n      return data2;\r\n   }\r\n\r\n   @action\r\n   submitfilterdGroupByYears = () => {\r\n      const range = JSON.parse(this.cityPopSizeRange);\r\n      const filtermatch = this.getFilter(null);\r\n      const filter = FiterUtils.getFilterGroupBy(filtermatch, 'accident_year', range.min, range.max);\r\n      fetchAggregate(filter)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== undefined) {\r\n               const dataPadded = this.padDataYearsWith0(data);\r\n               this.dataFilterdByYears = dataPadded;\r\n            }\r\n         });\r\n   }\r\n\r\n   @action\r\n   submitfilterdGroup = (aGroupBy: GroupBy) => {\r\n      const range = JSON.parse(this.cityPopSizeRange);\r\n      const filtermatch = this.getFilter(null);\r\n      const filter = FiterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, '', aGroupBy.limit);\r\n      // logger.log(filter);\r\n      fetchAggregate(filter)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== undefined) this.dataFilterd = data;\r\n         });\r\n   }\r\n\r\n   @action\r\n   submitfilterdGroupByPop = () => {\r\n      const range = JSON.parse(this.cityPopSizeRange);\r\n      const filtermatch = this.getFilter(null);\r\n      const filter = FiterUtils.getFilterGroupByPop(filtermatch, range.min, range.max, -1, 15);\r\n      // logger.log(filter);\r\n      fetchAggregate(filter)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== undefined) {\r\n               this.dataFilterd = data;\r\n            }\r\n         });\r\n   }\r\n\r\n   @action\r\n   submitfilterdGroup2 = (aGroupBy: GroupBy, groupName2: string) => {\r\n      const range = JSON.parse(this.cityPopSizeRange);\r\n      const filtermatch = this.getFilter(null);\r\n      const filter = FiterUtils.getFilterGroupBy(filtermatch, aGroupBy.value, range.min, range.max, groupName2, aGroupBy.limit);\r\n      // logger.log(filter)\r\n      fetchAggregate(filter)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== undefined && data.length > 0) {\r\n               try {\r\n                  const fixData = this.groupBy2.fixStrcutTable(data);\r\n                  this.dataGroupby2 = fixData;\r\n               } catch (error) {\r\n                  logger.log(error);\r\n                  this.dataGroupby2 = [];\r\n               }\r\n            } else {\r\n               this.dataGroupby2 = [];\r\n            }\r\n         });\r\n   }\r\n\r\n   @observable\r\n   groupBy2: GroupBy2;\r\n\r\n   @action\r\n   updateGroupBy2 = (key: string) => {\r\n      this.groupBy2 = this.group2Dict[key];\r\n      this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n   }\r\n\r\n   @observable\r\n   group2Dict: any = {}\r\n\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   // filters actions\r\n   // //////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   isUse2StepsMarkers: boolean = false;\r\n\r\n   @observable\r\n   markersLoadStep: number = 1;\r\n\r\n   @action\r\n   setMarkersLoadStep = (step: number) => {\r\n      if (this.isUse2StepsMarkers) this.markersLoadStep = step;\r\n   }\r\n\r\n   @action\r\n   submitFilter = () => {\r\n      // this.setMarkersLoadStep(0);\r\n      if (this.useLocalDb === 2) {\r\n         this.submitMainDataFilterLocalDb();\r\n      } else {\r\n         if (this.rootStore.mapStore.bboxType === BBoxType.SERVER_BBOX) {\r\n            this.rootStore.mapStore.submintGetMarkersBBox();\r\n         }\r\n         if (this.isUse2StepsMarkers) this.submintGetMarkerFirstStep();\r\n         this.submintMainDataFilter();\r\n      }\r\n      this.submitCityNameAndLocation();\r\n      this.submitGroupByYears();\r\n      this.submitfilterdGroupByYears();\r\n      if (this.groupBy.text === 'CityByPop') this.submitfilterdGroupByPop();\r\n      else this.submitfilterdGroup(this.groupBy);\r\n      this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n      this.setCasualtiesNames(this.injurySeverity);\r\n      const lang = this.rootStore.uiStore.language;\r\n      if (this.rootStore.uiStore.currentPage === 'city') this.rootStore.imageStore.getImagesByPlace(this.cityResult, lang);\r\n   }\r\n\r\n   submintMainDataFilter = () => {\r\n      this.isLoading = true;\r\n      const range = JSON.parse(this.cityPopSizeRange);\r\n      const filterMatch = this.getFilter(null);\r\n      // logger.log(filterMatch);\r\n      const filter = FiterUtils.getAggFilter(filterMatch, range.min, range.max);\r\n      this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n      fetchAggregatFilter(filter, 'main')\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== null && data !== undefined) {\r\n               this.updateAllInjuries(data);\r\n               // write Data to local db\r\n               if (this.useLocalDb === 1) insertToDexie(data);\r\n            }\r\n            this.isLoading = false;\r\n         });\r\n   }\r\n\r\n   submintGetMarkerFirstStep = () => {\r\n      const range = JSON.parse(this.cityPopSizeRange);\r\n      const filterMatch = this.getFilter(null);\r\n      const filter = FiterUtils.getAggFilter(filterMatch, range.min, range.max);\r\n      fetchAggregatFilter(filter, 'latlon')\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== null && data !== undefined) {\r\n               this.updateDataMarkersLean(data);\r\n            }\r\n         });\r\n   }\r\n\r\n   submitCityNameAndLocation = () => {\r\n      if (this.cities.length >= 1) {\r\n         const city = this.cities[0];\r\n         const srvCity = new CityService();\r\n         srvCity.getCityByNameHe(city, this.rootStore.mapStore.updateMapCenterByCity);\r\n         const index = 0;\r\n         this.cityResult = this.cities[index];\r\n      } else this.cityResult = '';\r\n   }\r\n\r\n   getFilter = (bounds: any, useBounds: boolean = false) => {\r\n      let filter = '{\"$and\" : [';\r\n      filter += `{\"accident_year\":  { \"$gte\" : ${this.startYear},\"$lte\": ${this.endYear}}}`;\r\n      filter += FiterUtils.getMultiplefilter(this.injurySeverity);\r\n      filter += this.getfilterCity();\r\n      if (useBounds && bounds != null) filter += this.getfilterBounds(bounds);\r\n      filter += FiterUtils.getMultiplefilter(this.dayNight);\r\n      filter += this.getFilterStreets();\r\n      filter += this.getFilterFromNumArray(this.roads, 'road1');\r\n      filter += this.getFilterFromArray(this.roadSegment, 'road_segment_name');\r\n      filter += FiterUtils.getMultiplefilter(this.injTypes);\r\n      filter += FiterUtils.getMultiplefilter(this.genderTypes);\r\n      filter += FiterUtils.getMultiplefilter(this.ageTypes);\r\n      filter += FiterUtils.getMultiplefilter(this.populationTypes);\r\n      filter += FiterUtils.getMultiplefilter(this.accidentType);\r\n      filter += FiterUtils.getMultiplefilter(this.vehicleType);\r\n      filter += FiterUtils.getMultiplefilter(this.roadTypes);\r\n      filter += FiterUtils.getMultiplefilter(this.speedLimit);\r\n      filter += FiterUtils.getMultiplefilter(this.roadWidth);\r\n      filter += FiterUtils.getMultiplefilter(this.separator);\r\n      filter += FiterUtils.getMultiplefilter(this.oneLane);\r\n      filter += ']}';\r\n      return filter;\r\n   }\r\n\r\n   @action\r\n   updateFilters = (colFilter: IColumnFilter, aType: number, val: boolean) => {\r\n      colFilter.updateFilter(aType, val);\r\n      // if (colFilter.allTypesOption === -1) colFilter.arrTypes[aType].checked = val;\r\n      // else if (aType === colFilter.allTypesOption) {\r\n      //   colFilter.arrTypes\r\n      //     .forEach((x, index) => x.checked = (index === colFilter.allTypesOption) ? val : !val);\r\n      // } else {\r\n      //   colFilter.arrTypes[colFilter.allTypesOption].checked = false;\r\n      //   colFilter.arrTypes[aType].checked = val;\r\n      // }\r\n   }\r\n\r\n   getfilterBounds = (mapBounds: L.LatLngBounds) => {\r\n      let filter: string = '';\r\n      filter += `,{\"latitude\":  { \"$gte\" : \"${mapBounds.getSouth()}\",\"$lte\": \"${mapBounds.getNorth()}\"}}`;\r\n      filter += `,{\"longitude\":  { \"$gte\" : \"${mapBounds.getWest()}\",\"$lte\": \"${mapBounds.getEast()}\"}}`;\r\n      return filter;\r\n   }\r\n\r\n   getfilterBySeverityAndCity = () => {\r\n      let filter = '{\"$and\" : [';\r\n      filter += '{\"accident_year\":{\"$gte\":2015}}';\r\n      filter += FiterUtils.getMultiplefilter(this.injurySeverity);\r\n      filter += this.getfilterCity();\r\n      filter += ']}';\r\n      return filter;\r\n   }\r\n\r\n   getfilterCity = () => {\r\n      let filter: string = '';\r\n      if (this.cities.length > 0) {\r\n         filter += ',{\"$or\": [';\r\n         filter += this.cities.map((x: string) => `{\"accident_yishuv_name\" : \"${x}\"}`).join(',');\r\n         filter += ']}';\r\n      }\r\n      return filter;\r\n   }\r\n\r\n   getFilterStreets = () => {\r\n      let filter: string = '';\r\n      if (this.streets.length > 0 && this.streets[0] !== '') {\r\n         filter += ',{\"$or\": [';\r\n         filter += this.streets.map((x: string) => `{\"street1_hebrew\" : \"${x.trim()}\"}`).join(',');\r\n         filter += ',';\r\n         filter += this.streets.map((x: string) => `{\"street2_hebrew\" : \"${x.trim()}\"}`).join(',');\r\n         filter += ']}';\r\n      }\r\n      return filter;\r\n   }\r\n\r\n   getFilterFromArray = (arr: string[], filterName: string) => {\r\n      let filter: string = '';\r\n      if (arr.length > 0 && arr[0] !== '') {\r\n         filter += ',{\"$or\": [';\r\n         filter += arr.map((x: string) => `{\"${filterName}\" : \"${x.trim()}\"}`).join(',');\r\n         filter += ']}';\r\n      }\r\n      return filter;\r\n   }\r\n   getFilterFromNumArray = (arr: string[], filterName: string) => {\r\n      let filter: string = '';\r\n      if (arr.length > 0) {\r\n         filter += ',{\"$or\": [';\r\n         filter += arr.map((x: string) => `{\"${filterName}\" : ${parseInt(x, 10)}}`).join(',');\r\n         filter += ']}';\r\n      }\r\n      return filter;\r\n   }\r\n\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   // local db filters - idb using Dexie.js\r\n   // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n   @observable\r\n   useLocalDb = 0;\r\n\r\n   submitMainDataFilterLocalDb = () => {\r\n      this.isLoading = true;\r\n      const arrFilters = this.getFilterIDB();\r\n      this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n      // logger.log(arrFilters);\r\n      getFromDexie(arrFilters)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== null && data !== undefined) {\r\n               this.updateAllInjuries(data);\r\n            }\r\n            this.isLoading = false;\r\n         });\r\n   }\r\n\r\n   submintGetMarkersBBoxIdb = (mapBounds: L.LatLngBounds) => {\r\n      const arrFilters = this.getFilterBboxIDB(mapBounds);\r\n      getFromDexie(arrFilters)\r\n         .then((data: any[] | undefined) => {\r\n            if (data !== null && data !== undefined) {\r\n               this.rootStore.mapStore.updateDataMarkersInBounds(data);\r\n            }\r\n         });\r\n   }\r\n\r\n   getFilterIDB = () => {\r\n      const arrFilters: any[] = [];\r\n      const years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() };\r\n      arrFilters.push(years);\r\n      this.getfilterCityIDB(arrFilters);\r\n      this.getFilterStreetsIDB(arrFilters);\r\n      this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n      this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n      this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n      this.getMultiplefilterIDB(arrFilters, this.separator);\r\n      this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n      return arrFilters;\r\n   }\r\n\r\n   getFilterBboxIDB = (bounds: L.LatLngBounds) => {\r\n      const arrFilters: any[] = [];\r\n      const bbox = { filterName: 'bbox', p1: bounds.getSouthWest, p2: bounds.getNorthEast };\r\n      arrFilters.push(bbox);\r\n      const years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() };\r\n      arrFilters.push(years);\r\n      this.getfilterCityIDB(arrFilters);\r\n      this.getFilterStreetsIDB(arrFilters);\r\n      this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n      this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n      this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n      this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n      this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n      this.getMultiplefilterIDB(arrFilters, this.separator);\r\n      this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n      return arrFilters;\r\n   }\r\n\r\n   getMultiplefilterIDB = (arrFilters: any[], colFilter: IColumnFilter) => {\r\n      if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) {\r\n         return;\r\n      }\r\n      let allChecked: boolean = true;\r\n      let arrfilter: string[] = [];\r\n      const iterator = colFilter.arrTypes.values();\r\n      for (const filterCheck of iterator) {\r\n         if (filterCheck.checked) {\r\n            arrfilter = [...arrfilter, ...filterCheck.filters];\r\n         } else {\r\n            allChecked = false;\r\n         }\r\n      }\r\n      if (!allChecked) {\r\n         const filterVals = arrfilter.map((x: string) => {\r\n            if (x === 'null') return null;\r\n            return x;\r\n         });\r\n         const filter = { filterName: colFilter.dbColName, values: filterVals };\r\n         arrFilters.push(filter);\r\n      }\r\n   }\r\n\r\n   getfilterCityIDB = (arrFilters: any[]) => {\r\n      if (this.cities.length > 0) {\r\n         const filter = { filterName: 'accident_yishuv_name', values: this.cities };\r\n         arrFilters.push(filter);\r\n      }\r\n   }\r\n\r\n   getFilterStreetsIDB = (arrFilters: any[]) => {\r\n      if (this.streets.length > 0 && this.streets[0] !== '') {\r\n         const filter1 = { filterName: 'street1_hebrew', values: this.streets.map((x: string) => x.trim()) };\r\n         arrFilters.push(filter1);\r\n         // const filter2 = { filterName: \"street2_hebrew\", values: this.streets.map((x: string) => {x.trim()}) }\r\n         // arrFilters.push(filter2)\r\n      }\r\n   }\r\n\r\n   getFilterFromArrayIDb = (arrFilters: any[], filterName: string, arr: string[]) => {\r\n      if (arr.length > 0 && arr[0] !== '') {\r\n         const filter = { filterName, values: arr.map((x: string) => x.trim()) };\r\n         arrFilters.push(filter);\r\n      }\r\n   }\r\n}\r\n\r\n// autorun(() =>{\r\n//     logger.log(store.todos[0])\r\n//     logger.log(store.filter)\r\n// })\r\n\r\n// export default store\r\n","import { observable, action, reaction } from 'mobx';\r\nimport i18n from '../i18n';\r\nimport RootStore from './RootStore';\r\nimport logger from '../services/logger';\r\n// import autorun  from \"mobx\"\r\n\r\nexport default class UiStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n    this.initLang();\r\n    this.appInitialized = false;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  // ////////////////////////////////////////////\r\n  @observable\r\n  language: string = 'he'\r\n\r\n  @action\r\n  updateLanguage = (lang: string) => {\r\n    this.language = lang;\r\n    localStorage.setItem('lang', JSON.stringify(lang));\r\n    const dir = (lang === 'en') ? 'ltr' : 'rtl';\r\n    this.setDirection(dir);\r\n  }\r\n\r\n  @observable \r\n  direction :string = 'rtl';\r\n  \r\n  @action \r\n  setDirection = (val:string) => {\r\n    this.direction = val;\r\n  }\r\n\r\n  reactionChangeLang = reaction(\r\n    () => this.language,\r\n    (locale) => {\r\n      i18n.changeLanguage(locale);\r\n    },\r\n  )\r\n\r\n  initLang = () => {\r\n    try {\r\n      const slang = localStorage.getItem('lang');\r\n      if (slang !== null) {\r\n        const lang = JSON.parse(slang);\r\n        this.updateLanguage(lang);\r\n      }\r\n    } catch (error) {\r\n      logger.log(error);\r\n    }\r\n  }\r\n\r\n  @observable\r\n  showFilterModal: boolean = false; \r\n\r\n  @action\r\n  setShowFilterModal= (val: boolean) =>{\r\n    this.showFilterModal = val;\r\n  }\r\n\r\n  /**\r\n   * current page\r\n   */\r\n  @observable\r\n  currentPage: string = 'home';\r\n\r\n  @action\r\n  setCurrentPage = (pageType: string) => {\r\n    this.currentPage = pageType;\r\n  }\r\n\r\n  @observable\r\n  currentTab: string = 'charts';\r\n\r\n  @action\r\n  setCurrentTab = (tabName: string) => {\r\n    this.currentTab = tabName;\r\n  }\r\n\r\n  @observable\r\n  searchParams: string = '';\r\n\r\n  @action\r\n  setSearchParams = () => {\r\n    let res = '';\r\n    if (this.currentPage === 'home') {\r\n      res += `?tab=${this.currentTab}`;\r\n    } else {\r\n      res += `?name=${this.rootStore.filterStore.cityResult}`;\r\n      res += `&tab=${this.currentTab}`;\r\n    }\r\n    // if (!this.rootStore.filterStore.injTypes.isAllValsFalse()) {\r\n    // }\r\n    this.searchParams = res;\r\n  }\r\n\r\n  @observable\r\n  chartType: string = 'BarChart';\r\n\r\n  @observable\r\n  chartTypeList: string[] = ['BarChart', 'PieChart', 'HorizontalBar'];\r\n\r\n  @action\r\n  updateChartType = (val: string) => {\r\n    this.chartType = val;\r\n  }\r\n\r\n  @observable\r\n  showPercentageChart: boolean = false\r\n\r\n  @action\r\n  updateShowPercentageChart = (val: boolean) => {\r\n    this.showPercentageChart = val;\r\n  }\r\n}\r\n","import IimageEntity from '../stores/ImageEntity';\r\n\r\nexport const fetchListImgByTag = async (tag: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = (lang === '') ? `/api/v1/img/tags/${tag}` : `/api/v1/img/tags/${lang}/${tag}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\nexport const fetchListImgByPlace = async (place: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/place/${lang}/${place}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const uploadImg = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  if (image.file === undefined) return [];\r\n  const formData = new FormData();\r\n  formData.append('titlehe', image.titlehe);\r\n  formData.append('texthe', image.texthe);\r\n  formData.append('image', image.file);\r\n  formData.append('tags', image.tags);\r\n  formData.append('place', image.place);\r\n  if (image.index !== undefined) formData.append('index', image.index?.toString());\r\n  const url = '/api/v1/img/';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    body: formData,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const updateImgProps = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/img/props';\r\n  const response = await fetch(url, {\r\n    method: 'PUT',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: JSON.stringify(image),\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchImg = async (fileName: string):\r\n  Promise<any| undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/${fileName}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response; // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport default fetchImg;\r\n","import { observable, action } from 'mobx';\r\nimport RootStore from './RootStore';\r\nimport {\r\n  fetchListImgByTag, fetchListImgByPlace, updateImgProps, uploadImg,\r\n} from '../services/ImageService';\r\nimport IimageEntity from './ImageEntity';\r\n\r\nexport default class ImageStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  @observable\r\n  imageList: IimageEntity[] = [];\r\n\r\n  @action\r\n  setImageList = (data: IimageEntity[]) => {\r\n    this.imageList = data;\r\n    if (this.imageList.length > 0) this.setCurrImage(this.imageList[0]);\r\n  }\r\n\r\n  @observable\r\n  isLoading: boolean = false;\r\n\r\n  @observable\r\n  currTag: string = 'כללי';\r\n\r\n  @action\r\n  setCurrTag = (tag: string) => {\r\n    this.currTag = tag;\r\n    const lang = this.rootStore.uiStore.language;\r\n    this.getImagesByTag(tag, lang);\r\n  }\r\n  tagsArr = [\r\n    { val: \"כללי\", text: 'general' },\r\n    { val: \"הולכי רגל\", text: 'pedestrian' },\r\n    { val: \"רוכבי אופניים\", text: 'cyclist' },\r\n    { val: \"רוכבי אופנוע\", text: 'motorcycle' },\r\n    { val: \"מכוניות\", text: 'car' },\r\n    { val: \"אוטובוסים\", text: 'bus' },\r\n    { val: \"ילדים\", text: 'kids' },\r\n  ];\r\n\r\n  @observable\r\n  currImage: IimageEntity| null = null;\r\n\r\n  @action\r\n  setCurrImage = (image: IimageEntity) => {\r\n    this.currImage = image;\r\n  }\r\n\r\n  @observable\r\n  hideDescription = false;\r\n\r\n  @action\r\n  toggleHideDescription = () => {\r\n    this.hideDescription = !this.hideDescription;\r\n    if (this.hideDescription) {\r\n      document.documentElement.style.setProperty('--image-gallery-description-visable', 'none');\r\n    } else document.documentElement.style.setProperty('--image-gallery-description-visable', 'inherit');\r\n  }\r\n\r\n  setCurrImageVal= <T extends keyof IimageEntity, K extends IimageEntity[T]> (valName: T, val: K) => {\r\n    if (this.currImage !== null) this.currImage[valName] = val;\r\n  }\r\n\r\n  submitImageFile = () => {\r\n    if (this.currImage !== null) {\r\n      if (this.currImage._id === 0 && this.currImage.file !== undefined) {\r\n        uploadImg(this.currImage);\r\n      } else updateImgProps(this.currImage);\r\n    }\r\n  };\r\n\r\n  getImages = (type :string) => {\r\n    const lang = this.rootStore.uiStore.language;\r\n    if (type === 'city') {\r\n      const city = this.rootStore.filterStore.cityResult;\r\n      this.getImagesByPlace(city, lang);\r\n    } else {\r\n      this.getImagesByTag(this.currTag, lang);\r\n    }\r\n  }\r\n\r\n  getImagesByTag = (tag :string, lang: string) => {\r\n    this.isLoading = true;\r\n    fetchListImgByTag(tag, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  getImagesByPlace = (place :string, lang: string) => {\r\n    // this.isLoading = true;\r\n    fetchListImgByPlace(place, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        // this.isLoading = false;\r\n      });\r\n  }\r\n}\r\n","// https://mobx-react.js.org/recipes-context\r\nimport React from 'react'\r\nimport RootStore from './RootStore';\r\n\r\nexport const store = new RootStore();\r\nexport const StoreContext = React.createContext(store);\r\nexport const useStore = (): RootStore => {\r\n  const store = React.useContext(StoreContext);\r\n  if (!store) {\r\n    // this is especially useful in TypeScript so you don't need to be checking for null all the time\r\n    throw new Error('You have forgot to use StoreProvider, shame on you.')\r\n  }\r\n  return store\r\n};\r\n\r\n/* // see: https://facebook.github.io/create-react-app/docs/adding-custom-environment-variables\r\nif(process.env.NODE_ENV !== 'production') {\r\n  // @ts-ignore\r\n  window['store'] = store;\r\n} */","import FilterStore from './FilterStore';\r\nimport UiStore from './UiStore';\r\nimport MapStore from './MapStore';\r\nimport ImageStore from './ImageStore'\r\n\r\nexport default class RootStore {\r\n    appInitialized = false;\r\n\r\n    constructor() {\r\n      this.uiStore = new UiStore(this);\r\n      this.mapStore = new MapStore(this);\r\n      this.filterStore = new FilterStore(this);\r\n      this.imageStore = new ImageStore(this);\r\n    }\r\n\r\n    uiStore: UiStore;\r\n\r\n    mapStore: MapStore;\r\n\r\n    filterStore: FilterStore;\r\n\r\n    imageStore: ImageStore;\r\n}\r\n","import i18n from 'i18next';\r\n//import LanguageDetector from 'i18next-browser-languagedetector';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport translationEng from \"./lng/en/translation.json\";\r\nimport translationHeb from \"./lng/he/translation.json\";\r\n\r\n\r\ni18n\r\n  // detect user language\r\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n  //.use(LanguageDetector)\r\n  // pass the i18n instance to react-i18next.\r\n  .use(initReactI18next)\r\n  .init({\r\n    fallbackLng: 'he',\r\n    lng : 'he',\r\n    debug: true,\r\n    // hardcoding translations for the sake of simplicity,\r\n    // id more complex - get it from backend.\r\n    // i18next has a small plugin that makes it easy.\r\n    // learn more: https://github.com/i18next/i18next-xhr-backend\r\n    resources: {\r\n      'en':{\r\n        'translation':translationEng  \r\n      },\r\n        'he':{\r\n        'translation':translationHeb \r\n      }\r\n    },\r\n    interpolation: {\r\n      escapeValue: false, // not needed for React as it escapes by default\r\n    },\r\n});\r\nexport default i18n;","import React, { PropsWithChildren } from 'react'\r\n\r\ninterface SmallCard2Props extends PropsWithChildren<any> {\r\n   header?: string;\r\n   sizeWidth?: string;\r\n   sizeHeight?: string;\r\n}\r\n\r\nconst SmallCard2: React.FC<SmallCard2Props> = ({ children, header, sizeWidth, sizeHeight }) => {\r\n   const cardHeader = header ? <> <h6>{header}</h6> <hr /> </> : null;\r\n   return (\r\n      <div\r\n         style={{\r\n            width: sizeWidth ? sizeWidth : '',\r\n            height: sizeHeight ? sizeHeight : ''\r\n         }}\r\n         className=\" p-3 bg-white rounded shadow\">\r\n         {cardHeader}\r\n         {children}\r\n      </div>\r\n   )\r\n}\r\nexport default SmallCard2","\r\nimport React, { ChangeEvent, memo } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\ninterface IProps {\r\n  label: string,\r\n  group: string,\r\n  id: number,\r\n  checked: boolean,\r\n  onChange: (e: ChangeEvent<HTMLInputElement>) => any\r\n}\r\nconst Checkbox: React.FC<IProps> = ({\r\n  group, label, id, checked, onChange,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Check inline label={t(label)} type=\"checkbox\" id={`cbox${group}${id}`} checked={checked} onChange={onChange} />\r\n  );\r\n};\r\nexport default memo(Checkbox);\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport { observer } from 'mobx-react';\r\n\r\ninterface IProps {\r\n  title: string;\r\n  showModal: boolean;\r\n  setShow: (show: boolean) => void;\r\n  children: any;\r\n  size?: \"sm\" | \"lg\" | \"xl\" | undefined;\r\n  action?: (val?: any) => void;\r\n}\r\n\r\n\r\nconst ConfigModal: React.FC<IProps> = observer(({\r\n  title, showModal, setShow, children, size, action\r\n}: IProps) => {\r\n\r\n  console.log('MODAL')\r\n  const { t } = useTranslation();\r\n  const handleClose = () => setShow(false);\r\n  const { filterStore } = useStore();\r\n\r\n  const submitChanges = action ?\r\n    <Button\r\n      variant=\"primary\"\r\n      onClick={action}\r\n      disabled={filterStore.isLoading || !filterStore.isValidAllFilters}\r\n    >\r\n      {filterStore.isLoading ? t('Loading') : t('Submit')}\r\n    </Button>\r\n    : null\r\n\r\n  return (\r\n    <Modal\r\n      size={size}\r\n      show={showModal}\r\n      onHide={handleClose}\r\n    // style={{ top: '45px' }}\r\n    >\r\n\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>{t(title)}</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body style={{ maxHeight: 'calc(100vh - 210px)', overflowY: 'auto' }}>\r\n        {children}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        {submitChanges}\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          {t('Close')}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n});\r\nexport default React.memo(ConfigModal);\r\n","export default class AccidentService {\r\n  // get request using jsonp\r\n\r\n}\r\n\r\nexport const fetchFilter = async (filter: string, type: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/accident/${type}`;\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchAggregatFilter = async (filter: string, type: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = (type === 'main') ? '/api/v1/accident/aggmain' : '/api/v1/accident/agglatlon';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchAggregate = async (filter: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/accident/agg';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n","// import { useLocation } from 'react-router-dom';\r\nimport citisNamesHeb from '../assets/cities_names_heb.json';\r\n\r\n// A custom hook that builds on useLocation to parse\r\n// the query string for you.\r\nexport function useQuery(location: any) {\r\n  // const location = useLocation();\r\n  return new URLSearchParams(location.search);\r\n}\r\n\r\n// get tab name by url query parmas\r\nexport function useTabFromQuery(query: URLSearchParams, defVal: string) {\r\n  let res = defVal;\r\n  const name = query.get('tab');\r\n  if (name !== null) {\r\n    res = name;\r\n  }\r\n  return res;\r\n}\r\n\r\n// get injuerd type by query parmas\r\nexport function useInjTypeByQuery(query: URLSearchParams) {\r\n  let res = null;\r\n  const qText = query.get('inj');\r\n  if (qText) {\r\n    res = parseInt(qText);\r\n  }\r\n  return res;\r\n}\r\n\r\n// get city name by url query parmas\r\nexport function useCityNameFromQuery(query: URLSearchParams, defaultName: string) {\r\n  let res = [defaultName];\r\n  const name = query.get('name');\r\n  let found = false;\r\n  if (name !== null) found = citisNamesHeb.includes(name);\r\n  if (found) {\r\n    res = [citisNamesHeb.find((element) => element === name!)!];\r\n  }\r\n  return res;\r\n}\r\n","import React from 'react';\r\nimport logger from '../../services/logger';\r\n\r\ninterface IProps {\r\n}\r\ninterface IState {\r\n  hasError: boolean;\r\n}\r\nclass ErrorBoundary extends React.Component<IProps, IState> {\r\n  constructor(props:IProps) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error:any) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error:any, errorInfo:any) {\r\n    // You can also log the error to an error reporting service\r\n    // logErrorToMyService(error: TypeError, errorInfo);\r\n    logger.error(error);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\nexport default ErrorBoundary;\r\n","import React from 'react'\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport '../../styles/loader.css'\r\nconst Loader: React.FC<any> = () => <div className=\"loader-con\"> <Spinner animation=\"border\" variant=\"info\" /></div>\r\n\r\nexport default Loader\r\n","import React, { FunctionComponent, lazy, Suspense, } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport ErrorBoundary from '../atoms/ErrorBoundary';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport Loader from '../atoms/Loader';\r\nimport SmallCard2 from '../atoms/SmallCard2';\r\n\r\ninterface IProps {\r\n  type: string;\r\n}\r\n\r\nconst GroupByGraphsPanel = lazy(() => import('../organisms/GroupByGraphsPanel'));\r\nconst GroupByTablesPanel = lazy(() => import('../organisms/GroupByTablesPanel'));\r\nconst MapAccidents = lazy(() => import('../organisms/MapAccidents'));\r\nconst AccidentsTable = lazy(() => import('../organisms/AccidentsTable'));\r\nconst MyImageGallery = lazy(() => import('../organisms/MyImageGallery'));\r\n\r\nexport const TabsTemplate: FunctionComponent<IProps> = observer(({ type }) => {\r\n  const style = {\r\n    marginTop: '1rem',\r\n  };\r\n  const { t } = useTranslation();\r\n  const { mapStore, uiStore } = useStore();\r\n  // const [activeKey] = useState(uiStore.);\r\n  // defaultActiveKey={uiStore.currentTab}\r\n  return (\r\n    <Tabs\r\n      mountOnEnter\r\n      activeKey={uiStore.currentTab}\r\n      id=\"main-tabs\"\r\n      onSelect={(tabActiveKey: any) => {\r\n        if (tabActiveKey === 'map') {\r\n          // map is renderd only when tab is shown to prevent leaflet bug\r\n          mapStore.isReadyToRenderMap = true;\r\n        } else mapStore.isReadyToRenderMap = false;\r\n        uiStore.setCurrentTab(tabActiveKey);\r\n      }}\r\n    >\r\n      <Tab style={style} eventKey=\"charts\" title={t('Charts')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <GroupByGraphsPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"groups\" title={t('Groups')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <GroupByTablesPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"map\" title={t('Map')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <SmallCard2>\r\n              <MapAccidents />\r\n            </SmallCard2>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"table\" title={t('Table')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <div className=\"col-auto\"><AccidentsTable /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"image\" title={t('Images')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<Loader />}>\r\n            <div className=\"col-auto\"><MyImageGallery type={type} /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n    </Tabs>\r\n  );\r\n});\r\nexport default TabsTemplate;\r\n","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\n// @ts-ignore\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport citisNamesHeb from '../../assets/cities_names_heb.json';\r\n\r\ninterface IProps {\r\n  isMultiple?: boolean\r\n}\r\n\r\nconst CitySelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { filterStore } = useStore();\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Group controlId=\"exampleForm.ControlCity\">\r\n      <Form.Label className=\"filterLable\">\r\n        {t('City')}:\r\n      </Form.Label>\r\n      <Typeahead\r\n        id=\"typeaheadCity\"\r\n        // defaultSelected={[store.city]}\r\n        onChange={(selected: string[]) => {\r\n          filterStore.updateCities(selected, true);\r\n        }}\r\n        options={citisNamesHeb}\r\n        multiple={isMultiple}\r\n        selected={filterStore.cities}\r\n      />\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default CitySelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {}\r\nconst StreetSelector: React.FC<IProps> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { t } = useTranslation();\r\n  if (filterStore.cities.length > 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlStreet\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('Street')}\r\n:\r\n        </Form.Label>\r\n        <Form.Control \r\n          type=\"input\" \r\n          placeholder=\"\" \r\n          value={filterStore.streets.toString()} \r\n          onChange={(e: ChangeEvent<HTMLInputElement>) => { filterStore.updateStreets(e.target.value); }} \r\n          />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default StreetSelector;\r\n","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\n// @ts-ignore\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport roadNames from '../../assets/road_names.json';\r\n\r\ninterface IProps {\r\n  isMultiple?: boolean\r\n}\r\n\r\nconst RoadNameSelector: React.FC<IProps> = observer(({ isMultiple = true }) => {\r\n  const { filterStore } = useStore();\r\n  const {roads, setRoads} = filterStore;\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Group controlId=\"filterForm.ControlRoad\">\r\n      <Form.Label className=\"filterLable\">\r\n        {t('Road')}:\r\n      </Form.Label>\r\n      <Typeahead\r\n        id=\"typeaheadCity\"\r\n        // defaultSelected={[store.city]}\r\n        onChange={(selected: string[]) => {\r\n          setRoads(selected);\r\n        }}\r\n        inputProps={{\r\n          type: 'number',\r\n        }}\r\n        options={roadNames}\r\n        multiple={isMultiple}\r\n        selected={roads}\r\n      />\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default RoadNameSelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n  isMultiple?: boolean\r\n}\r\nconst RoadSegmentSelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { cities, roadSegment, updateRoadSegment } = filterStore;\r\n  if (cities.length === 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlRoadSegment\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('RoadSegment')}\r\n          :\r\n        </Form.Label>\r\n        <Form.Control\r\n          type=\"input\"\r\n          placeholder=\"\"\r\n          value={roadSegment.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { updateRoadSegment(e.target.value); }}\r\n        />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default RoadSegmentSelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Checkbox from '../atoms/Checkbox';\r\nimport { IColumnFilter } from '../../stores/ColumnFilter';\r\nimport { useMemos } from \"../../hooks/myUseMemo\";\r\n\r\ninterface IProps {\r\n  formName: string,\r\n  colFilter: IColumnFilter,\r\n  onChange: (aType: number, val: boolean) => void\r\n}\r\n\r\n/**\r\n * group of check boxs, that represnat single filter\r\n * each filter can get several boolean paramters - for exampe car and bycle\r\n * each of this paramters is repreansted as a number, and get a true/false value\r\n * in some cases there is a \"select all\" option.\r\n */\r\nconst GroupCheckbox: React.FC<IProps> = observer(({ formName, colFilter, onChange }) => {\r\n  const styleFeedback = {\r\n    marginTop: '.25rem',\r\n    fontSize: '80%',\r\n    color: '#dc3545',\r\n  };\r\n  const { t } = useTranslation();\r\n  const { isAllValsFalse, name, arrTypes } = colFilter;\r\n  const onGroupChange = (aType: number, checked: boolean) => {\r\n    // checkValid(checked)\r\n    onChange(aType, checked);\r\n  };\r\n  const feedback = (\r\n    <div style={styleFeedback}>\r\n      {' '}\r\n      {t('check_one_checkbox')}\r\n    </div>\r\n  );\r\n  const isvalid = (isAllValsFalse) ? feedback : null;\r\n  const list = arrTypes.map((fChecker, index) => {\r\n    return useMemos([fChecker.checked], <Checkbox\r\n      key={fChecker.label}\r\n      label={fChecker.label}\r\n      group={colFilter.name}\r\n      id={index}\r\n      checked={fChecker.checked}\r\n      onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n        onGroupChange(index, e.target.checked);\r\n      }}\r\n    />);\r\n  });\r\n  return (\r\n    <div className=\"injury-level-form\">\r\n      <Form.Group controlId={`${formName}.Control${name}`}>\r\n        <Form.Label className=\"filterLable\">\r\n          {t(name)}:\r\n      </Form.Label>\r\n        {list}\r\n        {isvalid}\r\n      </Form.Group>\r\n    </div>\r\n  );\r\n});\r\nexport default GroupCheckbox;\r\n","import React, { ChangeEvent, useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\n// import Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport { useAccordionToggle } from 'react-bootstrap/AccordionToggle';\r\nimport Card from 'react-bootstrap/Card';\r\n// @ts-ignore\r\nimport CitySelector from '../molecules/CitySelector';\r\nimport StreetSelector from '../molecules/StreetSelector';\r\nimport RoadNameSelector from '../molecules/RoadNameSelector';\r\nimport RoadSegmentSelector from '../molecules/RoadSegmentSelector';\r\nimport GroupCheckbox from '../molecules/GroupCheckBox';\r\nimport Select from '../atoms/Select';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport { useQuery, useInjTypeByQuery } from '../../hooks/queryHooks';\r\nimport Loader from '../atoms/Loader';\r\nimport MySelect from '../atoms/MySelect';\r\nimport '../../styles/accordion.css'\r\n\r\ninterface IProps {\r\n}\r\nconst STYLE_TOGGLE_WARNING = {\r\n   // color: '#dc3545',\r\n   // cursor: 'pointer',\r\n   // paddingRight: '15px',\r\n   // paddingLeft: '15px',\r\n};\r\nconst STYLE_TOGGLE_NORMAL = {\r\n   color: '#007bff',\r\n   cursor: 'pointer',\r\n   // paddingRight: '15px',\r\n   // paddingLeft: '15px',\r\n};\r\n\r\nconst years: string[] = ['2015', '2016', '2017', '2018', '2019'];\r\n\r\nconst FilterForm: React.FC<IProps> = observer(({ }) => {\r\n   const { filterStore } = useStore();\r\n   const { injurySeverity, updateInjurySeverity, isLoading, formCardKey } = filterStore;\r\n   return (\r\n      <React.Fragment>\r\n         {isLoading ? <Loader /> :\r\n            <Form>\r\n               <Accordion defaultActiveKey={formCardKey.toString()}>\r\n                  <CardFilterWhen />\r\n                  <CardFilterWhere />\r\n                  <CardFilterWho />\r\n                  <CardFilterWhat />\r\n                  <CardFilterWhatVehicle />\r\n                  <CardFilterWhatRoad />\r\n               </Accordion>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={injurySeverity}\r\n                  onChange={updateInjurySeverity}\r\n               />\r\n            </Form>}\r\n      </React.Fragment>\r\n   );\r\n});\r\n// {/* <Button\r\n//    variant=\"primary\"\r\n//    disabled={isLoading || !isValidAllFilters}\r\n//    onClick={() => { filterStore.submitFilter(); }}>\r\n//    {isLoading ? t('Loading…') : t('Submit')}\r\n//    {' '}\r\n// </Button> */}\r\n\r\nfunction CustomToggle({ children, style, eventKey, onClick }: any) {\r\n   const [hover, setHover] = useState(false);\r\n   const toggleHover = () => setHover(!hover);\r\n   const linkStyle = (hover) ? { textDecoration: 'underline' } : { textDecoration: 'none' };\r\n   const onButtonClick = useAccordionToggle(eventKey, () => onClick(eventKey));\r\n   return (\r\n      <div>\r\n         <a style={{ ...style, ...linkStyle }} onClick={onButtonClick}\r\n            onMouseEnter={toggleHover}\r\n            onMouseLeave={toggleHover}>\r\n            {children}\r\n         </a>\r\n      </div>\r\n   );\r\n}\r\n\r\n\r\nconst CardFilterWhen: React.FC<any> = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const {\r\n      isValidWhen, startYear, setStartYear, endYear, setEndYear,\r\n      dayNight, updateDayNight,\r\n      setFormCardKey,\r\n   } = filterStore;\r\n   const styleToggle = isValidWhen ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"0\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('When')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse eventKey=\"0\" className=\"filterControls\">\r\n            <Card.Body>\r\n               <div>\r\n                  <div className=\"accordion-when-selects\">\r\n                     <MySelect\r\n                        label={t('FromYear')}\r\n                        deafaultVal={String(startYear)}\r\n                        data={years}\r\n                        onChange={(e: ChangeEvent<HTMLSelectElement>) => { setStartYear(e.target.value); }}\r\n                     />\r\n                     <MySelect\r\n                        label={t('ToYear')}\r\n                        deafaultVal={String(endYear)}\r\n                        data={years}\r\n                        onChange={(e: ChangeEvent<HTMLSelectElement>) => { setEndYear(e.target.value); }}\r\n                     />\r\n                  </div>\r\n\r\n                  {/* data: any[]\r\n                  onChange: (event: React.ChangeEvent<HTMLSelectElement>) => void,\r\n                  valProp: string\r\n                  contentProp: string\r\n                  deafaultVal?: string\r\n                  label?: string */}\r\n                  {/* <Form.Row>\r\n                     <Form.Group as={Col} controlId=\"exampleForm.ControlSelectStartYear\">\r\n                        <Form.Label className=\"filterLable\">\r\n                           {' '}\r\n                           {t('FromYear')}:\r\n                        </Form.Label>\r\n                        <Form.Control\r\n                           as=\"select\"\r\n                           defaultValue={startYear}\r\n                           onChange={(e: ChangeEvent<HTMLInputElement>) => { setStartYear(e.target.value); }}>\r\n                           {years.map((year) => <option key={year}>{year}</option>)}\r\n                        </Form.Control>\r\n                     </Form.Group>\r\n                     <Form.Group as={Col} controlId=\"exampleForm.ControlSelectEndYear\">\r\n                        <Form.Label className=\"filterLable\">\r\n                           {' '}\r\n                           {t('ToYear')}:\r\n                     </Form.Label>\r\n                        <Form.Control\r\n                           as=\"select\"\r\n                           defaultValue={endYear}\r\n                           onChange={(e: ChangeEvent<HTMLInputElement>) => { setEndYear(e.target.value); }}>\r\n                           {years.map((year, i) => <option key={year + i} >{year}</option>)}\r\n\r\n                        </Form.Control>\r\n                     </Form.Group>\r\n                  </Form.Row> */}\r\n                  <GroupCheckbox formName=\"exampleForm\" colFilter={dayNight} onChange={updateDayNight} />\r\n               </div>\r\n            </Card.Body>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\n\r\nconst CardFilterWhere = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const {\r\n      isValidWhere, roadTypes, updateRoadType, isMultipleCities,\r\n      cityPopSizeRange, setCityPopSizeRange, cityPopSizeArr,\r\n      setFormCardKey,\r\n   } = filterStore;\r\n   const styleToggle = isValidWhere ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   console.log(cityPopSizeArr)\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"1\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('Where')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"1\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <CitySelector isMultiple={isMultipleCities} />\r\n               <StreetSelector />\r\n               <RoadNameSelector />\r\n               <RoadSegmentSelector />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={roadTypes}\r\n                  onChange={updateRoadType}\r\n               />\r\n               {/* <Select\r\n                  label={'city_size'}\r\n                  id={'cityForm.SelectPopSize'}\r\n                  data={cityPopSizeArr}\r\n                  value={cityPopSizeRange}\r\n                  onChange={(val: string) => setCityPopSizeRange(val)}\r\n               /> */}\r\n               <MySelect\r\n                  style={{ display: 'flex-end', alignItems: 'center' }}\r\n                  label={'city_size'}\r\n                  data={cityPopSizeArr}\r\n                  valProp=\"val\"\r\n                  contentProp=\"text\"\r\n                  onChange={(event: React.ChangeEvent<HTMLSelectElement>) => setCityPopSizeRange(event.target.value)}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\nconst CardFilterWho = observer(() => {\r\n   const { t } = useTranslation();\r\n   const location = useLocation();\r\n   const { filterStore } = useStore();\r\n   const { isValidWho, injTypes, updateInjuerdType, genderTypes, updateGenderType, } = filterStore;\r\n   const { ageTypes, updateAgeType, populationTypes, updatePopulationType, setFormCardKey } = filterStore;\r\n\r\n   useEffect(() => {\r\n      const query = useQuery(location);\r\n      const injType = useInjTypeByQuery(query);\r\n      if (injType) {\r\n         updateInjuerdType(injType, true);\r\n      }\r\n   }, []);\r\n\r\n   const styleToggle = isValidWho ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"2\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('Who')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"2\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={injTypes}\r\n                  onChange={updateInjuerdType}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={genderTypes}\r\n                  onChange={updateGenderType}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={ageTypes}\r\n                  onChange={updateAgeType}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={populationTypes}\r\n                  onChange={updatePopulationType}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\nconst CardFilterWhat = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const { isValidWhat, accidentType, updateAccidentType, setFormCardKey } = filterStore;\r\n   const styleToggle = isValidWhat ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"3\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('What')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"3\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={accidentType} onChange={updateAccidentType}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\n\r\nconst CardFilterWhatVehicle = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const { isValidWhatVehicle, vehicleType, updateVehicleType, setFormCardKey } = filterStore;\r\n   const styleToggle = isValidWhatVehicle ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card>\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"4\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('WhatVehicle')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"4\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={vehicleType} onChange={updateVehicleType}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\n\r\nconst CardFilterWhatRoad = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n   const { isValidWhatRoad } = filterStore;\r\n   const { speedLimit, updateSpeedLimit, roadWidth, updateRoadWidth, } = filterStore;\r\n   const { separator, updateSeparator, oneLane, updateOneLane, setFormCardKey } = filterStore;\r\n   const styleToggle = isValidWhatRoad ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n\r\n   return (\r\n      <Card >\r\n         <Card.Header>\r\n            <CustomToggle\r\n               eventKey=\"5\"\r\n               style={styleToggle}\r\n               onClick={setFormCardKey}>\r\n               {t('WhatRoad')}\r\n            </CustomToggle>\r\n         </Card.Header>\r\n         <Accordion.Collapse\r\n            eventKey=\"5\"\r\n            className=\"filterControls\">\r\n            <div>\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={speedLimit}\r\n                  onChange={updateSpeedLimit}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={roadWidth}\r\n                  onChange={updateRoadWidth}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={separator}\r\n                  onChange={updateSeparator}\r\n               />\r\n               <GroupCheckbox\r\n                  formName=\"exampleForm\"\r\n                  colFilter={oneLane}\r\n                  onChange={updateOneLane}\r\n               />\r\n            </div>\r\n         </Accordion.Collapse>\r\n      </Card>\r\n   );\r\n});\r\nexport default FilterForm;\r\n","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport FilterForm from '../organisms/FilterForm';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport ConfigModal from \"../organisms/ConfigModal\";\r\n\r\ninterface IProps {\r\n }\r\nconst ConfigFilterModal: React.FC<IProps> = observer(() => {\r\n    const { filterStore, uiStore } = useStore();\r\n    const { showFilterModal, setShowFilterModal } = uiStore;\r\n    return (\r\n        <ConfigModal\r\n            action={() => {\r\n                filterStore.submitFilter();\r\n                setTimeout(() => {\r\n                    setShowFilterModal(!showFilterModal)\r\n                }, 1000);\r\n            }}\r\n            size=\"lg\"\r\n            title={'Filters'}\r\n            setShow={setShowFilterModal}\r\n            showModal={showFilterModal}>\r\n             <FilterForm />\r\n        </ConfigModal>\r\n    );\r\n});\r\nexport default ConfigFilterModal;\r\n","import React from \"react\"\r\n\r\nfunction SvgIconFilter(props: React.SVGProps<SVGSVGElement>) {\r\n  const color = (props.color) ? props.color : 'blue';\r\n  const height = (props.height) ? props.height : 24;\r\n  const width = (props.width) ? props.width : 24;\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height={height}\r\n      viewBox=\"0 0 24 24\"\r\n      width={width}\r\n    >\r\n      <path d=\"M0 0h24m0 24H0\" fill=\"none\" />\r\n      <path d=\"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39A.998.998 0 0018.95 4H5.04c-.83 0-1.3.95-.79 1.61z\" \r\n       fill={color} />\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport default React.memo(SvgIconFilter);","import React from 'react';\r\n// import { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../stores/storeConfig';\r\n// import IconWithImage from '../atoms/IconWithImage';\r\n// import imgSrc from '../../assets/filter.png';\r\nimport { useMemos } from '../../hooks/myUseMemo';\r\nimport SvgIconFilter from '../../assets/SvgIconFilter';\r\nimport '../../styles/filter-btn.css'\r\n\r\ninterface IProps { }\r\nconst ButtonShowFilterModal: React.FC<IProps> = observer(() => {\r\n    // const { t } = useTranslation();\r\n    const { uiStore } = useStore();\r\n    const { showFilterModal, setShowFilterModal } = uiStore;\r\n    const memoFilterIcon = useMemos([],\r\n        <SvgIconFilter color={'var(--onprimary-color)'} height={40} width={34} />);\r\n    // const filterIcon = <IconWithImage\r\n    //     path={imgSrc}\r\n    //     style={{ lineHeight: '30px' }}\r\n    //     alt='open filter'\r\n    // />\r\n\r\n    return (\r\n        <>\r\n            <span\r\n                title=\"Filter\"\r\n                // aria-label=\"This is information\"\r\n                className=\"btn-sm filter-btn\"\r\n                onClick={() => setShowFilterModal(!showFilterModal)}>\r\n                {memoFilterIcon}\r\n            </span>\r\n        </>\r\n    );\r\n});\r\nexport default ButtonShowFilterModal;\r\n","import React from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport FilterForm from './FilterForm'\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport { observer } from 'mobx-react';\r\nimport { Button } from 'react-bootstrap';\r\n// import SmallCard2 from '../atoms/SmallCard2';\r\nimport '../../styles/sidebar.css'\r\n\r\nconst Drawer: React.FC<any> = observer((props) => {\r\n   // console.log('Drawer')\r\n   const { t } = useTranslation();\r\n   const { filterStore } = useStore();\r\n\r\n   return (\r\n      // <SmallCard2>\r\n      <div className=\"sidebar\">\r\n         <div className=\"filters\">\r\n            <FilterForm />\r\n         </div>\r\n         <Button\r\n            style={{ margin: '0.5rem' }}\r\n            variant=\"primary\"\r\n            onClick={() => filterStore.submitFilter()}\r\n            disabled={filterStore.isLoading || !filterStore.isValidAllFilters}\r\n         >\r\n            {filterStore.isLoading ? t('Loading') : t('Submit')}\r\n         </Button>\r\n      </div>\r\n   )\r\n   {/* </SmallCard2> */ }\r\n})\r\n\r\n\r\nexport default Drawer","import React, { PropsWithChildren } from 'react'\r\nimport Drawer from '../organisms/Drawer'\r\nimport '../../styles/grid-with-drawer.css'\r\n\r\ninterface Props extends PropsWithChildren<any> { }\r\n\r\nconst WithSidebarTemplate: React.FC<Props> = ({ children }) => {\r\n   return (\r\n      <div className=\"grid-with-drawer\">\r\n         <div className=\"grid-drawer\">\r\n            <Drawer />\r\n         </div>\r\n         <div className=\"grid-main\">\r\n            {children}\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default WithSidebarTemplate\r\n","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { toJS } from 'mobx';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n}\r\n\r\nconst WhereTitle: React.FC<{}> = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { cities, cityPopSizeRange, cityPopSizeArr, roads, CITY_POP_SIZE_ALL } = filterStore;\r\n  let res = t('Israel');\r\n  if (cities.length > 0) {\r\n    res = (cities.length === 1) ? cities[0] : t('several-cities');\r\n  } else if (cityPopSizeRange !== CITY_POP_SIZE_ALL) {\r\n    const cityPopSizeObj = cityPopSizeArr.find((obj: any) => { return obj.val === cityPopSizeRange });\r\n    if (cityPopSizeObj)\r\n      res = `${t('city_size')} ${t(cityPopSizeObj.text)}`;\r\n  } else if (roads.length > 0) {\r\n    res = (roads.length === 1) ? `${t('Road')} ${roads[0]}` : t('several-roads');\r\n  }\r\n  return (\r\n    <span>{res}</span>\r\n  )\r\n});\r\n\r\nconst InfoPanel: React.FC<IProps> = observer(({ }) => {\r\n  const styles = {\r\n    div: {\r\n      marginTop: '1rem',\r\n      marginLeft: '1rem',\r\n      marginRight: '1rem'\r\n    }\r\n  }\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { casualtiesNames, dataAllInjuries, isLoading } = filterStore;\r\n  const reactMarkers = toJS(dataAllInjuries);\r\n  const length = reactMarkers.length;\r\n  if (isLoading) return <div style={styles.div}> {t('Loading')} </div>\r\n  if (length > 0) {\r\n    return (\r\n      <h5 style={styles.div}>\r\n        <WhereTitle />{', '}\r\n        {t('Found')}\r\n        {' '}\r\n        {length}\r\n        {' '}\r\n        {t(casualtiesNames)}\r\n        {' '}\r\n      </h5>\r\n    );\r\n  }\r\n  return (\r\n    <h5 style={styles.div}>{t('NoResultsFound')}</h5>\r\n  );\r\n});\r\nexport default InfoPanel;\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport { observer } from 'mobx-react';\r\n// import FilterPanel from '../organisms/FilterPanel';\r\nimport { useQuery, useTabFromQuery } from '../../hooks/queryHooks';\r\nimport TabsTemplate from './TabsTemplate';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport ConfigFilterModal from '../organisms/ConfigFilterModal';\r\nimport ButtonShowFilterModal from '../atoms/ButtonShowFilterModal';\r\nimport { useMemos } from \"../../hooks/myUseMemo\";\r\n// import CasualtiesSumLabel from '../atoms/CasualtiesSumLabel';\r\nimport FilterForm from \"../organisms/FilterForm\";\r\nimport WithSidebarTemplate from './WithSidebarTemplate';\r\nimport InfoPanel from '../molecules/InfoPanel';\r\n\r\ninterface IProps { }\r\nconst HomeTemplate: React.FC<IProps> = observer(() => {\r\n   const { t } = useTranslation();\r\n   const { mapStore, filterStore, uiStore } = useStore();\r\n   const { setIsMultipleCities, updateCities, submitFilter, } = filterStore;\r\n   const { currentTab, setCurrentPage, setCurrentTab, showFilterModal } = uiStore;\r\n\r\n\r\n   const history = useHistory();\r\n   const location = useLocation();\r\n\r\n   useEffect(() => {\r\n      history.push({\r\n         pathname: '/home',\r\n         search: `?tab=${currentTab}`,\r\n      });\r\n   }, [currentTab, history]);\r\n\r\n   useEffect(() => {\r\n      setCurrentPage('home');\r\n      const query = useQuery(location);\r\n      const tab = useTabFromQuery(query, 'charts');\r\n      setCurrentTab(tab);\r\n      setIsMultipleCities(true);\r\n   }, []);  // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n   mapStore.isReadyToRenderMap = false;\r\n\r\n   useEffect(() => {\r\n      // mapStore.initBounds();\r\n      updateCities([], false);\r\n      submitFilter();\r\n   }, [submitFilter, updateCities]);\r\n\r\n\r\n   const memoConfigModal = useMemos([showFilterModal], <ConfigFilterModal />)\r\n\r\n   return (\r\n      <WithSidebarTemplate>\r\n         {/* <div className=\"row\"> */}\r\n         <div>\r\n            <div>\r\n               <InfoPanel />\r\n               <ButtonShowFilterModal />\r\n            </div>\r\n            {showFilterModal && memoConfigModal}\r\n            <TabsTemplate type=\"home\" />\r\n         </div>\r\n      </WithSidebarTemplate>\r\n   )\r\n})\r\n\r\nexport default HomeTemplate\r\n","import React from 'react';\r\nimport HomeTemplate from '../templates/HomeTemplate';\r\n\r\ninterface IProps { }\r\n\r\nconst HomePage: React.FC<IProps> = () => (\r\n  <HomeTemplate />\r\n);\r\nexport default HomePage;\r\n","import React, { useEffect } from 'react';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\n// import { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { TabsTemplate } from './TabsTemplate';\r\n// import FilterPanel from '../organisms/FilterPanel';\r\nimport { useQuery, useTabFromQuery, useCityNameFromQuery } from '../../hooks/queryHooks';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport ConfigFilterModal from '../organisms/ConfigFilterModal';\r\nimport ButtonShowFilterModal from '../atoms/ButtonShowFilterModal';\r\nimport { useMemos } from '../../hooks/myUseMemo';\r\nimport InfoPanel from '../molecules/InfoPanel';\r\nimport WithSidebarTemplate from './WithSidebarTemplate';\r\n\r\ninterface IProps { }\r\nconst CityTemplate: React.FC<IProps> = observer(() => {\r\n  // const { t } = useTranslation();\r\n  const { filterStore, uiStore } = useStore();\r\n  const { cityResult, isUpdateFromUrl, setIsUpdateFromUrl } = filterStore;\r\n  const { currentTab, setCurrentTab, setCurrentPage, showFilterModal } = uiStore;\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  useEffect(() => {\r\n    setCurrentPage('city');\r\n    filterStore.isMultipleCities = false;\r\n    if (cityResult !== '') {\r\n      filterStore.submitFilter();\r\n    }\r\n    return () => setIsUpdateFromUrl(true); // unmount\r\n  }, []);\r\n  useEffect(() => {\r\n    if (cityResult !== '') {\r\n      history.push({\r\n        pathname: '/city',\r\n        search: `?name=${cityResult}&tab=${currentTab}`,\r\n      });\r\n      filterStore.submitFilter();\r\n    }\r\n  }, [cityResult, currentTab]);\r\n  useEffect(() => {\r\n    if (cityResult === '' && isUpdateFromUrl) {\r\n      setIsUpdateFromUrl(false);\r\n      const query = useQuery(location);\r\n      const cityName = useCityNameFromQuery(query, 'תל אביב -יפו');\r\n      const tab = useTabFromQuery(query, 'map');\r\n      filterStore.updateCities(cityName, true);\r\n      setCurrentTab(tab);\r\n      // cityResult = cityName[0];\r\n      filterStore.submitFilter();\r\n    }\r\n  }, []);\r\n  // useEffect(() => {\r\n  //   if (cityResult !== '') {\r\n  //     filterStore.submitFilter();\r\n  //   }\r\n  // }, [cityResult]);\r\n\r\n  const memoConfigModal = useMemos([showFilterModal], <ConfigFilterModal />)\r\n  return (\r\n    <WithSidebarTemplate>\r\n      <div className=\"App\">\r\n        <div>\r\n          <InfoPanel />\r\n          <ButtonShowFilterModal />\r\n        </div>\r\n        {showFilterModal && memoConfigModal}\r\n        <TabsTemplate type=\"city\" />\r\n        {/* </div> */}\r\n        {/* </div>\r\n        </div> */}\r\n      </div>\r\n    </WithSidebarTemplate>\r\n  );\r\n});\r\nexport default CityTemplate;\r\n","import React from 'react';\r\nimport CityTemplate from '../templates/CityTemplate';\r\n\r\ninterface IProps { }\r\n\r\nconst CityPage: React.FC<IProps> = () => (\r\n  <CityTemplate />\r\n);\r\n\r\nexport default CityPage;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport Form from 'react-bootstrap/Form'\r\nimport MySelect from '../atoms/MySelect';\r\n\r\nconst LanguageSelector = observer(() => {\r\n   const { uiStore } = useStore();\r\n   const style: any = document.getElementById('style-direction');\r\n   if (style !== null) {\r\n      if (uiStore.direction === 'rtl') {\r\n         style.href = './bootstrap.rtl.min.css';\r\n         // changeLanguage('he')\r\n         document.body.classList.remove('dir-ltr');\r\n         document.body.classList.add('dir-rtl');\r\n      } else {\r\n         style.href = './bootstrap.min.css';\r\n         // changeLanguage('en')\r\n         document.body.classList.remove('dir-rtl');\r\n         document.body.classList.add('dir-ltr');\r\n      }\r\n   }\r\n   return (\r\n      <React.Fragment>\r\n\r\n         <MySelect\r\n            onChange={(e: React.ChangeEvent<HTMLSelectElement>) => {\r\n               uiStore.updateLanguage(e.target.value)\r\n            }}\r\n            //  label={labelText}\r\n            data={[{ value: 'he', text: 'Hebrew' }, { value: 'en', text: 'English' }]}\r\n            valProp=\"value\"\r\n            contentProp=\"text\"\r\n            deafaultVal={'he'}\r\n         />\r\n         {/* <Form className=\"form-inline\">\r\n            <Form.Group>\r\n               <Form.Control\r\n                  style={{ width: '7rem' }}\r\n                  className=\"form-select form-select-sm\"\r\n                  as=\"select\"\r\n                  onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n                     uiStore.updateLanguage(e.target.value)\r\n                  }}\r\n               >\r\n                  <option value=\"he\">Hebrew</option>\r\n                  <option value=\"en\">English</option>\r\n               </Form.Control>\r\n            </Form.Group>\r\n         </Form> */}\r\n         {/* <select\r\n            className=\"form-select-sm\"\r\n            onChange={(e) => {\r\n               uiStore.updateLanguage(e.target.value)\r\n            }}>\r\n            <option value=\"he\">Hebrew</option>\r\n            <option value=\"en\">English</option>\r\n         </select> */}\r\n      </React.Fragment>\r\n   );\r\n});\r\nexport default LanguageSelector;","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n\r\nconst NavigationList: React.FC<any> = () => {\r\n   const { t } = useTranslation();\r\n   return (\r\n      <React.Fragment>\r\n         <Link\r\n            className=\"nav-link\"\r\n            to=\"/\">\r\n            {t('Home')}\r\n         </Link>\r\n         <Link\r\n            className=\"nav-link\"\r\n            to=\"/city\">\r\n            {t('Cities')}\r\n         </Link>\r\n         <Link\r\n            className=\"nav-link\"\r\n            to=\"/about\">\r\n            {t('About')}\r\n         </Link>\r\n      </React.Fragment>\r\n   )\r\n}\r\n\r\nexport default NavigationList\r\n","import React from 'react';\r\nimport LanguageSelector from '../molecules/LanguageSelector';\r\nimport logo from '../../assets/safety-logo.png';\r\nimport NavigationList from '../molecules/NavigationList';\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport '../../styles/tabs.css'\r\n\r\n\r\ninterface IProps {\r\n   title: string\r\n}\r\n\r\nconst styles = {\r\n   header: {\r\n      marginBottom: '1rem',\r\n      position: 'fixed' as 'fixed',\r\n      top: '0px',\r\n      width: '100%',\r\n      zIndex: 5000,\r\n   }\r\n};\r\n\r\nexport const Header: React.FC<IProps> = ({ title }) => {\r\n\r\n   return (\r\n      <header style={styles.header} >\r\n         <Navbar className=\"navbar\" expand=\"lg\">\r\n            <div className=\"container-fluid\">\r\n               <img\r\n                  src={logo}\r\n                  alt={`${title} logo`}\r\n                  height=\"45\"\r\n                  width=\"188\"\r\n               />\r\n               <Navbar.Toggle aria-controls=\"basic-navbar-nav\" className=\"text-light\" />\r\n               <Navbar.Collapse id=\"basic-navbar-nav\" >\r\n                  <div className=\"navbar-nav\">\r\n                     <NavigationList />\r\n                  </div>\r\n                  <div>\r\n                     <LanguageSelector />\r\n                  </div>\r\n               </Navbar.Collapse>\r\n            </div>\r\n         </Navbar>\r\n      </header>\r\n\r\n   );\r\n};\r\n\r\nexport default Header;\r\n","export default \"data:image/png;base64,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\"","import React, { lazy, Suspense } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Card from 'react-bootstrap/Card';\r\nimport HomePage from './components/pages/HomePage';\r\nimport CityPage from './components/pages/CityPage';\r\nimport Header from './components/templates/Headr';\r\nimport Footer from './components/templates/Footer';\r\nimport Loader from './components/atoms/Loader';\r\nimport './i18n';\r\nimport './App.css';\r\nimport Drawer from './components/organisms/Drawer';\r\n\r\n\r\nconst AboutPage = lazy(() => import('./components/pages/AboutPage'));\r\nconst UpdateImagePage = lazy(() => import('./components/pages/UpdateImagePage'));\r\n\r\nconst styles = {\r\n   app: {\r\n      marginTop: '44px',\r\n   }\r\n};\r\n\r\nfunction App() {\r\n   return (\r\n      <Router>\r\n         {/* <Card display=\"flex\" height=\"100%\"> */}\r\n         <div style={{ height: \"100%\" }}>\r\n            <Header title=\"Safety Data\" />\r\n            <div style={styles.app}>\r\n               <Suspense fallback={<Loader />}>\r\n                  <Switch>\r\n                     <Route\r\n                        path=\"/about\"\r\n                        component={AboutPage}\r\n                     />\r\n                     <Route\r\n                        exact\r\n                        path=\"/city\"\r\n                        component={CityPage}\r\n                     />\r\n                     <Route\r\n                        path=\"/update-img\"\r\n                        component={UpdateImagePage}\r\n                     />\r\n                     <Route\r\n                        path=\"/\"\r\n                        component={HomePage}\r\n                     />\r\n                  </Switch>\r\n               </Suspense>\r\n            </div>\r\n            {/* <Footer /> */}\r\n         </div>\r\n         {/* </Card> */}\r\n      </Router>\r\n   );\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","/**\r\n * singlton logger class\r\n */\r\nclass Logger {\r\n  log(message) {\r\n    console.log(message);\r\n  }\r\n\r\n  error(message) {\r\n    console.error(message);\r\n  }\r\n}\r\nconst logger = new Logger();\r\nObject.freeze(logger);\r\nexport default logger;\r\n","import { useMemo } from \"react\";\r\n\r\nexport function useMemos(dep: any[], item: any) {\r\n   return useMemo(() => {\r\n      return item\r\n   }, dep)\r\n}","import React from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport '../../styles/my-select.css'\r\ninterface Props {\r\n   data: any[]\r\n   onChange: (event: React.ChangeEvent<HTMLSelectElement>) => void,\r\n   valProp?: string\r\n   contentProp?: string\r\n   deafaultVal?: string\r\n   label?: string\r\n   style?: any\r\n}\r\n\r\nconst MySelect: React.FC<Props> = ({ style, label, onChange, data, valProp, contentProp, deafaultVal }) => {\r\n   const { t } = useTranslation();\r\n\r\n   return (\r\n      <div className=\"select-wrapper\" style={style && style} >\r\n         {label && <label> {t(label)} </label>}\r\n         <select className=\"form-select form-select-sm\" onChange={onChange} defaultValue={deafaultVal}>\r\n            {data.map((item) => {\r\n               return <option\r\n                  key={valProp ? item[valProp] : item}\r\n                  value={valProp ? item[valProp] : item}>\r\n                  {t(contentProp ? item[contentProp] : item)}\r\n               </option>\r\n            })}\r\n         </select>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default MySelect\r\n","import { observable, action } from 'mobx';\r\nimport { Map } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport { fetchFilter } from '../services/AccidentService';\r\nimport logger from '../services/logger';\r\nimport RootStore from './RootStore';\r\n// import autorun  from \"mobx\"\r\n\r\n/**\r\n * bbox type - how to fetch data for map \r\n * NO_BBOX - when filter change, get all the points from server\r\n * SERVER_BBOX - on every zoom / movment of the map get only relevent DEFAULT_BOUNDS\r\n * LOCAL_BBOX - on zoom/ movment of map get relevent markers from memory (dataAllInjuries)\r\n */\r\nexport enum BBoxType {\r\n  NO_BBOX,\r\n  SERVER_BBOX,\r\n  LOCAL_BBOX\r\n}\r\n// const INIT_BOUNDS = [L.latLng(32.032, 34.739), L.latLng(32.115, 34.949)];\r\nconst DEFAULT_BOUNDS = [\r\n  L.latLng(29.50, 34.22), // most possible south-west point\r\n  L.latLng(33.271, 35.946), // most possible north-east point\r\n];\r\n\r\nexport default class MapStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  mapRef: React.RefObject<Map<any>>|null = null;\r\n\r\n  setMapRef = (mapRef: React.RefObject<Map<any>>) => {\r\n    this.mapRef = mapRef;\r\n  }\r\n\r\n  @observable\r\n  isReadyToRenderMap = false;\r\n\r\n  @observable\r\n  bboxType: BBoxType = BBoxType.LOCAL_BBOX;\r\n\r\n  @observable\r\n  mapCenter: L.LatLng = new L.LatLng(32.08, 34.83)\r\n\r\n  @action\r\n  updateMapCenter = (center: L.LatLng) => {\r\n    this.mapCenter = center;\r\n  }\r\n\r\n  @action\r\n  updateMapCenterByCity = (res: any[]) => {\r\n    if (res !== null && res.length > 0) {\r\n      const city = res[0];\r\n      if (city.lat && city.lon) {\r\n        this.updateMapCenter(new L.LatLng(city.lat, city.lon));\r\n      }\r\n    }\r\n  }\r\n\r\n  @observable\r\n  useSetBounds = true;\r\n\r\n  // @observable\r\n  // mapBounds: L.LatLngBounds = L.latLngBounds(INIT_BOUNDS);\r\n  // @action\r\n  // updateBounds = (bounds: L.LatLngBounds) => {\r\n  //   //logger.log(\"updateBounds\",bounds)\r\n  //   try {\r\n  //     this.mapBounds = (bounds);\r\n  //   } catch (error) {\r\n  //     logger.error(error)\r\n  //   }\r\n  // }\r\n  // @action\r\n  // initBounds = () => {\r\n  //   this.updateBounds(L.latLngBounds(INIT_BOUNDS))\r\n  // }\r\n  @action\r\n  setBounds = (data: any[], citisArr: string[]) => {\r\n    if (this.isSetBounds) {\r\n      const bunds = this.getBounds(data);\r\n      if (citisArr.length > 0 && citisArr[0] !== '') {\r\n        // //this.mapBounds = bunds;\r\n        // if (bunds.contains(this.mapCenter))\r\n        //   this.mapBounds = bunds;\r\n        // else\r\n        //  logger.log(\"worng bounds: \", bunds, this.mapCenter)\r\n      } else {\r\n        this.updateMapCenter(bunds.getCenter());\r\n        // this.mapBounds = bunds;\r\n      }\r\n      this.isSetBounds = false;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  isSetBounds = false;\r\n\r\n  @action\r\n  updateIsSetBounds = (citisArr: string[], roadSegArr: any[]) => {\r\n    if (this.useSetBounds) {\r\n      if (citisArr.length > 0 && citisArr[0] !== '') this.isSetBounds = true;\r\n      else if (roadSegArr.length > 0 && roadSegArr[0] !== '') this.isSetBounds = true;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  heatLayerHidden = true;\r\n\r\n  @action\r\n  toggleHeatLayer = () => {\r\n    this.heatLayerHidden = !this.heatLayerHidden;\r\n  }\r\n\r\n  @observable\r\n  useSmallMarkers = false;\r\n\r\n  @action\r\n  toggleUseSmallMarkers = () => {\r\n    this.useSmallMarkers = !this.useSmallMarkers;\r\n  }\r\n\r\n  getBounds = (data: any[]) => {\r\n    // logger.log(\"setBounds!\")\r\n    let arr: L.LatLng[] = [];\r\n    let lastPoint: L.LatLng = L.latLng(0, 0);\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        const p = new L.LatLng(x.latitude, x.longitude);\r\n        if ((lastPoint.lat === 0 && lastPoint.lng === 0)\r\n        || x.latitude !== lastPoint.lat\r\n        || x.longitude !== lastPoint.lng) {\r\n          arr.push(p);\r\n          // prevent insertion of duplicate same point\r\n          lastPoint = p;\r\n        }\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (arr.length === 1) {\r\n      arr.length = 0; // clean tha array\r\n      arr.push(L.latLng(lastPoint.lat + 0.01, lastPoint.lng + 0.01));\r\n      arr.push(L.latLng(lastPoint.lat - 0.01, lastPoint.lng - 0.01));\r\n    }\r\n    // in case no lat/lon info\r\n    if (arr.length < 2) arr = DEFAULT_BOUNDS;\r\n    const bounds = L.latLngBounds(arr);\r\n    return bounds;\r\n  }\r\n\r\n  getBounds2 = (data: any[]) => {\r\n    if (data.length === 0) return L.latLngBounds(DEFAULT_BOUNDS);\r\n    const bounds = {\r\n      south: 200, north: -200, west: 200, east: -200,\r\n    };\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        bounds.south = Math.min(x.latitude, bounds.south);\r\n        bounds.north = Math.max(x.latitude, bounds.north);\r\n        bounds.west = Math.min(x.longitude, bounds.west);\r\n        bounds.east = Math.max(x.longitude, bounds.east);\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (bounds.south === bounds.north) {\r\n      bounds.south -= 0.01;\r\n      bounds.north += 0.01;\r\n      bounds.west -= 0.01;\r\n      bounds.east += 0.01;\r\n    }\r\n    const b = L.latLngBounds([bounds.south, bounds.west], [bounds.east, bounds.north]);\r\n    return b;\r\n  }\r\n\r\n  @observable\r\n  dataMarkersInBounds: any[] = []\r\n\r\n  @action\r\n  updateDataMarkersInBounds = (data: any[]) => {\r\n    this.dataMarkersInBounds = data;\r\n  }\r\n\r\n  getMarkersInBBox = () => {\r\n    if (this.bboxType === BBoxType.LOCAL_BBOX) {\r\n      this.getMarkersInLocalBBox(0.02);\r\n    } else if (this.bboxType === BBoxType.SERVER_BBOX) {\r\n      this.submintGetMarkersBBox();\r\n    }\r\n  }\r\n\r\n  getMarkersInLocalBBox = (boundsMargin: number) => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    try {\r\n      const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n      const west = mapBounds.getWest() - boundsMargin;\r\n      const east = mapBounds.getEast() + boundsMargin;\r\n      const south = mapBounds.getSouth() - boundsMargin;\r\n      const north = mapBounds.getNorth() + boundsMargin;\r\n      const data = this.rootStore.filterStore.dataAllInjuries\r\n        .filter((x) => x.latitude >= south\r\n          && x.latitude <= north && x.longitude >= west && x.longitude <= east);\r\n      // const zoom = this.mapRef.current.leafletElement.getZoom();\r\n      // console.log(zoom, east -west ,data.length);     \r\n      this.updateDataMarkersInBounds(data);\r\n    } catch (error) {\r\n      logger.error(error);\r\n    }\r\n  }\r\n\r\n  submintGetMarkersBBox = () => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n    const filter = this.rootStore.filterStore.getFilter(mapBounds, true);\r\n    fetchFilter(filter, 'latlon')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateDataMarkersInBounds(data);\r\n        }\r\n      });\r\n  }\r\n}\r\n"],"sourceRoot":""}