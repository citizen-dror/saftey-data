{"version":3,"sources":["i18n.js","stores/FilterChecker.ts","stores/ColumnFilter.ts","stores/GroupBy.ts","services/CityService.ts","services/DexieInjuredService.js","stores/FilterStore.ts","stores/UiStore.ts","services/ImageService.ts","stores/ImageStore.ts","stores/storeConfig.ts","stores/RootStore.ts","assets/menu_white.png","assets/safety-logo.png","components/molecules/CitySelector.tsx","components/molecules/StreetSelector.tsx","components/molecules/RoadSegmentSelector.tsx","components/atoms/Checkbox.tsx","components/molecules/GroupCheckBox.tsx","components/organisms/FilterRequest.tsx","components/organisms/FilterPanel.tsx","components/atoms/ErrorBoundary.tsx","components/templates/TabsTemplate.tsx","components/templates/HomeTemplate.tsx","components/pages/HomePage.tsx","components/templates/CityTemplate.tsx","components/pages/CityPage.tsx","components/molecules/LanguageSelector.tsx","components/atoms/ButtonMenu.tsx","components/templates/Headr.tsx","components/templates/Footer.tsx","App.js","serviceWorker.js","index.js","services/AccidentService.ts","stores/MapStore.ts"],"names":["i18n","use","initReactI18next","init","fallbackLng","lng","debug","resources","translationEng","translationHeb","interpolation","escapeValue","FilterChecker","label","valid","filters","this","checked","observable","ColumnFilter","name","dbColName","allTypesOption","arrTypes","reduce","counter","currentValue","computed","action","aType","val","forEach","x","index","GroupBy","text","value","limit","GroupBy2","vals","revTrnas","key","fixStrcutTable","data","map","arr","count","y","grp2","join","xId","_id","undefined","replace","sObject","JSON","parse","getBars","Object","entries","color","getColumns","res","unshift","GroupBy2Val","CityService","cityName","collback","settings","url","method","headers","$","ajax","done","response","lang","db","Dexie","a","injuerd","bulkPut","getFromDexie","arrFilters","length","toArray","years","shift","where","filterName","between","startYear","endYear","collection","element","and","values","orFilter","version","stores","FilterStore","rootStore","dictGroupBy","dict","appInitialized","updateSpeedLimit","updateFilters","speedLimit","getFilterGroupBy","filterMatch","groupName","groupName2","filter","grpids","submintMainDataFilter","isLoading","getFilter","mapStore","updateIsSetBounds","cities","roadSegment","fetchFilter","then","updateAllInjuries","useLocalDb","insertToDexie","submintGetMarkerFirstStep","updateDataMarkersLean","submitCityNameAndLocation","city","getCityByNameHe","updateMapCenterByCity","cityResult","bounds","useBounds","getMultiplefilter","injurySeverity","getfilterCity","getfilterBounds","dayNight","getFilterStreets","getFilterFromArray","injTypes","genderTypes","ageTypes","populationTypes","accidentType","vehicleType","roadTypes","roadWidth","separator","oneLane","mapBounds","getSouth","getNorth","getWest","getEast","getfilterBySeverityAndCity","streets","trim","colFilter","allChecked","arrfilter","iterator","filterCheck","xSafe","submitMainDataFilterLocalDb","getFilterIDB","submintGetMarkersBBoxIdb","getFilterBboxIDB","updateDataMarkersInBounds","toString","push","getfilterCityIDB","getFilterStreetsIDB","getMultiplefilterIDB","getFilterFromArrayIDb","bbox","p1","getSouthWest","p2","getNorthEast","filterVals","filter1","col","FC","setCasualtiesNames","groupByDict","group2Dict","groupBy","TypeInjured","groupBy2","Gender","dataByYears","dataYearsUnfilterdInit","dataFilterdByYears","dataYearsfilterdInit","dataFilterd","dataGrpBy1Init","dataGroupby2","dataGrp2Init","isAllValsFalse","isValidSeverity","isValidWhen","isValidWho","isValidWhere","isValidWhat","isValidWhatVehicle","isValidWhatRoad","pageType","currentPage","deadChecker","sevIngChecker","casualtiesNames","isMulti","isMultipleCities","names","split","year","parseInt","setMarkersLoadStep","dataAllInjuries","setBounds","bboxType","BBoxType","LOCAL_BBOX","getMarkersInLocalBBox","dataMarkersLean","submitfilterdGroup","submitfilterdGroup2","filtermatch","fetchGroupBy","aGroupBy","fixData","step","isUse2StepsMarkers","markersLoadStep","SERVER_BBOX","submintGetMarkersBBox","submitGroupByYears","submitfilterdGroupByYears","uiStore","language","imageStore","getImagesByPlace","updateFilter","UiStore","reactionChangeLang","reaction","locale","changeLanguage","initLang","slang","localStorage","getItem","updateLanguage","error","console","log","setItem","stringify","fetchListImgByTag","tag","fetch","mode","cache","credentials","redirect","referrerPolicy","ok","json","fetchListImgByPlace","place","uploadImg","image","file","formData","FormData","append","titlehe","texthe","tags","body","updateImgProps","ImageStore","setCurrImageVal","valName","currImage","submitImageFile","getImages","type","filterStore","getImagesByTag","currTag","setImageList","imageList","setCurrImage","hideDescription","document","documentElement","style","setProperty","store","MapStore","StoreContext","React","createContext","useStore","useContext","Error","module","exports","CitySelector","observer","isMultiple","t","useTranslation","Form","Group","controlId","Label","className","id","onChange","selected","updateCities","options","citisNamesHeb","multiple","StreetSelector","Control","placeholder","e","updateStreets","target","RoadSegmentSelector","updateRoadSegment","Checkbox","group","Check","inline","GroupCheckbox","formName","onGroupChange","feedback","marginTop","fontSize","isvalid","fChecker","STYLE_TOGGLE_WARNING","STYLE_TOGGLE_NORMAL","FilterRequest","activeCardKey","updateInjurySeverity","isValidAllFilters","Accordion","defaultActiveKey","CardFilterWhen","CardFilterWhere","CardFilterWho","CardFilterWhat","CardFilterWhatVehicle","CardFilterWhatRoad","Button","variant","disabled","onClick","submitFilter","setStartYear","setEndYear","updateDayNight","styleToggle","Card","Header","Toggle","as","eventKey","Collapse","Body","Row","Col","defaultValue","updateRoadType","updateInjuerdType","updateGenderType","updateAgeType","updatePopulationType","updateAccidentType","updateVehicleType","updateRoadWidth","updateSeparator","updateOneLane","FilterPanel","useState","open","setOpen","aria-controls","aria-expanded","in","ErrorBoundary","props","state","hasError","errorInfo","children","Component","GroupByGraphsPanel","lazy","GroupByTablesPanel","MapAccidents","AccidentsTable","MyImageGallery","TabsTemplate","defaultKey","activeKey","Tabs","mountOnEnter","onSelect","tabActiveKey","isReadyToRenderMap","Tab","title","fallback","HomeTemplate","setCurrentPage","setIsMultipleCities","useEffect","HomePage","useCityNamefromQuery","URLSearchParams","useLocation","search","get","found","includes","find","CityLable","CityTemplate","CityPage","LanguageSelector","getElementById","href","classList","remove","add","ButtonGroup","toggle","size","ToggleButton","defaultChecked","ButtonMenu","styleLink","alignRight","Dropdown","backgroundColor","src","menuIcon","alt","height","width","Menu","Item","to","getShowNavMenu","divStyle","display","flexFlow","window","innerWidth","showNavMenu","setShowNavMenu","navMenu","handleResize","show","addEventListener","removeEventListener","logo","Footer","AboutPage","UpdateImagePage","App","path","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch","message","DEFAULT_BOUNDS","L","latLng","mapRef","setMapRef","getBounds","lastPoint","latitude","longitude","p","LatLng","lat","latLngBounds","getBounds2","south","north","west","east","Math","min","max","getMarkersInBBox","boundsMargin","current","leafletElement","center","mapCenter","lon","updateMapCenter","citisArr","isSetBounds","bunds","getCenter","roadSegArr","useSetBounds","heatLayerHidden","useSmallMarkers","dataMarkersInBounds"],"mappings":"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","file":"static/js/main.b202eb32.chunk.js","sourcesContent":["import i18n from 'i18next';\r\n//import LanguageDetector from 'i18next-browser-languagedetector';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport translationEng from \"./lng/en/translation.json\";\r\nimport translationHeb from \"./lng/he/translation.json\";\r\n\r\n\r\ni18n\r\n  // detect user language\r\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\r\n  //.use(LanguageDetector)\r\n  // pass the i18n instance to react-i18next.\r\n  .use(initReactI18next)\r\n  .init({\r\n    fallbackLng: 'he',\r\n    lng : 'he',\r\n    debug: true,\r\n    // hardcoding translations for the sake of simplicity,\r\n    // id more complex - get it from backend.\r\n    // i18next has a small plugin that makes it easy.\r\n    // learn more: https://github.com/i18next/i18next-xhr-backend\r\n    resources: {\r\n      'en':{\r\n        'translation':translationEng  \r\n      },\r\n        'he':{\r\n        'translation':translationHeb \r\n      }\r\n    },\r\n    interpolation: {\r\n      escapeValue: false, // not needed for React as it escapes by default\r\n    },\r\n});\r\nexport default i18n;","import { observable} from 'mobx';\r\n\r\nexport interface IFilterChecker {\r\n    checked: boolean;\r\n    label: string;\r\n    filters: string[];\r\n}\r\nexport default class FilterChecker implements IFilterChecker {\r\n    @observable\r\n    checked: boolean;\r\n\r\n    label: string;\r\n\r\n    filters: string[];\r\n\r\n    constructor(label: string, valid: boolean, filters: string[]) {\r\n      this.label = label;\r\n      this.checked = valid;\r\n      this.filters = filters;\r\n    }\r\n}\r\n","import { observable, action, computed } from 'mobx';\r\nimport FilterChecker, { IFilterChecker } from './FilterChecker';\r\nimport dataYearsUnfilterdInit from '../assets/data-by-years.json';\r\nimport dataYearsfilterdInit from '../assets/data-by-years-filtred.json';\r\nimport dataGrpBy1Init from '../assets/data-by-grp1.json';\r\nimport dataGrp2Init from '../assets/data-by-grp2.json'\r\n\r\nexport interface IColumnFilter {\r\n    name: string;\r\n    dbColName: string;\r\n    arrTypes: IFilterChecker[];\r\n    allTypesOption : number;\r\n    isAllValsFalse: boolean;\r\n    updateFilter:(aType: number, val: boolean) => void;\r\n}\r\nexport class ColumnFilter implements IColumnFilter {\r\n    name: string;\r\n\r\n    dbColName: string;\r\n\r\n    @observable\r\n    arrTypes: IFilterChecker[];\r\n\r\n    allTypesOption : number;\r\n\r\n    constructor(name: string, dbColName: string, allTypesOption: number = -1) {\r\n      this.name = name;\r\n      this.dbColName = dbColName;\r\n      this.arrTypes = [];\r\n      this.allTypesOption = allTypesOption;\r\n    }\r\n\r\n    @computed get isAllValsFalse() {\r\n      const res = this.arrTypes.reduce((counter, currentValue) => (currentValue.checked ? ++counter : counter), 0);\r\n      return (res === 0);\r\n    }\r\n\r\n    @action\r\n    updateFilter = (aType: number, val: boolean) => {\r\n      if (this.allTypesOption === -1) this.arrTypes[aType].checked = val;\r\n      else if (aType === this.allTypesOption) {\r\n        this.arrTypes.forEach((x, index) => x.checked = (index === this.allTypesOption) ? val : !val);\r\n      } else {\r\n        this.arrTypes[this.allTypesOption].checked = false;\r\n        this.arrTypes[aType].checked = val;\r\n      }\r\n    }\r\n    // @computed get countTrueVals () {\r\n    //     const res = this.arrTypes.reduce(function(counter,currentValue){\r\n    //         return currentValue.checked? ++counter:counter;\r\n    //       },0);\r\n    //     return res;\r\n    // }\r\n}\r\n\r\nexport const initInjurySeverity = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Severity', 'injury_severity_hebrew');\r\n  col.arrTypes.push(new FilterChecker('dead', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('severly-injured', false, [' ']));\r\n  return col;\r\n};\r\n\r\nexport const initDayNight = () => {\r\n  const col : IColumnFilter = new ColumnFilter('DayNight', 'day_night_hebrew');\r\n  col.arrTypes.push(new FilterChecker('day', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('night', true, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initMonth = (arr: IFilterChecker[]) => {\r\n  arr.push(new FilterChecker('1', true, ['1']));\r\n  arr.push(new FilterChecker('2', true, ['2']));\r\n  arr.push(new FilterChecker('3', true, ['3']));\r\n  arr.push(new FilterChecker('4', true, ['4']));\r\n  arr.push(new FilterChecker('5', true, ['5']));\r\n  arr.push(new FilterChecker('6', true, ['6']));\r\n  arr.push(new FilterChecker('7', true, ['7']));\r\n  arr.push(new FilterChecker('8', true, ['8']));\r\n  arr.push(new FilterChecker('9', true, ['9']));\r\n  arr.push(new FilterChecker('10', true, ['10']));\r\n  arr.push(new FilterChecker('11', true, ['11']));\r\n  arr.push(new FilterChecker('12', true, ['12']));\r\n};\r\n\r\nexport const initInjTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Vehicle', 'injured_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('cyclist', false, [' - ', ' -  ( )']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false, [' - ', ' -  ( )']));\r\n  col.arrTypes.push(new FilterChecker('wheels4+', false, [' -   4  ', ' -   4  ']));\r\n  col.arrTypes.push(new FilterChecker('other', false, [' -   ', ' -   ']));\r\n  return col;\r\n};\r\n\r\nexport const initVehicleTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('VehicleType', 'vehicle_vehicle_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('pedestrian', false, ['null']));\r\n  col.arrTypes.push(new FilterChecker('mobilityscooter', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('bicycle', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('e-scooter', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('e-bike', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('motorcycle', false,\r\n    [' 401+ \"', ' 126  400 \"', ' 51  125 \"']));\r\n  col.arrTypes.push(new FilterChecker('car', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('taxi', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('bus', false, [' ', '']));\r\n  col.arrTypes.push(new FilterChecker('tranzit', false, ['  3.5  -  ()']));\r\n  col.arrTypes.push(new FilterChecker('tender', false, ['  3.5   -   ()']));\r\n  col.arrTypes.push(new FilterChecker('truck', false,\r\n    [' 3.6  9.9 ', ' 10.0  12.0 ', ' 12.1  15.9 ', ' 16.0  33.9 ', ' 34.0+ ']));\r\n  col.arrTypes.push(new FilterChecker('tractor', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('train', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('other', false, ['  ']));\r\n  return col;\r\n};\r\n\r\nexport const initGenderTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Gender', 'sex_hebrew');\r\n  col.arrTypes.push(new FilterChecker('female', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('male', true, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initAgeTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Age', 'age_group_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('00-04', false, ['00-04']));\r\n  col.arrTypes.push(new FilterChecker('05-09', false, ['05-09']));\r\n  col.arrTypes.push(new FilterChecker('10-14', false, ['10-14']));\r\n  col.arrTypes.push(new FilterChecker('15-19', false, ['15-19']));\r\n  col.arrTypes.push(new FilterChecker('20-29', false, ['20-24', '25-29']));\r\n  col.arrTypes.push(new FilterChecker('30-39', false, ['30-34', '35-39']));\r\n  col.arrTypes.push(new FilterChecker('40-49', false, ['40-44', '45-49']));\r\n  col.arrTypes.push(new FilterChecker('50-59', false, ['50-54', '55-59']));\r\n  col.arrTypes.push(new FilterChecker('60-69', false, ['60-64', '65-69']));\r\n  col.arrTypes.push(new FilterChecker('70-79', false, ['70-74', '75-79']));\r\n  col.arrTypes.push(new FilterChecker('80+', false, ['80-84', '85+']));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, [' ']));\r\n  return col;\r\n};\r\nexport const initPopulationTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Population', 'population_type_hebrew');\r\n  col.arrTypes.push(new FilterChecker('jews', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('arabs', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('immigrants', true, ['']));\r\n  col.arrTypes.push(new FilterChecker('others', true, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initRoadTypes = () => {\r\n  const col : IColumnFilter = new ColumnFilter('RoadType', 'road_type_hebrew');\r\n  col.arrTypes.push(new FilterChecker('urban-junction', true, [' ']));\r\n  col.arrTypes.push(new FilterChecker('urban-road', true, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('non-urban-junction', true, ['- ']));\r\n  col.arrTypes.push(new FilterChecker('non-urban-road', true, ['-  ']));\r\n  return col;\r\n};\r\nexport const initSpeedLimit = () => {\r\n  const col : IColumnFilter = new ColumnFilter('SpeedLimit', 'speed_limit_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('speed50', false, [' 50 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed60', false, ['60 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed70', false, ['70 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed80', false, ['80 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed90', false, ['90 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed100', false, ['100 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed110', false, ['110 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed120', false, ['120 \"']));\r\n  col.arrTypes.push(new FilterChecker('speed-unknown', false, [' ']));\r\n  return col;\r\n};\r\nexport const initRoadWidth = () => {\r\n  const col : IColumnFilter = new ColumnFilter('RoadWidth', 'road_width_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('road-width-5', false, [' 5 ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-7', false, ['5  7  ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-10', false, ['7  10.5 ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-14', false, ['10.5  14 ']));\r\n  col.arrTypes.push(new FilterChecker('road-width-14+', false, [' - 14 ']));\r\n  col.arrTypes.push(new FilterChecker('unknown', false, [' ']));\r\n  return col;\r\n};\r\nexport const initSeparator = () => {\r\n  const col : IColumnFilter = new ColumnFilter('Separator', 'multi_lane_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('separator-fence', false, ['   ']));\r\n  col.arrTypes.push(new FilterChecker('separator-built', false, ['    ']));\r\n  col.arrTypes.push(new FilterChecker('separator-not-built', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('separator-paint', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('separator-ohter', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('separator-not-relevant', false, ['null']));\r\n  return col;\r\n};\r\nexport const initOneLane = () => {\r\n  const col : IColumnFilter = new ColumnFilter('OneLane', 'one_lane_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-line', false, ['  +   ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-twoway-noline', false, ['     ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-oneway', false, [' ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-unknown', false, ['   ']));\r\n  col.arrTypes.push(new FilterChecker('onelane-not-relevant', false, ['null']));\r\n  return col;\r\n};\r\nexport const initAccidentType = () => {\r\n  const col : IColumnFilter = new ColumnFilter('AccidentType', 'accident_type_hebrew', 0);\r\n  col.arrTypes.push(new FilterChecker('all', true, []));\r\n  col.arrTypes.push(new FilterChecker('hit-ped', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-side', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-front', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-front-rear', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-side-side', false, ['  ']));\r\n  col.arrTypes.push(new FilterChecker('hit-obstacle', false, ['   ']));\r\n  col.arrTypes.push(new FilterChecker('hit-turning-over', false, ['']));\r\n  col.arrTypes.push(new FilterChecker('hit-slip', false, ['']));\r\n  return col;\r\n};\r\n\r\nexport const initDataYreasUnfilterd = () => dataYearsUnfilterdInit;\r\n\r\nexport const initDataYreasfilterd = () => dataYearsfilterdInit;\r\n\r\nexport const initDataGrpBy1 = () => dataGrpBy1Init;\r\n\r\nexport const initDataGrpBy2 = () => dataGrp2Init;","import { observable } from \"mobx\"\r\n\r\nexport interface IGroupBy {\r\n  text: string;\r\n  value: string;\r\n  limit: number;\r\n}\r\n\r\nexport default class GroupBy implements IGroupBy {\r\n  @observable\r\n  text: string;\r\n  value: string;\r\n  limit: number;\r\n  constructor(text: string, value: string, limit: number = 0) {\r\n    this.text = text;\r\n    this.value = value;\r\n    this.limit = limit;\r\n  }\r\n}\r\n\r\nexport const initGroupByDict = (dictGroupBy: any) => {\r\n  dictGroupBy[\"Severity\"] = new GroupBy('Severity', \"injury_severity_hebrew\")\r\n  dictGroupBy[\"TypeInjured\"] = new GroupBy('TypeInjured', \"injured_type_hebrew\");\r\n  dictGroupBy[\"Vehicle\"] = new GroupBy('Vehicle', \"vehicle_vehicle_type_hebrew\");\r\n  dictGroupBy[\"Gender\"] = new GroupBy('Gender', \"sex_hebrew\");\r\n  dictGroupBy[\"Age\"] = new GroupBy('Age', \"age_group_hebrew\");\r\n  dictGroupBy[\"Year\"] = new GroupBy('Year', \"accident_year\");\r\n  //dictGroupBy[\"Month\"] = new GroupBy('Month', \"accident_month\");\r\n  dictGroupBy[\"DayNight\"] = new GroupBy('DayNight', \"day_night_hebrew\");\r\n  dictGroupBy[\"WeekDay\"] = new GroupBy('WeekDay', \"day_in_week_hebrew\");\r\n  dictGroupBy[\"RoadType\"] = new GroupBy('RoadType', \"road_type_hebrew\");\r\n  dictGroupBy[\"City\"] = new GroupBy('City', \"accident_yishuv_name\", 10);\r\n  dictGroupBy[\"Street\"] = new GroupBy('Street', \"street1_hebrew\", 10);\r\n  dictGroupBy[\"AccidentType\"] = new GroupBy('AccidentType', \"accident_type_hebrew\");\r\n  dictGroupBy[\"SpeedLimit\"] = new GroupBy('SpeedLimit', \"speed_limit_hebrew\");\r\n  dictGroupBy[\"RoadWidth\"] = new GroupBy('RoadWidth', \"road_width_hebrew\");\r\n  dictGroupBy[\"Separator\"] = new GroupBy('Separator', \"multi_lane_hebrew\");\r\n  dictGroupBy[\"OneLane\"] = new GroupBy('OneLane', \"one_lane_hebrew\");\r\n}\r\n\r\nexport interface IGroupBy2 {\r\n  text: string;\r\n  name: string;\r\n  vals: any;\r\n}\r\nexport class GroupBy2  implements IGroupBy2 {\r\n  @observable\r\n  text:string;\r\n  name: string;\r\n  vals: any;\r\n  constructor( text:string, name: string) {\r\n    this.text =  text;\r\n    this.name = name;\r\n    this.vals = {};\r\n  }\r\n  revTrnas = (key: string) => {\r\n    let res = this.vals[key].name;\r\n    return res;\r\n  }\r\n  fixStrcutTable = (data: any[]) => {\r\n    let res = data.map((x) => {\r\n      let arr = x.count.map((y: any) => {\r\n        let engVal = this.revTrnas(y.grp2)\r\n        return ('\"' + engVal + '\":' + y.count)\r\n      }).join(',')\r\n      let xId = x._id;\r\n      if (xId !== null && xId !== undefined)\r\n        xId = xId.replace('\"', '\\\\\"')\r\n      let sObject = `{\"_id\":\"${xId}\",${arr}}`\r\n      sObject = JSON.parse(sObject)\r\n      return (sObject)\r\n    });\r\n    //console.log(res)\r\n    return res;\r\n  }\r\n  getBars = () => {\r\n    //[{key:\"male\",color:\"#8884d8\"},{key:\"female\",color:\"#82ca9d\"}]\r\n    let res = Object.entries(this.vals).map(([key, x]: any[]) => { return ({ key: x.name, color: x.color }) })\r\n    return res;\r\n  }\r\n  getColumns= () => {\r\n    let res = Object.entries(this.vals).map(([key, x]: any[]) => { return (x.name) })\r\n    res.unshift('_id')\r\n    return res;\r\n  }\r\n}\r\n\r\n\r\nexport class GroupBy2Val {\r\n  name: string;\r\n  color: string;\r\n  constructor(name: string, color: string) {\r\n    this.name = name;\r\n    this.color = color;\r\n  }\r\n}\r\n\r\nexport const initGroup2Dict = (dict: any) => {\r\n  dict[\"Severity\"] = new GroupBy2(\"Severity\",\"injury_severity_hebrew\")\r\n  dict[\"Severity\"].vals[\"\"] = new GroupBy2Val(\"dead\", \"#8884D8\")\r\n  dict[\"Severity\"].vals[\" \"] = new GroupBy2Val(\"severly-injured\", \"#82CA9D\")\r\n\r\n  dict[\"Gender\"] = new GroupBy2(\"Gender\",\"sex_hebrew\");\r\n  dict[\"Gender\"].vals[\"\"] = new GroupBy2Val(\"male\", \"#8884D8\")\r\n  dict[\"Gender\"].vals[\"\"] = new GroupBy2Val(\"female\", \"#82CA9D\")\r\n\r\n  dict[\"RoadType\"] = new GroupBy2('RoadType', \"road_type_hebrew\");\r\n  dict[\"RoadType\"].vals[\" \"] = new GroupBy2Val(\"urban-junction\", \"#559E54\")\r\n  dict[\"RoadType\"].vals[\"  \"] = new GroupBy2Val(\"urban-road\", \"#305A30\")\r\n  dict[\"RoadType\"].vals[\"- \"] = new GroupBy2Val(\"non-urban-junction\", \"#1258DC\")\r\n  dict[\"RoadType\"].vals[\"-  \"] = new GroupBy2Val(\"non-urban-road\", \"#0A337F\")\r\n\r\n \r\n  dict[\"TypeInjured\"] = new GroupBy2(\"TypeInjured\",\"injured_type_hebrew\");\r\n  dict[\"TypeInjured\"].vals[\" \"] = new GroupBy2Val(\"pedestrian\", \"#82CA9D\")\r\n  dict[\"TypeInjured\"].vals[\" - \"] = new GroupBy2Val(\"cyclist-d\", \"#559E54\")\r\n  dict[\"TypeInjured\"].vals[\" -  ( )\"] = new GroupBy2Val(\"cyclist-p\", \"#559E54\")\r\n  dict[\"TypeInjured\"].vals[\" -   \"] = new GroupBy2Val(\"inj-unknown-d\", \"#305A30\")\r\n  dict[\"TypeInjured\"].vals[\" -   \"] = new GroupBy2Val(\"inj-unknown-p\", \"#305A30\")\r\n  dict[\"TypeInjured\"].vals[\" - \"] = new GroupBy2Val(\"motorcycle-d\", \"#1258DC\")\r\n  dict[\"TypeInjured\"].vals[\" -  ( )\"] = new GroupBy2Val(\"motorcycle-p\", \"#1258DC\")\r\n  dict[\"TypeInjured\"].vals[\" -   4  \"] = new GroupBy2Val(\"wheels4+-d\", \"#0A337F\")\r\n  dict[\"TypeInjured\"].vals[\" -   4  \"] = new GroupBy2Val(\"wheels4+-p\", \"#0A337F\")\r\n}\r\n\r\n\r\n","import $ from 'jquery';\r\n\r\n// /////\r\nexport default class CityService {\r\n  // get request using jsonp\r\n  getCityByNameHe(cityName:string, collback :(res:any[]) =>void) {\r\n    // \"http://localhost:5000/api/v1/city?name_he=\"\r\n    const settings = {\r\n      url: `/api/v1/city?name_he=${cityName}`,\r\n      method: 'GET',\r\n      headers: {},\r\n    };\r\n    $.ajax(settings).done((response:any[]) => {\r\n      // console.log(response)\r\n      collback(response);\r\n    });\r\n  }\r\n\r\n  getCitiesNames(lang:string, collback :(res:any[]) =>void) {\r\n    // \"http://localhost:5000/api/v1/city?name_he=\"\r\n    const settings = {\r\n      url: `/api/v1/city?lang=${lang}`,\r\n      method: 'GET',\r\n      headers: {},\r\n    };\r\n    $.ajax(settings).done((response:any[]) => {\r\n      // console.log(response)\r\n      collback(response);\r\n    });\r\n  }\r\n}\r\n","import Dexie from 'dexie';\r\n\r\nconst db = new Dexie('saftyData');\r\ndb.version(1).stores({\r\n  injuerd: 'id++,_id, accident_id, accident_year, accident_timestamp, sex_hebrew, accident_yishuv_name ,road_type_hebrew',\r\n});\r\n\r\nexport async function insertToDexie(data) {\r\n  // console.log(\"insertToDexie\")\r\n  // console.log(data)\r\n  await db.injuerd.bulkPut(data);\r\n  // testInsertDexie()\r\n}\r\n\r\nexport async function getFromDexie(arrFilters) {\r\n  let data;\r\n  if (arrFilters.length === 0) data = await db.injuerd.toArray();\r\n  else {\r\n    const years = arrFilters.shift();\r\n    let collection = await db.injuerd.where(years.filterName).between(years.startYear, years.endYear, true, true);\r\n    arrFilters.forEach((element) => {\r\n      collection = collection.and(((x) => {\r\n        if (element.values.length === 1) return x[element.filterName] === element.values[0];\r\n\r\n        let orFilter = false;\r\n        element.values.forEach((val) => orFilter = orFilter || x[element.filterName] === val);\r\n        return orFilter;\r\n      }));\r\n    });\r\n    data = await collection.toArray();\r\n  }\r\n  return data;\r\n}\r\n\r\n\r\n// var db1 = new Dexie('hellodb');\r\n// db1.version(1).stores({\r\n//     tasks: '++id,date,description,done'\r\n// });\r\n\r\n\r\n// export async function testInsertDexie() {\r\n//     var id = await db1.tasks.put({date: Date.now(), description: 'Test Dexie', done: 0});\r\n//     console.log(\"Got id \" + id);\r\n//     // Now lets add a bunch of tasks\r\n//     await db1.tasks.bulkPut([\r\n//         {date: Date.now(), description: 'Test Dexie bulkPut()', done: 1},\r\n//         {date: Date.now(), description: 'Finish testing Dexie bulkPut()', done: 1}\r\n//     ]);\r\n// }\r\n\r\n\r\nexport default db;\r\n","import {\r\n  observable, action, computed,\r\n} from 'mobx';\r\nimport { IColumnFilter } from './ColumnFilter';\r\nimport * as FC from './ColumnFilter';\r\nimport { IFilterChecker } from './FilterChecker';\r\nimport * as GroupBy from './GroupBy';\r\nimport RootStore from './RootStore';\r\nimport { fetchFilter, fetchGroupBy } from '../services/AccidentService';\r\nimport CityService from '../services/CityService';\r\nimport { insertToDexie, getFromDexie } from '../services/DexieInjuredService';\r\nimport { BBoxType } from './MapStore';\r\nimport Casualty from './Casualty';\r\n// import autorun  from \"mobx\"\r\n\r\nexport default class FilterStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n    this.injurySeverity = FC.initInjurySeverity();\r\n    this.setCasualtiesNames(this.injurySeverity);\r\n    this.dayNight = FC.initDayNight();\r\n    this.injTypes = FC.initInjTypes();\r\n    this.genderTypes = FC.initGenderTypes();\r\n    this.ageTypes = FC.initAgeTypes();\r\n    this.populationTypes = FC.initPopulationTypes();\r\n    this.accidentType = FC.initAccidentType();\r\n    this.vehicleType = FC.initVehicleTypes();\r\n    this.roadTypes = FC.initRoadTypes();\r\n    this.speedLimit = FC.initSpeedLimit();\r\n    this.roadWidth = FC.initRoadWidth();\r\n    this.separator = FC.initSeparator();\r\n    this.oneLane = FC.initOneLane();\r\n    GroupBy.initGroupByDict(this.groupByDict);\r\n    GroupBy.initGroup2Dict(this.group2Dict);\r\n    this.groupBy = this.groupByDict.TypeInjured;\r\n    this.groupBy2 = this.group2Dict.Gender;\r\n    // init data (on home page)\r\n    this.dataByYears = FC.initDataYreasUnfilterd();\r\n    this.dataFilterdByYears = FC.initDataYreasfilterd();\r\n    this.dataFilterd = FC.initDataGrpBy1();\r\n    this.dataGroupby2 = FC.initDataGrpBy2();\r\n    this.appInitialized = false;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  @observable\r\n  currentPage: string ='home';\r\n\r\n  @action\r\n  setCurrentPage = (pageType: string) => {\r\n    this.currentPage = pageType;\r\n  }\r\n\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Severity\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  injurySeverity: IColumnFilter\r\n\r\n  @action\r\n  updateInjurySeverity = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.injurySeverity, aType, val);\r\n  }\r\n\r\n  @computed get isValidSeverity() {\r\n    const res = !this.injurySeverity.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  @observable\r\n  casualtiesNames:string = 'casualties';\r\n\r\n  @action\r\n  setCasualtiesNames = (injurySeverity:IColumnFilter) => {\r\n    let res = 'casualties';\r\n    const deadChecker : IFilterChecker = injurySeverity.arrTypes[0];\r\n    const sevIngChecker : IFilterChecker = injurySeverity.arrTypes[1];\r\n    if (deadChecker.checked && !sevIngChecker.checked) res = 'killed';\r\n    else if (!deadChecker.checked && sevIngChecker.checked) res = 'severely-injured';\r\n    this.casualtiesNames = res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // where\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  isMultipleCities: boolean = false;\r\n\r\n  @action\r\n  setIsMultipleCities = (isMulti :boolean) => {\r\n    this.isMultipleCities = isMulti;\r\n  }\r\n\r\n\r\n  @observable\r\n  cities: string[] = [];\r\n\r\n  @action\r\n  updateCities = (names: string[]) => {\r\n    this.cities = names;\r\n    if (this.cities.length === 0) {\r\n      this.streets = [];\r\n    }\r\n  }\r\n\r\n  @observable\r\n  cityResult: string = '';\r\n\r\n  // @computed get cityResult() {\r\n  //   let res = (this.cities.length >= 1) ? this.cities[0] : '';\r\n  //   if (window.location.pathname === '/city' && this.onInitCityPage && res === '')\r\n  //   {\r\n  //     res = '  -';\r\n  //     this.onInitCityPage = false;\r\n  //   }\r\n  //   return res;\r\n  // };\r\n\r\n  // @observable\r\n  // onInitCityPage = true;\r\n\r\n  // setAddressBar = autorun(() => {\r\n  //   if (window.history.pushState && window.location.pathname === '/city') {\r\n  //     const newurl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?name=${this.cityResult}`;\r\n  //     window.history.pushState({ path: newurl }, '', newurl);\r\n  //   }\r\n  // });\r\n\r\n  // submitCityFilter = autorun(() => {\r\n  //   if (window.location.pathname === '/city' && this.cityResult !== '') {\r\n  //     this.submitFilter();\r\n  //   }\r\n  // });\r\n\r\n  @observable\r\n  streets: string[] = [];\r\n\r\n  @action\r\n  updateStreets = (names: string) => {\r\n    this.streets = names.split(',');\r\n  }\r\n\r\n  @observable\r\n  roadSegment: string[] = [];\r\n\r\n  @action\r\n  updateRoadSegment = (names: string) => {\r\n    this.roadSegment = names.split(',');\r\n  }\r\n\r\n  @observable\r\n  roadTypes: IColumnFilter;\r\n\r\n  @action\r\n  updateRoadType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.roadTypes, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhere() {\r\n    const res = !this.roadTypes.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // when\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  startYear: number = 2015;\r\n\r\n  @action\r\n  setStartYear = (year:string) => {\r\n    this.startYear = parseInt(year);\r\n  }\r\n\r\n  @observable\r\n  endYear: number = 2019;\r\n\r\n  @action\r\n  setEndYear = (year:string) => {\r\n    this.endYear = parseInt(year);\r\n  }\r\n\r\n  @observable\r\n  dayNight: IColumnFilter;\r\n\r\n  @action\r\n  updateDayNight = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.dayNight, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhen() {\r\n    const res = !this.dayNight.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // who\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  genderTypes: IColumnFilter\r\n\r\n  @action\r\n  updateGenderType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.genderTypes, aType, val);\r\n  }\r\n\r\n  @observable\r\n  ageTypes: IColumnFilter;\r\n\r\n  @action\r\n  updateAgeType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.ageTypes, aType, val);\r\n  }\r\n\r\n  @observable\r\n  populationTypes: IColumnFilter;\r\n\r\n  @action\r\n  updatePopulationType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.populationTypes, aType, val);\r\n  }\r\n\r\n  // injTypes\r\n  @observable\r\n  injTypes: IColumnFilter;\r\n\r\n  @action\r\n  updateInjuerdType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.injTypes, aType, val);\r\n  }\r\n\r\n  @computed get isValidWho() {\r\n    const res = !this.injTypes.isAllValsFalse && !this.genderTypes.isAllValsFalse\r\n    && !this.ageTypes.isAllValsFalse && !this.populationTypes.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  @observable\r\n  accidentType: IColumnFilter;\r\n\r\n  @action\r\n  updateAccidentType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.accidentType, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhat() {\r\n    const res = !this.accidentType.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What Vehicle\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  vehicleType: IColumnFilter;\r\n\r\n  @action\r\n  updateVehicleType = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.vehicleType, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhatVehicle() {\r\n    const res = !this.vehicleType.isAllValsFalse;\r\n    return res;\r\n  }\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // What Road\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  @observable\r\n  speedLimit: IColumnFilter;\r\n\r\n  updateSpeedLimit = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.speedLimit, aType, val);\r\n  }\r\n\r\n  @observable\r\n  roadWidth: IColumnFilter;\r\n\r\n  @action\r\n  updateRoadWidth = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.roadWidth, aType, val);\r\n  }\r\n\r\n  @observable\r\n  separator: IColumnFilter;\r\n\r\n  @action\r\n  updateSeparator = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.separator, aType, val);\r\n  }\r\n\r\n  @observable\r\n  oneLane: IColumnFilter;\r\n\r\n  @action\r\n  updateOneLane = (aType: number, val: boolean) => {\r\n    this.updateFilters(this.oneLane, aType, val);\r\n  }\r\n\r\n  @computed get isValidWhatRoad() {\r\n    const res = !this.speedLimit.isAllValsFalse && !this.roadWidth.isAllValsFalse\r\n    && !this.separator.isAllValsFalse && !this.oneLane.isAllValsFalse;\r\n    return res;\r\n  }\r\n\r\n  // ////////////////////////////////////////////////////////////////////////////////////////////\r\n  // data\r\n  // ////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  dataAllInjuries: Casualty[] = [];\r\n\r\n  @action\r\n  updateAllInjuries = (data: Casualty[]) => {\r\n    // console.log(\"updateAllInjuries \",data.length)\r\n    this.setMarkersLoadStep(2);\r\n    this.dataAllInjuries = data;\r\n    this.rootStore.mapStore.setBounds(data, this.cities);\r\n    if (this.rootStore.mapStore.bboxType === BBoxType.LOCAL_BBOX) {\r\n      this.rootStore.mapStore.getMarkersInLocalBBox(0.1);\r\n    }\r\n  }\r\n\r\n  @observable\r\n  dataMarkersLean: Casualty[] = []\r\n\r\n  @action\r\n  updateDataMarkersLean = (data: Casualty[]) => {\r\n    // console.log(\"updateDataMarkersLean \",data.length)\r\n    this.setMarkersLoadStep(1);\r\n    this.dataMarkersLean = data;\r\n  }\r\n\r\n  // casualties groupd by yeras, filterd only by injurySeverity\r\n  @observable\r\n  dataByYears: any[] = []\r\n\r\n  // casualties groupd by yeras, filterd on main filter\r\n  @observable\r\n  dataFilterdByYears: any[] = []\r\n\r\n  // casualties groupd by some group, filterd on main filter\r\n  @observable\r\n  dataFilterd: any[] = []\r\n\r\n  // casualties groupd by 2 groups, filterd on main filter\r\n  @observable\r\n  dataGroupby2: any[] = []\r\n\r\n  @observable\r\n  isLoading: boolean = false;\r\n\r\n  @computed get isValidAllFilters() {\r\n    const res = this.isValidSeverity && this.isValidWhen && this.isValidWho\r\n    && this.isValidWhere && this.isValidWhat && this.isValidWhatVehicle && this.isValidWhatRoad;\r\n    return res;\r\n  }\r\n\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // group by\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  groupBy: GroupBy.default;\r\n\r\n  @action\r\n  updateGroupby = (key: string) => {\r\n    this.groupBy = this.groupByDict[key];\r\n    this.submitfilterdGroup(this.groupBy);\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n  }\r\n\r\n  @observable\r\n  groupByDict: any = {}\r\n\r\n  @action\r\n  submitGroupByYears = () => {\r\n    const filtermatch = this.getfilterBySeverityAndCity();\r\n    const filter = this.getFilterGroupBy(filtermatch, 'accident_year');\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined) this.dataByYears = data;\r\n      });\r\n  }\r\n\r\n  @action\r\n  submitfilterdGroupByYears = () => {\r\n    const filtermatch = this.getFilter(null);\r\n    const filter = this.getFilterGroupBy(filtermatch, 'accident_year');\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined) this.dataFilterdByYears = data;\r\n      });\r\n  }\r\n\r\n  @action\r\n  submitfilterdGroup = (aGroupBy: GroupBy.default) => {\r\n    const filtermatch = this.getFilter(null);\r\n    const filter = this.getFilterGroupBy(filtermatch, aGroupBy.value, '', aGroupBy.limit);\r\n    // console.log(filter)\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined) this.dataFilterd = data;\r\n      });\r\n  }\r\n\r\n  @action\r\n  submitfilterdGroup2 = (aGroupBy: GroupBy.default, groupName2: string) => {\r\n    const filtermatch = this.getFilter(null);\r\n    const filter = this.getFilterGroupBy(filtermatch, aGroupBy.value, groupName2, aGroupBy.limit);\r\n    // console.log(filter)\r\n    fetchGroupBy(filter)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== undefined && data.length > 0) {\r\n          const fixData = this.groupBy2.fixStrcutTable(data);\r\n          this.dataGroupby2 = fixData;\r\n        }\r\n      });\r\n  }\r\n\r\n  @observable\r\n  groupBy2: GroupBy.GroupBy2;\r\n\r\n  @action\r\n  updateGroupBy2 = (key: string) => {\r\n    this.groupBy2 = this.group2Dict[key];\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n  }\r\n\r\n  @observable\r\n  group2Dict: any = {}\r\n\r\n\r\n  getFilterGroupBy = (filterMatch: string, groupName: string, groupName2: string = '', limit: number = 0) => {\r\n    let filter = `${'['\r\n      + '{\"$match\": '}${filterMatch}}`;\r\n    if (groupName2 === '') filter += `,{\"$group\": { \"_id\": \"$${groupName}\", \"count\": { \"$sum\": 1 }}}`;\r\n    else {\r\n      filter += `, { \"$match\" : { \"${groupName2}\" : { \"$exists\" : true, \"$ne\" : null}}}`;\r\n      const grpids = `{ \"grp1\": \"$${groupName}\", \"grp2\": \"$${groupName2}\"}`;\r\n      filter += `,{\"$group\": { \"_id\":${grpids}, \"count\": { \"$sum\": 1 }}}`;\r\n      filter += ',{\"$group\": { \"_id\": \"$_id.grp1\" , \"count\": { \"$push\": {\"grp2\" : \"$_id.grp2\",\"count\" : \"$count\" } }}}';\r\n    }\r\n    if (limit === 0) filter += ',{\"$sort\": {\"_id\": 1}}';\r\n    else {\r\n      filter += `${',{\"$sort\": {\"count\": -1}}'\r\n        + ',{\"$limit\": '}${limit}}`;\r\n    }\r\n    filter += ']';\r\n    return filter;\r\n  }\r\n\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // filters actions\r\n  // //////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  isUse2StepsMarkers: boolean = false;\r\n\r\n  @observable\r\n  markersLoadStep: number = 1;\r\n\r\n  @action\r\n  setMarkersLoadStep = (step: number) => {\r\n    if (this.isUse2StepsMarkers) this.markersLoadStep = step;\r\n  }\r\n\r\n  @action\r\n  submitFilter = () => {\r\n    // this.setMarkersLoadStep(0);\r\n    if (this.useLocalDb === 2) {\r\n      this.submitMainDataFilterLocalDb();\r\n    } else {\r\n      if (this.rootStore.mapStore.bboxType === BBoxType.SERVER_BBOX) {\r\n        this.rootStore.mapStore.submintGetMarkersBBox();\r\n      }\r\n      if (this.isUse2StepsMarkers) this.submintGetMarkerFirstStep();\r\n      this.submintMainDataFilter();\r\n    }\r\n    this.submitCityNameAndLocation();\r\n    this.submitGroupByYears();\r\n    this.submitfilterdGroupByYears();\r\n    this.submitfilterdGroup(this.groupBy);\r\n    this.submitfilterdGroup2(this.groupBy, this.groupBy2.name);\r\n    this.setCasualtiesNames(this.injurySeverity);\r\n    const lang = this.rootStore.uiStore.language;\r\n    if (this.currentPage === 'city') this.rootStore.imageStore.getImagesByPlace(this.cityResult, lang);\r\n  }\r\n\r\n  submintMainDataFilter = () => {\r\n    this.isLoading = true;\r\n    const filter = this.getFilter(null);\r\n    this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n    // console.log(filter)\r\n    fetchFilter(filter, 'main')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateAllInjuries(data);\r\n          // write Data to local db\r\n          if (this.useLocalDb === 1) insertToDexie(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  submintGetMarkerFirstStep = () => {\r\n    const filter = this.getFilter(null);\r\n    fetchFilter(filter, 'latlon')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateDataMarkersLean(data);\r\n        }\r\n      });\r\n  }\r\n\r\n  submitCityNameAndLocation = () => {\r\n    if (this.cities.length >= 1) {\r\n      const city = this.cities[0];\r\n      const srvCity = new CityService();\r\n      srvCity.getCityByNameHe(city, this.rootStore.mapStore.updateMapCenterByCity);\r\n      const index = 0;\r\n      this.cityResult = this.cities[index];\r\n    } else this.cityResult = '';\r\n  }\r\n\r\n  getFilter = (bounds: any, useBounds: boolean = false) => {\r\n    let filter = '{\"$and\" : [';\r\n    filter += `{\"accident_year\":  { \"$gte\" : \"${this.startYear}\",\"$lte\": \"${this.endYear}\"}}`;\r\n    filter += this.getMultiplefilter(this.injurySeverity);\r\n    filter += this.getfilterCity();\r\n    if (useBounds && bounds != null) filter += this.getfilterBounds(bounds);\r\n    filter += this.getMultiplefilter(this.dayNight);\r\n    filter += this.getFilterStreets();\r\n    filter += this.getFilterFromArray(this.roadSegment, 'road_segment_name');\r\n    filter += this.getMultiplefilter(this.injTypes);\r\n    filter += this.getMultiplefilter(this.genderTypes);\r\n    filter += this.getMultiplefilter(this.ageTypes);\r\n    filter += this.getMultiplefilter(this.populationTypes);\r\n    filter += this.getMultiplefilter(this.accidentType);\r\n    filter += this.getMultiplefilter(this.vehicleType);\r\n    filter += this.getMultiplefilter(this.roadTypes);\r\n    filter += this.getMultiplefilter(this.speedLimit);\r\n    filter += this.getMultiplefilter(this.roadWidth);\r\n    filter += this.getMultiplefilter(this.separator);\r\n    filter += this.getMultiplefilter(this.oneLane);\r\n    filter += ']}';\r\n    return filter;\r\n  }\r\n\r\n  @action\r\n  updateFilters = (colFilter: IColumnFilter, aType: number, val: boolean) => {\r\n    colFilter.updateFilter(aType, val);\r\n    // if (colFilter.allTypesOption === -1) colFilter.arrTypes[aType].checked = val;\r\n    // else if (aType === colFilter.allTypesOption) {\r\n    //   colFilter.arrTypes\r\n    //     .forEach((x, index) => x.checked = (index === colFilter.allTypesOption) ? val : !val);\r\n    // } else {\r\n    //   colFilter.arrTypes[colFilter.allTypesOption].checked = false;\r\n    //   colFilter.arrTypes[aType].checked = val;\r\n    // }\r\n  }\r\n\r\n  getfilterBounds = (mapBounds: L.LatLngBounds) => {\r\n    let filter: string = '';\r\n    filter += `,{\"latitude\":  { \"$gte\" : \"${mapBounds.getSouth()}\",\"$lte\": \"${mapBounds.getNorth()}\"}}`;\r\n    filter += `,{\"longitude\":  { \"$gte\" : \"${mapBounds.getWest()}\",\"$lte\": \"${mapBounds.getEast()}\"}}`;\r\n    return filter;\r\n  }\r\n\r\n  getfilterBySeverityAndCity = () => {\r\n    let filter = '{\"$and\" : [';\r\n    filter += '{\"accident_year\":{\"$gte\":\"2015\"}}';\r\n    filter += this.getMultiplefilter(this.injurySeverity);\r\n    filter += this.getfilterCity();\r\n    filter += ']}';\r\n    return filter;\r\n  }\r\n\r\n  getfilterCity = () => {\r\n    let filter: string = '';\r\n    if (this.cities.length > 0) {\r\n      filter += ',{\"$or\": [';\r\n      filter += this.cities.map((x: string) => `{\"accident_yishuv_name\" : \"${x}\"}`).join(',');\r\n      filter += ']}';\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  getFilterStreets = () => {\r\n    let filter: string = '';\r\n    if (this.streets.length > 0 && this.streets[0] !== '') {\r\n      filter += ',{\"$or\": [';\r\n      filter += this.streets.map((x: string) => `{\"street1_hebrew\" : \"${x.trim()}\"}`).join(',');\r\n      filter += ',';\r\n      filter += this.streets.map((x: string) => `{\"street2_hebrew\" : \"${x.trim()}\"}`).join(',');\r\n      filter += ']}';\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  getFilterFromArray = (arr: string[], filterName: string) => {\r\n    let filter: string = '';\r\n    if (arr.length > 0 && arr[0] !== '') {\r\n      filter += ',{\"$or\": [';\r\n      filter += arr.map((x: string) => `{\"${filterName}\" : \"${x.trim()}\"}`).join(',');\r\n      filter += ']}';\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  getMultiplefilter = (colFilter: IColumnFilter) => {\r\n    let filter: string = '';\r\n    let allChecked: boolean = true;\r\n    let arrfilter: string[] = [];\r\n    if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) allChecked = true;\r\n    else {\r\n      // in case there is allTypesOption , it want be copied to arrfilter\r\n      // as it is not checked\r\n      const iterator = colFilter.arrTypes.values();\r\n      for (const filterCheck of iterator) {\r\n        if (filterCheck.checked) {\r\n          arrfilter = [...arrfilter, ...filterCheck.filters];\r\n        } else {\r\n          allChecked = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (allChecked) filter = '';\r\n    else {\r\n      filter += ',{\"$or\": [';\r\n      filter += arrfilter.map((x: string) => {\r\n        if (x === 'null') return `{\"${colFilter.dbColName}\":${null}}`;\r\n\r\n        const xSafe = x.replace('\"', '\\\\\"');\r\n        return `{\"${colFilter.dbColName}\" : \"${xSafe}\"}`;\r\n      }).join(',');\r\n      filter += ']}';\r\n    }\r\n    return filter;\r\n  }\r\n\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  // local db filters - idb using Dexie.js\r\n  // ///////////////////////////////////////////////////////////////////////////////////////////////\r\n  @observable\r\n  useLocalDb = 0;\r\n\r\n  submitMainDataFilterLocalDb = () => {\r\n    this.isLoading = true;\r\n    const arrFilters = this.getFilterIDB();\r\n    this.rootStore.mapStore.updateIsSetBounds(this.cities, this.roadSegment);\r\n    // console.log(arrFilters);\r\n    getFromDexie(arrFilters)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateAllInjuries(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  submintGetMarkersBBoxIdb = (mapBounds: L.LatLngBounds) => {\r\n    const arrFilters = this.getFilterBboxIDB(mapBounds);\r\n    getFromDexie(arrFilters)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.rootStore.mapStore.updateDataMarkersInBounds(data);\r\n        }\r\n      });\r\n  }\r\n\r\n  getFilterIDB = () => {\r\n    const arrFilters: any[] = [];\r\n    const years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() };\r\n    arrFilters.push(years);\r\n    this.getfilterCityIDB(arrFilters);\r\n    this.getFilterStreetsIDB(arrFilters);\r\n    this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n    this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n    this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n    this.getMultiplefilterIDB(arrFilters, this.separator);\r\n    this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n    return arrFilters;\r\n  }\r\n\r\n  getFilterBboxIDB = (bounds: L.LatLngBounds) => {\r\n    const arrFilters: any[] = [];\r\n    const bbox = { filterName: 'bbox', p1: bounds.getSouthWest, p2: bounds.getNorthEast };\r\n    arrFilters.push(bbox);\r\n    const years = { filterName: 'accident_year', startYear: this.startYear.toString(), endYear: this.endYear.toString() };\r\n    arrFilters.push(years);\r\n    this.getfilterCityIDB(arrFilters);\r\n    this.getFilterStreetsIDB(arrFilters);\r\n    this.getMultiplefilterIDB(arrFilters, this.dayNight);\r\n    this.getFilterFromArrayIDb(arrFilters, 'road_segment_name', this.roadSegment);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.injTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.genderTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.ageTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.populationTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.accidentType);\r\n    this.getMultiplefilterIDB(arrFilters, this.vehicleType);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadTypes);\r\n    this.getMultiplefilterIDB(arrFilters, this.speedLimit);\r\n    this.getMultiplefilterIDB(arrFilters, this.roadWidth);\r\n    this.getMultiplefilterIDB(arrFilters, this.separator);\r\n    this.getMultiplefilterIDB(arrFilters, this.oneLane);\r\n    return arrFilters;\r\n  }\r\n\r\n  getMultiplefilterIDB = (arrFilters: any[], colFilter: IColumnFilter) => {\r\n    if (colFilter.allTypesOption > -1 && colFilter.arrTypes[colFilter.allTypesOption].checked) {\r\n      return;\r\n    }\r\n    let allChecked: boolean = true;\r\n    let arrfilter: string[] = [];\r\n    const iterator = colFilter.arrTypes.values();\r\n    for (const filterCheck of iterator) {\r\n      if (filterCheck.checked) {\r\n        arrfilter = [...arrfilter, ...filterCheck.filters];\r\n      } else {\r\n        allChecked = false;\r\n      }\r\n    }\r\n    if (!allChecked) {\r\n      const filterVals = arrfilter.map((x: string) => {\r\n        if (x === 'null') return null;\r\n        return x;\r\n      });\r\n      const filter = { filterName: colFilter.dbColName, values: filterVals };\r\n      arrFilters.push(filter);\r\n    }\r\n  }\r\n\r\n  getfilterCityIDB = (arrFilters: any[]) => {\r\n    if (this.cities.length > 0) {\r\n      const filter = { filterName: 'accident_yishuv_name', values: this.cities };\r\n      arrFilters.push(filter);\r\n    }\r\n  }\r\n\r\n  getFilterStreetsIDB = (arrFilters: any[]) => {\r\n    if (this.streets.length > 0 && this.streets[0] !== '') {\r\n      const filter1 = { filterName: 'street1_hebrew', values: this.streets.map((x: string) => x.trim()) };\r\n      arrFilters.push(filter1);\r\n      // const filter2 = { filterName: \"street2_hebrew\", values: this.streets.map((x: string) => {x.trim()}) }\r\n      // arrFilters.push(filter2)\r\n    }\r\n  }\r\n\r\n  getFilterFromArrayIDb = (arrFilters: any[], filterName: string, arr: string[]) => {\r\n    if (arr.length > 0 && arr[0] !== '') {\r\n      const filter = { filterName, values: arr.map((x: string) => x.trim()) };\r\n      arrFilters.push(filter);\r\n    }\r\n  }\r\n}\r\n\r\n// autorun(() =>{\r\n//     console.log(store.todos[0])\r\n//     console.log(store.filter)\r\n// })\r\n\r\n// export default store\r\n","import { observable, action, reaction } from 'mobx';\r\nimport i18n from '../i18n';\r\nimport RootStore from './RootStore';\r\n// import autorun  from \"mobx\"\r\n\r\nexport default class UiStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n    this.initLang();\r\n    this.appInitialized = false;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  // ////////////////////////////////////////////\r\n  @observable\r\n  language: string = 'he'\r\n\r\n  @action\r\n  updateLanguage = (lang: string) => {\r\n    this.language = lang;\r\n    localStorage.setItem('lang', JSON.stringify(lang));\r\n  }\r\n\r\n  reactionChangeLang = reaction(\r\n    () => this.language,\r\n    (locale) => {\r\n      i18n.changeLanguage(locale);\r\n    },\r\n  )\r\n\r\n  initLang = () => {\r\n    try {\r\n      const slang = localStorage.getItem('lang');\r\n      if (slang !== null) {\r\n        const lang = JSON.parse(slang);\r\n        this.updateLanguage(lang);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n}\r\n","import IimageEntity from '../stores/ImageEntity';\r\n\r\nexport const fetchListImgByTag = async (tag: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = (lang === '') ? `/api/v1/img/tags/${tag}` : `/api/v1/img/tags/${lang}/${tag}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\nexport const fetchListImgByPlace = async (place: string, lang: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/place/${lang}/${place}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const uploadImg = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  if (image.file === undefined) return [];\r\n  const formData = new FormData();\r\n  formData.append('titlehe', image.titlehe);\r\n  formData.append('texthe', image.texthe);\r\n  formData.append('image', image.file);\r\n  formData.append('tags', image.tags);\r\n  formData.append('place', image.place);\r\n  if (image.index !== undefined) formData.append('index', image.index?.toString());\r\n  const url = '/api/v1/img/';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    body: formData,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const updateImgProps = async (image: IimageEntity):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/img/props';\r\n  const response = await fetch(url, {\r\n    method: 'PUT',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: JSON.stringify(image),\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport const fetchImg = async (fileName: string):\r\n  Promise<any| undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/img/${fileName}`;\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response; // parses JSON response into native JavaScript objects\r\n};\r\n\r\nexport default fetchImg;\r\n","import { observable, action } from 'mobx';\r\nimport RootStore from './RootStore';\r\nimport {\r\n  fetchListImgByTag, fetchListImgByPlace, updateImgProps, uploadImg,\r\n} from '../services/ImageService';\r\nimport IimageEntity from './ImageEntity';\r\n\r\nexport default class ImageStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  @observable\r\n  imageList: IimageEntity[] = [];\r\n\r\n  @action\r\n  setImageList = (data: IimageEntity[]) => {\r\n    this.imageList = data;\r\n    if (this.imageList.length > 0) this.setCurrImage(this.imageList[0]);\r\n  }\r\n\r\n  @observable\r\n  isLoading: boolean = false;\r\n\r\n  @observable\r\n  currTag: string = '';\r\n\r\n  @action\r\n  setCurrTag = (tag: string) => {\r\n    this.currTag = tag;\r\n    const lang = this.rootStore.uiStore.language;\r\n    this.getImagesByTag(tag, lang);\r\n  }\r\n\r\n  @observable\r\n  currImage: IimageEntity| null = null;\r\n\r\n  @action\r\n  setCurrImage = (image: IimageEntity) => {\r\n    this.currImage = image;\r\n  }\r\n\r\n  @observable\r\n  hideDescription = false;\r\n\r\n  @action\r\n  toggleHideDescription = () => {\r\n    this.hideDescription = !this.hideDescription;\r\n    if (this.hideDescription) {\r\n      document.documentElement.style.setProperty('--image-gallery-description-visable', 'none');\r\n    } else document.documentElement.style.setProperty('--image-gallery-description-visable', 'inherit');\r\n  }\r\n\r\n  setCurrImageVal= <T extends keyof IimageEntity, K extends IimageEntity[T]> (valName: T, val: K) => {\r\n    if (this.currImage !== null) this.currImage[valName] = val;\r\n  }\r\n\r\n  submitImageFile = () => {\r\n    if (this.currImage !== null) {\r\n      // console.log(tags);\r\n      if (this.currImage._id === 0 && this.currImage.file !== undefined) {\r\n        uploadImg(this.currImage);\r\n      } else updateImgProps(this.currImage);\r\n    }\r\n  };\r\n\r\n  getImages = (type :string) => {\r\n    const lang = this.rootStore.uiStore.language;\r\n    if (type === 'city') {\r\n      const city = this.rootStore.filterStore.cityResult;\r\n      this.getImagesByPlace(city, lang);\r\n    } else {\r\n      this.getImagesByTag(this.currTag, lang);\r\n    }\r\n  }\r\n\r\n  getImagesByTag = (tag :string, lang: string) => {\r\n    this.isLoading = true;\r\n    fetchListImgByTag(tag, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  getImagesByPlace = (place :string, lang: string) => {\r\n    // this.isLoading = true;\r\n    fetchListImgByPlace(place, lang)\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.setImageList(data);\r\n        }\r\n        // this.isLoading = false;\r\n      });\r\n  }\r\n}\r\n","// https://mobx-react.js.org/recipes-context\r\nimport React from 'react'\r\nimport RootStore from './RootStore';\r\n\r\nexport const store = new RootStore();\r\nexport const StoreContext = React.createContext(store);\r\nexport const useStore = (): RootStore => {\r\n  const store = React.useContext(StoreContext);\r\n  if (!store) {\r\n    // this is especially useful in TypeScript so you don't need to be checking for null all the time\r\n    throw new Error('You have forgot to use StoreProvider, shame on you.')\r\n  }\r\n  return store\r\n};\r\n\r\n/* // see: https://facebook.github.io/create-react-app/docs/adding-custom-environment-variables\r\nif(process.env.NODE_ENV !== 'production') {\r\n  // @ts-ignore\r\n  window['store'] = store;\r\n} */","import FilterStore from './FilterStore';\r\nimport UiStore from './UiStore';\r\nimport MapStore from './MapStore';\r\nimport ImageStore from './ImageStore'\r\n\r\nexport default class RootStore {\r\n    appInitialized = false;\r\n\r\n    constructor() {\r\n      this.uiStore = new UiStore(this);\r\n      this.mapStore = new MapStore(this);\r\n      this.filterStore = new FilterStore(this);\r\n      this.imageStore = new ImageStore(this);\r\n    }\r\n\r\n    uiStore: UiStore;\r\n\r\n    mapStore: MapStore;\r\n\r\n    filterStore: FilterStore;\r\n\r\n    imageStore: ImageStore;\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAOUlEQVR4Ae3WgQUAMAwEwI6WzTL6txsEiOKOB+CJJweAQZLOnj4ThWBh9vXSSymzH/TnJwPvh0IAXORfNuG7KzwXAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\n// @ts-ignore\r\nimport { Typeahead } from 'react-bootstrap-typeahead';\r\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport citisNamesHeb from '../../assets/cities_names_heb.json';\r\n\r\ninterface IProps {\r\n    isMultiple?: boolean\r\n}\r\n\r\nconst CitySelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { filterStore } = useStore();\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Group controlId=\"exampleForm.ControlCity\">\r\n      <Form.Label className=\"filterLable\">\r\n        {t('City')}\r\n:\r\n      </Form.Label>\r\n      <Typeahead\r\n        id=\"typeaheadCity\"\r\n                // defaultSelected={[store.city]}\r\n        onChange={(selected: string[]) => {\r\n          filterStore.updateCities(selected);\r\n        }}\r\n        options={citisNamesHeb}\r\n        multiple={isMultiple}\r\n        selected={filterStore.cities}\r\n      />\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default CitySelector;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {}\r\nconst StreetSelector: React.FC<IProps> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { t } = useTranslation();\r\n  if (filterStore.cities.length > 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlStreet\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('Street')}\r\n:\r\n        </Form.Label>\r\n        <Form.Control type=\"input\" placeholder=\"\" value={filterStore.streets.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { filterStore.updateStreets(e.target.value); }} />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default StreetSelector;\r\n","\r\nimport React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n    isMultiple?: boolean\r\n}\r\nconst RoadSegmentSelector: React.FC<IProps> = observer(({ isMultiple = false }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { cities, roadSegment, updateRoadSegment } = filterStore;\r\n  if (cities.length === 0) {\r\n    return (\r\n      <Form.Group controlId=\"exampleForm.ControlRoadSegment\">\r\n        <Form.Label className=\"filterLable\">\r\n          {t('RoadSegment')}\r\n:\r\n        </Form.Label>\r\n        <Form.Control type=\"input\" placeholder=\"\" value={roadSegment.toString()} onChange={(e: ChangeEvent<HTMLInputElement>) => { updateRoadSegment(e.target.value); }} />\r\n      </Form.Group>\r\n\r\n    );\r\n  }\r\n  return null;\r\n});\r\nexport default RoadSegmentSelector;\r\n","\r\nimport React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\ninterface IProps {\r\n    label: string,\r\n    group: string,\r\n    id:number,\r\n    checked: boolean,\r\n    onChange: (e: ChangeEvent<HTMLInputElement>) => any\r\n  }\r\nconst Checkbox: React.FC<IProps> = ({\r\n  group, label, id, checked, onChange,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Form.Check inline label={t(label)} type=\"checkbox\" id={`cbox${group}${id}`} checked={checked} onChange={onChange} />\r\n  );\r\n};\r\nexport default Checkbox;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Checkbox from '../atoms/Checkbox';\r\nimport { IColumnFilter } from '../../stores/ColumnFilter';\r\n\r\ninterface IProps {\r\n  formName: string,\r\n  colFilter : IColumnFilter,\r\n  onChange: (aType: number, val: boolean) => void\r\n}\r\n\r\nconst GroupCheckbox: React.FC<IProps> = observer(({ formName, colFilter, onChange }) => {\r\n  const styleFeedback = {\r\n    marginTop: '.25rem',\r\n    fontSize: '80%',\r\n    color: '#dc3545',\r\n  };\r\n  const { t } = useTranslation();\r\n  const { isAllValsFalse, name, arrTypes } = colFilter;\r\n  const onGroupChange = (aType: number, checked: boolean) => {\r\n    // checkValid(checked)\r\n    onChange(aType, checked);\r\n  };\r\n  const feedback = (\r\n    <div style={styleFeedback}>\r\n      {' '}\r\n      {t('check_one_checkbox')}\r\n    </div>\r\n  );\r\n  const isvalid = (isAllValsFalse) ? feedback : null;\r\n\r\n  return (\r\n    <Form.Group controlId={`${formName}.Control${name}`}>\r\n      <Form.Label className=\"filterLable\">\r\n        {t(name)}\r\n:\r\n      </Form.Label>\r\n      {arrTypes.map((fChecker, index) => (\r\n        <Checkbox\r\n          key={fChecker.label}\r\n          label={fChecker.label}\r\n          group={colFilter.name}\r\n          id={index}\r\n          checked={fChecker.checked}\r\n          onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n            onGroupChange(index, e.target.checked);\r\n          }}\r\n        />\r\n      ))}\r\n      {isvalid}\r\n    </Form.Group>\r\n  );\r\n});\r\nexport default GroupCheckbox;\r\n","import React, { ChangeEvent } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Card from 'react-bootstrap/Card';\r\n// @ts-ignore\r\nimport CitySelector from '../molecules/CitySelector';\r\nimport StreetSelector from '../molecules/StreetSelector';\r\nimport RoadSegmentSelector from '../molecules/RoadSegmentSelector';\r\nimport GroupCheckbox from '../molecules/GroupCheckBox';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n  activeCardKey: number\r\n}\r\nconst STYLE_TOGGLE_WARNING = {\r\n  color: '#dc3545',\r\n};\r\nconst STYLE_TOGGLE_NORMAL = {\r\n  color: '#007bff',\r\n};\r\n\r\nconst FilterRequest: React.FC<IProps> = observer(({ activeCardKey = 0 }) => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    injurySeverity, updateInjurySeverity, isLoading, isValidAllFilters,\r\n  } = filterStore;\r\n  return (\r\n    <Form>\r\n      <Accordion defaultActiveKey={activeCardKey.toString()}>\r\n        <CardFilterWhen />\r\n        <CardFilterWhere />\r\n        <CardFilterWho />\r\n        <CardFilterWhat />\r\n        <CardFilterWhatVehicle />\r\n        <CardFilterWhatRoad />\r\n      </Accordion>\r\n      <GroupCheckbox formName=\"exampleForm\" colFilter={injurySeverity} onChange={updateInjurySeverity} />\r\n      <Button\r\n        variant=\"primary\"\r\n        disabled={isLoading || !isValidAllFilters}\r\n        onClick={() => { filterStore.submitFilter(); }}\r\n      >\r\n        {isLoading ? t('Loading') : t('Submit')}\r\n        {' '}\r\n\r\n      </Button>\r\n    </Form>\r\n  );\r\n});\r\n\r\nconst CardFilterWhen = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    isValidWhen, startYear, setStartYear, endYear, setEndYear, dayNight, updateDayNight,\r\n  } = filterStore;\r\n  const styleToggle = isValidWhen ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"0\" style={styleToggle}>\r\n          {t('When')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"0\" className=\"filterControls\">\r\n        <Card.Body>\r\n          <div>\r\n            <Form.Row>\r\n              <Form.Group as={Col} controlId=\"exampleForm.ControlSelectStartYear\">\r\n                <Form.Label className=\"filterLable\">\r\n                  {' '}\r\n                  {t('FromYear')}\r\n:\r\n                </Form.Label>\r\n                <Form.Control as=\"select\" defaultValue={startYear} onChange={(e: ChangeEvent<HTMLInputElement>) => { setStartYear(e.target.value); }}>\r\n                  <option>2015</option>\r\n                  <option>2016</option>\r\n                  <option>2017</option>\r\n                  <option>2018</option>\r\n                  <option>2019</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group as={Col} controlId=\"exampleForm.ControlSelectEndYear\">\r\n                <Form.Label className=\"filterLable\">\r\n                  {' '}\r\n                  {t('ToYear')}\r\n:\r\n                </Form.Label>\r\n                <Form.Control as=\"select\" defaultValue={endYear} onChange={(e: ChangeEvent<HTMLInputElement>) => { setEndYear(e.target.value); }}>\r\n                  <option>2015</option>\r\n                  <option>2016</option>\r\n                  <option>2017</option>\r\n                  <option>2018</option>\r\n                  <option>2019</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n            </Form.Row>\r\n            <GroupCheckbox formName=\"exampleForm\" colFilter={dayNight} onChange={updateDayNight} />\r\n          </div>\r\n        </Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nconst CardFilterWhere = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    isValidWhere, roadTypes, updateRoadType, isMultipleCities,\r\n  } = filterStore;\r\n  const styleToggle = isValidWhere ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"1\" style={styleToggle}>\r\n          {t('Where')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"1\" className=\"filterControls\">\r\n        <div>\r\n          <CitySelector isMultiple={isMultipleCities} />\r\n          <StreetSelector />\r\n          <RoadSegmentSelector />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={roadTypes} onChange={updateRoadType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nconst CardFilterWho = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const {\r\n    isValidWho, injTypes, updateInjuerdType, genderTypes, updateGenderType,\r\n  } = filterStore;\r\n  const {\r\n    ageTypes, updateAgeType, populationTypes, updatePopulationType,\r\n  } = filterStore;\r\n  const styleToggle = isValidWho ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"2\" style={styleToggle}>\r\n          {t('Who')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"2\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={injTypes} onChange={updateInjuerdType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={genderTypes} onChange={updateGenderType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={ageTypes} onChange={updateAgeType} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={populationTypes} onChange={updatePopulationType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nconst CardFilterWhat = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhat, accidentType, updateAccidentType } = filterStore;\r\n  const styleToggle = isValidWhat ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"3\" style={styleToggle}>\r\n          {t('What')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"3\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={accidentType} onChange={updateAccidentType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\n\r\nconst CardFilterWhatVehicle = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhatVehicle, vehicleType, updateVehicleType } = filterStore;\r\n  const styleToggle = isValidWhatVehicle ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"4\" style={styleToggle}>\r\n          {t('WhatVehicle')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"4\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={vehicleType} onChange={updateVehicleType} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\n\r\nconst CardFilterWhatRoad = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  const { isValidWhatRoad } = filterStore;\r\n  const {\r\n    speedLimit, updateSpeedLimit, roadWidth, updateRoadWidth,\r\n  } = filterStore;\r\n  const {\r\n    separator, updateSeparator, oneLane, updateOneLane,\r\n  } = filterStore;\r\n  const styleToggle = isValidWhatRoad ? STYLE_TOGGLE_NORMAL : STYLE_TOGGLE_WARNING;\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"5\" style={styleToggle}>\r\n          {t('WhatRoad')}\r\n        </Accordion.Toggle>\r\n      </Card.Header>\r\n      <Accordion.Collapse eventKey=\"5\" className=\"filterControls\">\r\n        <div>\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={speedLimit} onChange={updateSpeedLimit} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={roadWidth} onChange={updateRoadWidth} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={separator} onChange={updateSeparator} />\r\n          <GroupCheckbox formName=\"exampleForm\" colFilter={oneLane} onChange={updateOneLane} />\r\n        </div>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  );\r\n});\r\nexport default FilterRequest;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Collapse from 'react-bootstrap/Collapse';\r\nimport FilterRequest from './FilterRequest';\r\n\r\ninterface IProps {\r\n    activeCardKey?:number\r\n  }\r\n\r\nconst FilterPanel:React.FC<IProps> = ({ activeCardKey = 0 }) => {\r\n  const [open, setOpen] = useState(true);\r\n  const { t } = useTranslation();\r\n  return (\r\n    <>\r\n      <Button onClick={() => { setOpen(!open); }} aria-controls=\"example-collapse-text\" aria-expanded={open}>\r\n        {t('Filter Options')}\r\n      </Button>\r\n      <Collapse in={open}>\r\n        <div id=\"example-collapse-text\">\r\n          <FilterRequest activeCardKey={activeCardKey} />\r\n        </div>\r\n      </Collapse>\r\n    </>\r\n  );\r\n};\r\nexport default FilterPanel;\r\n","import React from 'react';\r\n\r\ninterface IProps {\r\n}\r\ninterface IState {\r\n  hasError: boolean;\r\n}\r\nclass ErrorBoundary extends React.Component<IProps, IState> {\r\n  constructor(props:IProps) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error:any) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error:any, errorInfo:any) {\r\n    // You can also log the error to an error reporting service\r\n    // logErrorToMyService(error: TypeError, errorInfo);\r\n    console.error(error);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\nexport default ErrorBoundary;\r\n","import React, {\r\n  useState, FunctionComponent, lazy, Suspense,\r\n} from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport ErrorBoundary from '../atoms/ErrorBoundary';\r\n// import MapAccidents from '../organisms/MapAccidents'\r\n// import AccidentsTable from '../organisms/AccidentsTable'\r\n// import GroupByGraphsPanel from '../organisms/GroupByGraphsPanel'\r\n// import { GroupByTablesPanel } from '../organisms/GroupByTablesPanel'\r\n// import ImageGallery from '../organisms/ImageGallery';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n    type: string;\r\n    defaultKey?: string;\r\n}\r\n\r\nconst GroupByGraphsPanel = lazy(() => import('../organisms/GroupByGraphsPanel'));\r\nconst GroupByTablesPanel = lazy(() => import('../organisms/GroupByTablesPanel'));\r\nconst MapAccidents = lazy(() => import('../organisms/MapAccidents'));\r\nconst AccidentsTable = lazy(() => import('../organisms/AccidentsTable'));\r\nconst MyImageGallery = lazy(() => import('../organisms/MyImageGallery'));\r\nexport const TabsTemplate: FunctionComponent<IProps> = observer(({ type, defaultKey = 'charts' }) => {\r\n  const style = {\r\n    marginTop: '20px',\r\n  };\r\n  const { t } = useTranslation();\r\n  const [activeKey] = useState(defaultKey);\r\n  const { mapStore } = useStore();\r\n  return (\r\n    <Tabs\r\n      mountOnEnter\r\n      defaultActiveKey={activeKey}\r\n      id=\"main-tabs\"\r\n      onSelect={(tabActiveKey: string) => {\r\n        if (tabActiveKey === 'map') {\r\n          // map is renderd only when tab is shown to prevent leaflet bug\r\n          mapStore.isReadyToRenderMap = true;\r\n        } else mapStore.isReadyToRenderMap = false;\r\n      }}\r\n    >\r\n      <Tab style={style} eventKey=\"charts\" title={t('Charts')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Charts...</div>}>\r\n            <GroupByGraphsPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"grouptables\" title={t('Groups')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Groups tables...</div>}>\r\n            <GroupByTablesPanel />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"map\" title={t('Map')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Map...</div>}>\r\n            <MapAccidents />\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"table\" title={t('Table')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Accidents Table...</div>}>\r\n            <div className=\"col-auto\"><AccidentsTable /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n      <Tab style={style} eventKey=\"image\" title={t('Images')}>\r\n        <ErrorBoundary>\r\n          <Suspense fallback={<div>Loading Images...</div>}>\r\n            <div className=\"col-auto\"><MyImageGallery type={type} /></div>\r\n          </Suspense>\r\n        </ErrorBoundary>\r\n      </Tab>\r\n    </Tabs>\r\n  );\r\n});\r\nexport default TabsTemplate;\r\n","import React, { useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport FilterPanel from '../organisms/FilterPanel';\r\nimport TabsTemplate from './TabsTemplate';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps { }\r\nconst HomeTemplate: React.FC<IProps> = observer(() => {\r\n  const { t } = useTranslation();\r\n  const { mapStore, filterStore } = useStore();\r\n  const {\r\n    setCurrentPage, setIsMultipleCities, updateCities, submitFilter,\r\n  } = filterStore;\r\n  setCurrentPage('home');\r\n  setIsMultipleCities(true);\r\n  mapStore.isReadyToRenderMap = false;\r\n  useEffect(() => {\r\n    // mapStore.initBounds();\r\n    updateCities([]);\r\n    submitFilter();\r\n  }, [submitFilter, updateCities]);\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row \">\r\n          <div className=\"p-2 col-md-2\"><FilterPanel /></div>\r\n          <main className=\"col-md-10\">\r\n            <h4>{t('Israel')}</h4>\r\n            <TabsTemplate type=\"home\" />\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nexport default HomeTemplate;\r\n","import React from 'react';\r\nimport HomeTemplate from '../templates/HomeTemplate';\r\n\r\ninterface IProps { }\r\n\r\nconst HomePage: React.FC<IProps> = () => (\r\n  <HomeTemplate />\r\n);\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n// import { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { TabsTemplate } from './TabsTemplate';\r\nimport FilterPanel from '../organisms/FilterPanel';\r\nimport { useStore } from '../../stores/storeConfig';\r\nimport citisNamesHeb from '../../assets/cities_names_heb.json';\r\n\r\n// A custom hook that builds on useLocation to parse\r\n// the query string for you.\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n// get city name by query by url\r\nfunction useCityNamefromQuery() {\r\n  const query = useQuery();\r\n  let res = ['  -'];\r\n  const name = query.get('name');\r\n  let found = false;\r\n  if (name !== null) found = citisNamesHeb.includes(name);\r\n  if (found) {\r\n    res = [citisNamesHeb.find((element) => element === name!)!];\r\n  }\r\n  return res;\r\n}\r\n\r\nexport const CityLable: React.FC<{}> = observer(() => {\r\n  const { filterStore } = useStore();\r\n  const { cityResult } = filterStore;\r\n  return (\r\n    <h4>{cityResult}</h4>\r\n  );\r\n});\r\n\r\ninterface IProps { }\r\nconst CityTemplate: React.FC<IProps> = observer(() => {\r\n  // const { t } = useTranslation();\r\n  const { filterStore } = useStore();\r\n  filterStore.setCurrentPage('city');\r\n  filterStore.isMultipleCities = false;\r\n  let { cityResult } = filterStore;\r\n  if (cityResult === '') {\r\n    const cityName = useCityNamefromQuery();\r\n    filterStore.updateCities(cityName);\r\n    cityResult = cityName[0];\r\n    filterStore.submitFilter();\r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row \">\r\n          <div className=\"p-2 col-md-2\"><FilterPanel activeCardKey={1} /></div>\r\n          <main className=\"col-md-10\">\r\n            <CityLable />\r\n            <TabsTemplate type=\"city\" defaultKey=\"map\" />\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nexport default CityTemplate;\r\n","import React from 'react'\r\nimport CityTemplate from '../templates/CityTemplate'\r\n\r\ninterface IProps { }\r\n\r\nexport const CityPage: React.FC<IProps> = () => {\r\n  return (\r\n    <CityTemplate />\r\n  )\r\n}\r\n","import React, { MouseEvent } from 'react';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport ToggleButton from 'react-bootstrap/ToggleButton';\r\nimport { observer } from 'mobx-react';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\nconst LanguageSelector = observer(() => {\r\n  const { uiStore } = useStore();\r\n  const style: any = document.getElementById('style-direction');\r\n  if (style !== null) {\r\n    if (uiStore.language === 'he') {\r\n      style.href = './bootstrap.rtl.min.css';\r\n      // changeLanguage('he')\r\n      document.body.classList.remove('dir-ltr');\r\n      document.body.classList.add('dir-rtl');\r\n    } else {\r\n      style.href = './bootstrap.min.css';\r\n      // changeLanguage('en')\r\n      document.body.classList.remove('dir-rtl');\r\n      document.body.classList.add('dir-ltr');\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <ButtonGroup toggle size=\"sm\" className=\"languageSelector\">\r\n        <ToggleButton type=\"radio\" name=\"radiolang\" value=\"he\" defaultChecked onClick={(e: MouseEvent) => { uiStore.updateLanguage('he'); }}>\r\n          Heb\r\n        </ToggleButton>\r\n        <ToggleButton type=\"radio\" name=\"radiolang\" value=\"en\" onClick={(e: MouseEvent) => { uiStore.updateLanguage('en'); }}>\r\n          Eng\r\n        </ToggleButton>\r\n      </ButtonGroup>\r\n    </div>\r\n  );\r\n});\r\nexport default LanguageSelector;","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { observer } from 'mobx-react';\r\nimport { Link } from 'react-router-dom';\r\n// import Button from 'react-bootstrap/Button';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport menuIcon from '../../assets/menu_white.png';\r\nimport { useStore } from '../../stores/storeConfig';\r\n\r\ninterface IProps {\r\n}\r\nconst ButtonMenu: React.FC<IProps> = observer((() => {\r\n  const styleButton = {\r\n    backgroundColor: '#007bff',\r\n  };\r\n  const styleLink = {\r\n    color: '#004ba0',\r\n  };\r\n  const { t } = useTranslation();\r\n  const { uiStore } = useStore();\r\n  const alignRight = (uiStore.language === 'he');\r\n  return (\r\n    <div>\r\n      {/* <Button variant=\"primary\" size=\"sm\" onClick={() => { }}>\r\n                <img src={menuIcon} alt=\"menu\" height=\"25\" width=\"25\" />\r\n            </Button> */}\r\n      <Dropdown>\r\n        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\" style={styleButton}>\r\n          <img src={menuIcon} alt=\"menu\" height=\"25\" width=\"25\" />\r\n        </Dropdown.Toggle>\r\n        <Dropdown.Menu alignRight={alignRight}>\r\n          <Dropdown.Item as=\"button\"><Link style={styleLink} to=\"/\">{t('Home')}</Link></Dropdown.Item>\r\n          <Dropdown.Item as=\"button\"><Link style={styleLink} to=\"/city\">{t('Cities')}</Link></Dropdown.Item>\r\n          <Dropdown.Item as=\"button\"><Link style={styleLink} to=\"/about\">{t('About')}</Link></Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  );\r\n}));\r\nexport default ButtonMenu;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\nimport LanguageSelector from '../molecules/LanguageSelector';\r\nimport ButtonMenu from '../atoms/ButtonMenu';\r\nimport logo from '../../assets/safety-logo.png';\r\n\r\n\r\ninterface IProps {\r\n  title: string\r\n}\r\ninterface IProps { }\r\nexport const Header: React.FC<IProps> = ({ title }) => {\r\n  const divStyle = {\r\n    display: 'flex',\r\n    flexFlow: 'row wrap',\r\n  };\r\n  const { t } = useTranslation();\r\n  const [showNavMenu, setShowNavMenu] = useState(getShowNavMenu(window.innerWidth));\r\n  const navMenu = (showNavMenu) ? (\r\n    <div style={divStyle}>\r\n      <nav className=\"App-nav\">\r\n        <Link to=\"/\">{t('Home')}</Link>\r\n        <Link to=\"/city\">{t('Cities')}</Link>\r\n        <Link to=\"/about\">{t('About')}</Link>\r\n      </nav>\r\n    </div>\r\n  ) : <ButtonMenu />;\r\n  React.useEffect(() => {\r\n    function handleResize() {\r\n      const show = getShowNavMenu(window.innerWidth);\r\n      setShowNavMenu(show);\r\n    }\r\n    window.addEventListener('resize', handleResize);\r\n    return (() => { window.removeEventListener('resize', handleResize); });\r\n  });\r\n  return (\r\n    <header className=\"App-header\">\r\n      <div style={divStyle}>\r\n        <img src={logo} alt=\"Safety-Data logo\" height=\"45\" width=\"188\" />\r\n        {navMenu}\r\n      </div>\r\n      <div className=\"languageSelector\">\r\n        <LanguageSelector />\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\nconst getShowNavMenu = (width: number) => {\r\n  let res = true;\r\n  if (width <= 530) res = false;\r\n  return res;\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// export default class Footer extends React.Component {\r\ninterface IProps { }\r\nexport const Footer: React.FC<IProps> = () => {\r\n  const divStyle = {\r\n    display: 'flex',\r\n    flexFlow: 'row wrap',\r\n  };\r\n  const { t } = useTranslation();\r\n  return (\r\n    <footer style={divStyle}>\r\n      <nav className=\"App-nav\">\r\n        <Link to=\"/\">{t('Home')}</Link>\r\n        <Link to=\"/city\">{t('Cities')}</Link>\r\n        <Link to=\"/about\">{t('About')}</Link>\r\n      </nav>\r\n    </footer>\r\n  );\r\n};\r\nexport default Footer;\r\n","import React, { lazy, Suspense } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport './i18n';\r\nimport './App.css';\r\nimport Card from 'react-bootstrap/Card';\r\nimport HomePage from './components/pages/HomePage';\r\nimport { CityPage } from './components/pages/CityPage';\r\n// import UpdateImagePage from './components/pages/UpdateImagePage';\r\nimport Header from './components/templates/Headr';\r\nimport Footer from './components/templates/Footer';\r\n// import mapStore from './stores/MapStore';\r\n\r\nconst AboutPage = lazy(() => import('./components/pages/AboutPage'));\r\nconst UpdateImagePage = lazy(() => import('./components/pages/UpdateImagePage'));\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div>\r\n        {/* A <Switch> looks through its children <Route>s and\r\n          renders the first one that matches the current URL. */}\r\n        <Card display=\"flex\" height=\"100%\">\r\n          <Header title=\"Safety Data\" />\r\n          <div className=\"App\">\r\n            <Suspense fallback={<div>Loading...</div>}>\r\n              <Switch>\r\n                <Route path=\"/about\">\r\n                  <AboutPage />\r\n                </Route>\r\n                <Route path=\"/city\">\r\n                  <CityPage />\r\n                </Route>\r\n                <Route path=\"/update-img\">\r\n                  <UpdateImagePage />\r\n                </Route>\r\n                <Route path=\"/\">\r\n                  <HomePage />\r\n                </Route>\r\n              </Switch>\r\n            </Suspense>\r\n          </div>\r\n          <Footer />\r\n        </Card>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// import * as $ from 'jquery';\r\n// /////\r\nexport default class AccidentService {\r\n  // get request using jsonp\r\n\r\n}\r\n// export const getAll = (collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident\",\r\n//     \"method\": \"GET\",\r\n//     \"headers\": {}\r\n//   }\r\n//   $.ajax(settings).done(function (response: any) {\r\n//     //console.log(response)\r\n//     collback(response);\r\n//   });\r\n// }\r\n\r\n// //send request using jsonp and post body - return arry of points\r\n// export const postGroupby = (filter: string, collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident/agg\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident/agg\",\r\n//     \"method\": \"POST\",\r\n//     \"headers\": {\r\n//       \"content-type\": \"application/json\"\r\n//     },\r\n//     \"processData\": false,\r\n//     \"data\": filter\r\n//   }\r\n//   $.ajax(settings).done(function (response: any[]) {\r\n//     collback(response);\r\n//   });\r\n// }\r\n// //send request using jsonp and post body - return arry of points\r\n// export const postFilter = (filter: string, collback: (arrPoints: any[]) => void) => {\r\n//   //\"http://localhost:5000/api/v1/accident\"\r\n//   var settings = {\r\n//     \"url\": \"/api/v1/accident\",\r\n//     \"method\": \"POST\",\r\n//     \"headers\": {\r\n//       \"content-type\": \"application/json\"\r\n//     },\r\n//     \"processData\": false,\r\n//     \"data\": filter\r\n//   }\r\n\r\n//   $.ajax(settings).done(function (response: any[]) {\r\n//     collback(response);\r\n//   });\r\n// }\r\nexport const fetchFilter = async (filter: string, type: string):\r\n  Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = `/api/v1/accident/${type}`;\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n\r\n\r\nexport const fetchGroupBy = async (filter: string): Promise<Array<any> | undefined> => {\r\n  // Default options are marked with *\r\n  const url = '/api/v1/accident/agg';\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    mode: 'cors', // no-cors, *cors, same-origin\r\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: 'same-origin', // include, *same-origin, omit\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    redirect: 'follow', // manual, *follow, error\r\n    referrerPolicy: 'no-referrer', // no-referrer, *client\r\n    body: filter,\r\n  });\r\n  if (!response.ok) {\r\n    return [];\r\n  }\r\n  return response.json(); // parses JSON response into native JavaScript objects\r\n};\r\n","import { observable, action } from 'mobx';\r\nimport { Map } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport { fetchFilter } from '../services/AccidentService';\r\nimport RootStore from './RootStore';\r\n// import autorun  from \"mobx\"\r\n\r\nexport enum BBoxType {\r\n  NO_BBOX,\r\n  SERVER_BBOX,\r\n  LOCAL_BBOX\r\n}\r\n// const INIT_BOUNDS = [L.latLng(32.032, 34.739), L.latLng(32.115, 34.949)];\r\nconst DEFAULT_BOUNDS = [\r\n  L.latLng(29.50, 34.22), // most possible south-west point\r\n  L.latLng(33.271, 35.946), // most possible north-east point\r\n];\r\n\r\nexport default class MapStore {\r\n  appInitialized = false\r\n\r\n  constructor(rootStore: RootStore) {\r\n    // init app data\r\n    this.rootStore = rootStore;\r\n  }\r\n\r\n  rootStore: RootStore;\r\n\r\n  mapRef: React.RefObject<Map<any>>|null = null;\r\n\r\n  setMapRef = (mapRef: React.RefObject<Map<any>>) => {\r\n    this.mapRef = mapRef;\r\n  }\r\n\r\n  @observable\r\n  isReadyToRenderMap = false;\r\n\r\n  @observable\r\n  bboxType: BBoxType = BBoxType.LOCAL_BBOX;\r\n\r\n  @observable\r\n  mapCenter: L.LatLng = new L.LatLng(32.08, 34.83)\r\n\r\n  @action\r\n  updateMapCenter = (center: L.LatLng) => {\r\n    this.mapCenter = center;\r\n  }\r\n\r\n  @action\r\n  updateMapCenterByCity = (res: any[]) => {\r\n    if (res !== null && res.length > 0) {\r\n      const city = res[0];\r\n      if (city.lat !== null && city.lon !== null) {\r\n        this.updateMapCenter(new L.LatLng(city.lat, city.lon));\r\n      }\r\n    }\r\n  }\r\n\r\n  @observable\r\n  useSetBounds = true;\r\n\r\n  // @observable\r\n  // mapBounds: L.LatLngBounds = L.latLngBounds(INIT_BOUNDS);\r\n  // @action\r\n  // updateBounds = (bounds: L.LatLngBounds) => {\r\n  //   //console.log(\"updateBounds\",bounds)\r\n  //   try {\r\n  //     this.mapBounds = (bounds);\r\n  //   } catch (error) {\r\n  //     console.error(error)\r\n  //   }\r\n  // }\r\n  // @action\r\n  // initBounds = () => {\r\n  //   this.updateBounds(L.latLngBounds(INIT_BOUNDS))\r\n  // }\r\n  @action\r\n  setBounds = (data: any[], citisArr: string[]) => {\r\n    if (this.isSetBounds) {\r\n      const bunds = this.getBounds(data);\r\n      if (citisArr.length > 0 && citisArr[0] !== '') {\r\n        // //this.mapBounds = bunds;\r\n        // if (bunds.contains(this.mapCenter))\r\n        //   this.mapBounds = bunds;\r\n        // else\r\n        //  console.log(\"worng bounds: \", bunds, this.mapCenter)\r\n      } else {\r\n        this.updateMapCenter(bunds.getCenter());\r\n        // this.mapBounds = bunds;\r\n      }\r\n      this.isSetBounds = false;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  isSetBounds = false;\r\n\r\n  @action\r\n  updateIsSetBounds = (citisArr: string[], roadSegArr: any[]) => {\r\n    if (this.useSetBounds) {\r\n      if (citisArr.length > 0 && citisArr[0] !== '') this.isSetBounds = true;\r\n      else if (roadSegArr.length > 0 && roadSegArr[0] !== '') this.isSetBounds = true;\r\n    }\r\n  }\r\n\r\n  @observable\r\n  heatLayerHidden = true;\r\n\r\n  @action\r\n  toggleHeatLayer = () => {\r\n    this.heatLayerHidden = !this.heatLayerHidden;\r\n  }\r\n\r\n  @observable\r\n  useSmallMarkers = false;\r\n\r\n  @action\r\n  toggleUseSmallMarkers = () => {\r\n    this.useSmallMarkers = !this.useSmallMarkers;\r\n  }\r\n\r\n  getBounds = (data: any[]) => {\r\n    // console.log(\"setBounds!\")\r\n    let arr: L.LatLng[] = [];\r\n    let lastPoint: L.LatLng = L.latLng(0, 0);\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        const p = new L.LatLng(x.latitude, x.longitude);\r\n        if ((lastPoint.lat === 0 && lastPoint.lng === 0)\r\n        || x.latitude !== lastPoint.lat\r\n        || x.longitude !== lastPoint.lng) {\r\n          arr.push(p);\r\n          // prevent insertion of duplicate same point\r\n          lastPoint = p;\r\n        }\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (arr.length === 1) {\r\n      arr.length = 0; // clean tha array\r\n      arr.push(L.latLng(lastPoint.lat + 0.01, lastPoint.lng + 0.01));\r\n      arr.push(L.latLng(lastPoint.lat - 0.01, lastPoint.lng - 0.01));\r\n    }\r\n    // in case no lat/lon info\r\n    if (arr.length < 2) arr = DEFAULT_BOUNDS;\r\n    const bounds = L.latLngBounds(arr);\r\n    return bounds;\r\n  }\r\n\r\n  getBounds2 = (data: any[]) => {\r\n    if (data.length === 0) return L.latLngBounds(DEFAULT_BOUNDS);\r\n    const bounds = {\r\n      south: 200, north: -200, west: 200, east: -200,\r\n    };\r\n    data.forEach((x) => {\r\n      if (x.latitude !== null && x.longitude !== null) {\r\n        bounds.south = Math.min(x.latitude, bounds.south);\r\n        bounds.north = Math.max(x.latitude, bounds.north);\r\n        bounds.west = Math.min(x.longitude, bounds.west);\r\n        bounds.east = Math.max(x.longitude, bounds.east);\r\n      }\r\n    });\r\n    // bounds for single point\r\n    if (bounds.south === bounds.north) {\r\n      bounds.south -= 0.01;\r\n      bounds.north += 0.01;\r\n      bounds.west -= 0.01;\r\n      bounds.east += 0.01;\r\n    }\r\n    const b = L.latLngBounds([bounds.south, bounds.west], [bounds.east, bounds.north]);\r\n    return b;\r\n  }\r\n\r\n  @observable\r\n  dataMarkersInBounds: any[] = []\r\n\r\n  @action\r\n  updateDataMarkersInBounds = (data: any[]) => {\r\n    this.dataMarkersInBounds = data;\r\n  }\r\n\r\n  getMarkersInBBox = () => {\r\n    if (this.bboxType === BBoxType.LOCAL_BBOX) {\r\n      this.getMarkersInLocalBBox(0.1);\r\n    } else if (this.bboxType === BBoxType.SERVER_BBOX) {\r\n      this.submintGetMarkersBBox();\r\n    }\r\n  }\r\n\r\n  getMarkersInLocalBBox = (boundsMargin: number) => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    try {\r\n      const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n      const west = mapBounds.getWest() - boundsMargin;\r\n      const east = mapBounds.getEast() + boundsMargin;\r\n      const south = mapBounds.getSouth() - boundsMargin;\r\n      const north = mapBounds.getNorth() + boundsMargin;\r\n      const data = this.rootStore.filterStore.dataAllInjuries\r\n        .filter((x) => x.latitude >= south\r\n          && x.latitude <= north && x.longitude >= west && x.longitude <= east);\r\n      this.updateDataMarkersInBounds(data);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  submintGetMarkersBBox = () => {\r\n    if (this.mapRef === undefined || this.mapRef === null || this.mapRef.current === null) return;\r\n    const mapBounds = this.mapRef.current.leafletElement.getBounds();\r\n    const filter = this.rootStore.filterStore.getFilter(mapBounds, true);\r\n    fetchFilter(filter, 'latlon')\r\n      .then((data: any[] | undefined) => {\r\n        if (data !== null && data !== undefined) {\r\n          this.updateDataMarkersInBounds(data);\r\n        }\r\n      });\r\n  }\r\n}\r\n"],"sourceRoot":""}