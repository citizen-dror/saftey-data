(this["webpackJsonpreact-test-1"]=this["webpackJsonpreact-test-1"]||[]).push([[0],{56:function(e,t,a){e.exports=a(84)},61:function(e,t,a){},62:function(e,t,a){},74:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n,r,o,c,l,i,s,u,p=a(0),m=a.n(p),d=a(19),h=a.n(d),f=(a(61),a(20)),b=a(24),E=(a(62),a(38)),g=a(9),v=a(29),y=a(8),O=a(21),j=(a(64),a(6)),k=(n=function e(t){Object(y.a)(this,e),Object(v.a)(this,"value",r,this),Object(v.a)(this,"id",o,this),Object(v.a)(this,"complete",c,this),this.value=t,this.id=Date.now(),this.complete=!1},r=Object(O.a)(n.prototype,"value",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(O.a)(n.prototype,"id",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=Object(O.a)(n.prototype,"complete",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n),w=(l=function(){function e(){Object(y.a)(this,e),this.appInitialized=!1,Object(v.a)(this,"todos",i,this),Object(v.a)(this,"filter",s,this),Object(v.a)(this,"clearComleted",u,this),this.appInitialized=!1}return Object(g.a)(e,[{key:"createTodo",value:function(e){this.todos.push(new k(e))}},{key:"filterdTodos",get:function(){var e=new RegExp(this.filter,"i");return this.todos.filter((function(t){return e.test(t.value)}))}}]),e}(),i=Object(O.a)(l.prototype,"todos",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=Object(O.a)(l.prototype,"filter",[j.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(O.a)(l.prototype,"filterdTodos",[j.e],Object.getOwnPropertyDescriptor(l.prototype,"filterdTodos"),l.prototype),Object(O.a)(l.prototype,"createTodo",[j.d],Object.getOwnPropertyDescriptor(l.prototype,"createTodo"),l.prototype),u=Object(O.a)(l.prototype,"clearComleted",[j.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.todos.filter((function(e){return!e.complete}));e.todos=t}}}),l),C=new w,S=m.a.createContext(C),z=Object(E.a)((function(){var e=function(){var e=m.a.useContext(S);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e}(),t=e.filterdTodos,a=e.filter,n=e.clearComleted,r=t.map((function(e){return m.a.createElement("li",{key:e.id},m.a.createElement("input",{type:"checkbox",value:e.complete,checked:e.complete,onClick:function(t){N(e)}}),e.value)}));return m.a.createElement("div",null,m.a.createElement("h1",null,"ToDo List"),"add: ",m.a.createElement("input",{onKeyPress:function(t){x(t,e)}}),"filter: ",m.a.createElement("input",{value:a,onChange:function(t){P(t,e)}}),m.a.createElement("ul",null,r),m.a.createElement("button",{type:"button",onClick:n},"Clear Completed"))})),P=function(e,t){t.filter=e.target.value},x=function(e,t){if(13===e.which){var a=e.target.value;t.createTodo(a),e.target.value=""}},N=function(e){e.complete=!e.complete},A=z,M=a(12),T=a(11),H=a(13),L=a(45),R=a(47),U=a(48),D=a(49),_=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={hasLocation:!1,latlng:{lat:51.505,lng:-.09}},a.mapRef=Object(p.createRef)(),a.handleClick=function(){var e=a.mapRef.current;console.log(e),null!=e&&e.leafletElement.locate()},a.handleLocationFound=function(e){a.setState({hasLocation:!0,latlng:e.latlng})},a}return Object(H.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state.hasLocation?m.a.createElement(L.a,{position:this.state.latlng},m.a.createElement(R.a,null,"You are here")):null;return m.a.createElement(U.a,{center:this.state.latlng,style:{height:"400px",width:"100vw"},length:4,onClick:this.handleClick,onLocationfound:this.handleLocationFound,ref:this.mapRef,zoom:13},m.a.createElement(D.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e)}}]),t}(p.Component),G=a(1),V=a.n(G);a(66);V.a.Icon.Default.mergeOptions({iconRetinaUrl:a(67),iconUrl:a(68),shadowUrl:a(69)});var B=Object(E.a)(function(e){function t(){return Object(y.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.store.center;return m.a.createElement(U.a,{center:e,zoom:13,style:{height:"400px",width:"100vw"}},m.a.createElement(D.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),m.a.createElement(L.a,{position:e}))}}]),t}(m.a.Component)),F=a(50),I=a.n(F),K=a(51),W=a.n(K),J=a(52),$=(a(74),"leaflet-popup-button"),Y=function(e){function t(e){var a;Object(y.a)(this,t),(a=Object(M.a)(this,Object(T.a)(t).call(this,e))).parsedChildren=a.props.children.$$typeof?I.a.renderToStaticMarkup(a.props.children):a.props.children,a.state={editScreenOpen:!1,inputValue:a.parsedChildren,content:a.parsedChildren,nametag:a.props.nametag},a.openEditScreen=function(){a.setState({editScreenOpen:!0})},a.closeEditScreen=function(){a.setState({editScreenOpen:!1})},a.handleEdits=function(e){a.setState({inputValue:e.target.value})},a.saveEdits=function(){!isNaN(a.props.sourceKey)&&a.props.saveContentCallback&&a.props.saveContentCallback(a.state.inputValue,a.props.sourceKey),a.setState({content:a.state.inputValue}),a.closeEditScreen()},a.cancelEdits=function(){a.setState({inputValue:a.state.content}),a.closeEditScreen()},a.removeSource=function(){a.props.sourceKey?(a.props.sourceKey||0===a.props.sourceKey)&&a.props.removalCallback&&a.props.removalCallback(a.props.sourceKey):a.thePopup.leafletElement._source.remove()},a.contentScreenRender=function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(J.a,{content:e}),a.PopUpButtons())},a.PopUpButtons=function(){var e;return a.props.removable&&!a.props.editable?e=m.a.createElement("div",{className:"leaflet-popup-useraction-buttons"},m.a.createElement("button",{className:"".concat($," remove"),onClick:a.removeSource},"Remove this ",a.state.nametag)):!a.props.removable&&a.props.editable?e=m.a.createElement("div",{className:"leaflet-popup-useraction-buttons"},m.a.createElement("button",{className:"".concat($," edit"),onClick:a.openEditScreen},"Edit")):a.props.removable&&a.props.editable&&(e=m.a.createElement("div",{className:"leaflet-popup-useraction-buttons"},m.a.createElement("button",{className:"".concat($," remove"),onClick:a.removeSource},"Remove this ",a.state.nametag),m.a.createElement("button",{onClick:a.openEditScreen,className:"".concat($," edit")},"Edit"))),e};return["Layer","Circle","CircleMarker","Marker","Polyline","Polygon","ImageOverlay","VideoOverlay","SVGOverlay","Rectangle","LayerGroup","FeatureGroup","GeoJSON"].forEach((function(e){V.a[e].include({nametag:e.toLowerCase()})})),a}return Object(H.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.thePopup.leafletElement._source.nametag),this.props.open&&setTimeout((function(){e.thePopup.leafletElement._source.openPopup()}),.001),this.setState({nametag:this.props.nametag||this.thePopup.leafletElement._source.nametag})}},{key:"render",value:function(){var e=this,t=m.a.createElement(m.a.Fragment,null,m.a.createElement(W.a,{className:"leaflet-popup-input",html:this.state.inputValue,ref:"editableDiv",onChange:this.handleEdits}),m.a.createElement("div",{className:"leaflet-popup-useraction-buttons"},m.a.createElement("button",{className:"".concat($," cancel"),onClick:this.cancelEdits},"Cancel"),m.a.createElement("button",{className:"".concat($," save"),onClick:this.saveEdits},"Save")));return m.a.createElement(R.a,Object.assign({},this.props,{ref:function(t){return e.thePopup=t},minWidth:"160"}),this.state.editScreenOpen?t:this.contentScreenRender(this.state.content))}}]),t}(m.a.Component),q=a(34),Q=a.n(q),X=function(){function e(){Object(y.a)(this,e)}return Object(g.a)(e,[{key:"getHazard",value:function(e){Q.a.ajax({url:"/api/v1/hazards",method:"GET",headers:{}}).done((function(t){console.log(t),e(t)}))}},{key:"postHazard",value:function(e){var t={url:"/api/v1/hazards",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{"name" : "car on path", "status" : "new","type": "maintnance","lat": '.concat(e.lat,',"lon" :').concat(e.lng,"}")};Q.a.ajax(t).done((function(e){console.log(e)}))}}]),e}(),Z=new V.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),ee=function(e){function t(){var e;return Object(y.a)(this,t),(e=Object(M.a)(this,Object(T.a)(t).call(this))).addMarker=function(t){var a=e.state.markers;a.push(t.latlng),e.setState({markers:a})},e.getHazards=function(t){(new X).getHazard(e.addHazardsToMap)},e.addHazardsToMap=function(t){console.log("addHazardsToMap");var a=e.state.markers;t.map((function(e){return a.push(new V.a.latLng(e.lat,e.lon))})),e.setState({markers:a})},e.state={markers:[]},e}return Object(H.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state.markers.map((function(e,t){return m.a.createElement("li",{key:"".concat(t)},t,":  (",e.lat,",",e.lng,")")})),t=this.state.markers.map((function(e,t){return m.a.createElement(L.a,{key:"marker-".concat(t),position:e,icon:Z},m.a.createElement(Y,{maxWidth:"300",editable:!0},"Edit Me!"))}));return console.log(this.state.markers),m.a.createElement("div",null,m.a.createElement(U.a,{center:[32.09,34.7818],onClick:this.addMarker,zoom:13,style:{height:"400px",width:"100vw"}},m.a.createElement(D.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t),m.a.createElement("button",{className:"button",type:"button",onClick:this.getHazards},"Get Hazards"),m.a.createElement("div",{className:"listDiv"},m.a.createElement("ul",null,e)))}}]),t}(m.a.Component),te=function(){function e(){Object(y.a)(this,e)}return Object(g.a)(e,[{key:"getAll",value:function(e){Q.a.ajax({url:"/api/v1/accident",method:"GET",headers:{}}).done((function(t){e(t)}))}}]),e}(),ae=new V.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),ne=function(e){function t(){var e;return Object(y.a)(this,t),(e=Object(M.a)(this,Object(T.a)(t).call(this))).getPoints=function(t){(new te).getAll(e.addPointsToMap)},e.addPointsToMap=function(t){e.setState((function(){return{markers:t}}))},e.state={markers:[]},e}return Object(H.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state.markers.map((function(e){return m.a.createElement("li",{key:"".concat(e._id)},e.accident_year,":  (",e.latitude,", ",e.longitude,", )")})),t=this.state.markers.map((function(e){return null!==e.latitude&&null!==e.longitude?m.a.createElement(L.a,{key:"marker-".concat(e._id),position:[e.latitude,e.longitude],icon:ae},m.a.createElement(R.a,{maxWidth:"300"},e.accident_year)):null}));return m.a.createElement("div",null,m.a.createElement(U.a,{center:[32.09,34.7818],zoom:13,style:{height:"400px",width:"100vw"}},m.a.createElement(D.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t),m.a.createElement("button",{className:"button",type:"button",onClick:this.getPoints.bind()},"Get Accidents"),m.a.createElement("div",{className:"listDiv"},m.a.createElement("ul",null,e)))}}]),t}(m.a.Component),re=a(44),oe=a(54),ce=a.n(oe),le=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={layerHidden:!1,fitBoundsOnUpdate:!0,addressPoints:[]},a.getPoints=function(e){(new te).getAll(a.addPointsToMap)},a.addPoint=function(e){var t=[e.latlng.lat,e.latlng.lng,e.originalEvent.timeStamp.toString()];a.state.addressPoints.length>0&&a.setState((function(e){return{addressPoints:[].concat(Object(re.a)(e.addressPoints),[t])}}))},a.addPointsToMap=function(e){var t=e.map((function(e){return[e.latitude,e.longitude,e._id]}));a.setState({addressPoints:Object(re.a)(t)})},a}return Object(H.a)(t,e),Object(g.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement(U.a,{center:[32.09,34.7818],zoom:10,style:{height:"400px",width:"100vw"},onClick:this.addPoint},!this.state.layerHidden&&m.a.createElement(ce.a,{fitBoundsOnLoad:!0,fitBoundsOnUpdate:!0,points:this.state.addressPoints,longitudeExtractor:function(e){return e[1]},latitudeExtractor:function(e){return e[0]},intensityExtractor:function(e){return parseFloat(e[2])}}),m.a.createElement(D.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})),m.a.createElement("button",{className:"button",onClick:function(){return e.setState({layerHidden:!e.state.layerHidden})}},"Toggle Layer"),m.a.createElement("button",{className:"button",type:"button",onClick:this.getPoints},"Add Heat Points"))}}]),t}(m.a.Component),ie=function(e){function t(){return Object(y.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return m.a.createElement("header",{className:"App-header"},m.a.createElement("h1",null,this.props.title))}}]),t}(m.a.Component),se=function(e){function t(){return Object(y.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return m.a.createElement("footer",{style:{display:"flex",flexFlow:"row wrap"}},m.a.createElement("nav",{className:"App-nav"},m.a.createElement(f.b,{to:"/"},"Home"),m.a.createElement(f.b,{to:"/addmarkers"},"Add Markers"),m.a.createElement(f.b,{to:"/accidents"},"Accidents"),m.a.createElement(f.b,{to:"/heatmap"},"HeatMap"),m.a.createElement(f.b,{to:"/center"},"Locate"),m.a.createElement(f.b,{to:"/about"},"About")))}}]),t}(m.a.Component),ue=function e(){Object(y.a)(this,e),this.center=[32.09,34.7818]};Object(j.h)(ue,{center:j.m});var pe=new ue;function me(){return m.a.createElement("div",{className:"App"},m.a.createElement(ie,{title:"React Test"}),m.a.createElement(B,{store:pe}),m.a.createElement(A,{store:w}),m.a.createElement(se,null))}function de(){return m.a.createElement("div",{className:"App"},m.a.createElement(ie,{title:"AddMarkers"}),m.a.createElement(ee,null),m.a.createElement(se,null))}function he(){return m.a.createElement("div",{className:"App"},m.a.createElement(ie,{title:"Click Locate Test"}),m.a.createElement(_,null),m.a.createElement(se,null))}function fe(){return m.a.createElement("div",null,m.a.createElement(ie,{title:"About"}),m.a.createElement("h1",null,"About page"),m.a.createElement(se,null))}var be=function(){return m.a.createElement(f.a,null,m.a.createElement("div",null,m.a.createElement(b.c,null,m.a.createElement(b.a,{path:"/about"},m.a.createElement(fe,null)),m.a.createElement(b.a,{path:"/addmarkers"},m.a.createElement(de,null)),m.a.createElement(b.a,{path:"/accidents"},m.a.createElement("div",{className:"App"},m.a.createElement(ie,{title:"Accidents Map"}),m.a.createElement(ne,null),m.a.createElement(se,null))),m.a.createElement(b.a,{path:"/heatmap"},m.a.createElement("div",{className:"App"},m.a.createElement(ie,{title:"Heat Map"}),m.a.createElement(le,null),m.a.createElement(se,null))),m.a.createElement(b.a,{path:"/center"},m.a.createElement(he,null)),m.a.createElement(b.a,{path:"/"},m.a.createElement(me,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(m.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.2db0a762.chunk.js.map